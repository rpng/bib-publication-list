/*!*
 * Javascript BibTex Parser v0.1
 * Copyright (c) 2008 Simon Fraser University
 * @author Steve Hannah <shannah at sfu dot ca>
 * 
 *
 * License:
 * 
 *     This program is free software: you can redistribute it and/or modify
 *     it under the terms of the GNU General Public License as published by
 *     the Free Software Foundation, either version 3 of the License, or
 *     (at your option) any later version.
 * 
 *     This program is distributed in the hope that it will be useful,
 *     but WITHOUT ANY WARRANTY; without even the implied warranty of
 *     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *     GNU General Public License for more details.
 * 
 *     You should have received a copy of the GNU General Public License
 *     along with this program.  If not, see <http://www.gnu.org/licenses/>.
 *
 *
 * Credits:
 *
 * This library is a port of the PEAR Structures_BibTex parser written
 * in PHP (http://pear.php.net/package/Structures_BibTex).
 *
 * In order to make porting the parser into javascript easier, I have made
 * use of many phpjs functions, which are distributed here under the MIT License:
 *
 * 
 * More info at: http://kevin.vanzonneveld.net/techblog/category/php2js
 * 
 * php.js is copyright 2008 Kevin van Zonneveld.
 * 
 * Portions copyright Ates Goral (http://magnetiq.com), Legaev Andrey,
 * _argos, Jonas Raoni Soares Silva (http://www.jsfromhell.com),
 * Webtoolkit.info (http://www.webtoolkit.info/), Carlos R. L. Rodrigues, Ash
 * Searle (http://hexmen.com/blog/), Tyler Akins (http://rumkin.com), mdsjack
 * (http://www.mdsjack.bo.it), Alexander Ermolaev
 * (http://snippets.dzone.com/user/AlexanderErmolaev), Andrea Giammarchi
 * (http://webreflection.blogspot.com), Bayron Guevara, Cord, David, Karol
 * Kowalski, Leslie Hoare, Lincoln Ramsay, Mick@el, Nick Callen, Peter-Paul
 * Koch (http://www.quirksmode.org/js/beat.html), Philippe Baumann, Steve
 * Clay, booeyOH
 * 
 * Licensed under the MIT (MIT-LICENSE.txt) license.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a
 * copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included
 * in all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
 * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
 * IN NO EVENT SHALL KEVIN VAN ZONNEVELD BE LIABLE FOR ANY CLAIM, DAMAGES 
 * OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,
 * ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR 
 * OTHER DEALINGS IN THE SOFTWARE.
 *
 *
 * Synopsis:
 * ----------
 *
 * This class provides the following functionality:
 *    1. Parse BibTex into a logical data javascript data structure.
 *    2. Output parsed BibTex entries as HTML, RTF, or BibTex.
 *
 *  
 * The following usage instructions have been copyed and adapted from the PHP instructions located
 * at http://pear.php.net/manual/en/package.structures.structures-bibtex.intro.php
 * Introduction
 * --------------
 * Overview
 * ----------
 * This package provides methods to access information stored in a BibTex
 * file. During parsing it is possible to let the data be validated. In
 * addition. the creation of BibTex Strings as well as RTF Strings is also
 * supported. A few examples
 * 
 * Example 1. Loading a BibTex File and printing the parsed array
 * <script src="BibTex.js"></script>
 * <script>
 * bibtex = new BibTex();
 * bibtex.content = content; // the bibtex content as a string
 * 
 * bibtex->parse();
 * alert(print_r($bibtex->data,true));
 * </script>
 * 
 * 
 * Options
 * --------
 * Options can be set either in the constructor or with the method
 * setOption(). When setting in the constructor the options are given in an
 * associative array. The options are:
 * 
 * 	-	stripDelimiter (default: true) Stripping the delimiter surrounding the entries. 
 * 	-	validate (default: true) Validation while parsing. 
 * 	-	unwrap (default: false) Unwrapping entries while parsing. 
 * 	-	wordWrapWidth (default: false) If set to a number higher one
 * 	    that the entries are wrapped after that amount of characters. 
 * 	-	wordWrapBreak (default: \n) String used to break the line (attached to the line). 
 * 	-	wordWrapCut (default: 0) If set to zero the line will we
 * 	    wrapped at the next possible space, if set to one the line will be
 * 	    wrapped exactly after the given amount of characters. 
 * 	-	removeCurlyBraces (default: false) If set to true Curly Braces will be removed. 
 * 
 * Example of setting options in the constructor:
 * 
 * Example 2. Setting options in the constructor
 * bibtex = new BibTex({'validate':false, 'unwrap':true});
 * 
 * 
 * Example of setting options using the method setOption():
 * 
 * Example 62-3. Setting options using setOption
 * bibtex = new BibTex();
 * bibtex.setOption('validate', false);
 * bibtex.setOption('unwrap', true);
 * 
 * Stored Data
 * ------------
 * The data is stored in the class variable data. This is a a list where
 * each entry is a hash table representing one bibtex-entry. The keys of
 * the hash table correspond to the keys used in bibtex and the values are
 * the corresponding values. Some of these keys are:
 * 
 * 	-	cite - The key used in a LaTeX source to do the citing. 
 * 	-	entryType - The type of the entry, like techreport, book and so on. 
 * 	-	author - One or more authors of the entry. This entry is also a
 * 	    list with hash tables representing the authors as entries. The
 * 	    author has table is explained later. 
 * 	-	title - Title of the entry. 
 * 
 * Author
 * ------
 * As described before the authors are stored in a list. Every entry
 * representing one author as a has table. The hash table consits of four
 * keys: first, von, last and jr. The keys are explained in the following
 * list:
 * 
 * 	-	first - The first name of the author. 
 * 	-	von - Some names have a 'von' part in their name. This is usually a sign of nobleness. 
 * 	-	last - The last name of the author. 
 * 	-	jr - Sometimes a author is the son of his father and has the
 * 	    same name, then the value would be jr. The same is true for the
 * 	    value sen but vice versa. 
 * 
 * Adding an entry
 * ----------------
 * To add an entry simply create a hash table with the needed keys and
 * values and call the method addEntry().
 * Example 4. Adding an entry
 * bibtex                         = new BibTex();
 * var addarray                   = {};
 * addarray['entryType']          = 'Article';
 * addarray['cite']               = 'art2';
 * addarray['title']              = 'Titel of the Article';
 * addarray['author'] = [];
 * addarray['author'][0]['first'] = 'John';
 * addarray['author'][0]['last']  = 'Doe';
 * addarray['author'][1]['first'] = 'Jane';
 * addarray['author'][1]['last']  = 'Doe';
 * bibtex.addEntry(addarray);
 */
function array(){return Array.prototype.slice.call(arguments);}function array_key_exists(key,search){if(!search||(search.constructor!==Array&&search.constructor!==Object)){return false;}return key in search;}function array_keys(input,search_value,strict){var tmp_arr=new Array(),strict=!!strict,include=true,cnt=0;for(key in input){include=true;if(search_value!=undefined){if(strict&&input[key]!==search_value){include=false;}else{if(input[key]!=search_value){include=false;}}}if(include){tmp_arr[cnt]=key;cnt++;}}return tmp_arr;}function in_array(needle,haystack,strict){var found=false,key,strict=!!strict;for(key in haystack){if((strict&&haystack[key]===needle)||(!strict&&haystack[key]==needle)){found=true;break;}}return found;}function sizeof(mixed_var,mode){return count(mixed_var,mode);}function count(mixed_var,mode){var key,cnt=0;if(mode=="COUNT_RECURSIVE"){mode=1;}if(mode!=1){mode=0;}for(key in mixed_var){cnt++;if(mode==1&&mixed_var[key]&&(mixed_var[key].constructor===Array||mixed_var[key].constructor===Object)){cnt+=count(mixed_var[key],1);}}return cnt;}function explode(delimiter,string,limit){var emptyArray={0:""};if(arguments.length<2||typeof arguments[0]=="undefined"||typeof arguments[1]=="undefined"){return null;}if(delimiter===""||delimiter===false||delimiter===null){return false;}if(typeof delimiter=="function"||typeof delimiter=="object"||typeof string=="function"||typeof string=="object"){return emptyArray;}if(delimiter===true){delimiter="1";}if(!limit){return string.toString().split(delimiter.toString());}else{var splitted=string.toString().split(delimiter.toString());var partA=splitted.splice(0,limit-1);var partB=splitted.join(delimiter.toString());partA.push(partB);return partA;}}function implode(glue,pieces){return((pieces instanceof Array)?pieces.join(glue):pieces);}function join(glue,pieces){return implode(glue,pieces);}function split(delimiter,string){return explode(delimiter,string);}function str_replace(search,replace,subject){var f=search,r=replace,s=subject;var ra=is_array(r),sa=is_array(s),f=[].concat(f),r=[].concat(r),i=(s=[].concat(s)).length;while(j=0,i--){while(s[i]=s[i].split(f[j]).join(ra?r[j]||"":r[0]),++j in f){}}return sa?s:s[0];}function strlen(string){return(""+string).length;}function strpos(haystack,needle,offset){var i=haystack.indexOf(needle,offset);return i>=0?i:false;}function strrpos(haystack,needle,offset){var i=haystack.lastIndexOf(needle,offset);return i>=0?i:false;}function strtolower(str){return str.toLowerCase();}function strtoupper(str){return str.toUpperCase();}function substr(f_string,f_start,f_length){if(f_start<0){f_start+=f_string.length;}if(f_length==undefined){f_length=f_string.length;}else{if(f_length<0){f_length+=f_string.length;}else{f_length+=f_start;}}if(f_length<f_start){f_length=f_start;}return f_string.substring(f_start,f_length);}function trim(str,charlist){if(!str){return"";}var whitespace;if(!charlist){whitespace=" \n\r\t\f\x0b\xa0\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u2028\u2029\u3000";}else{whitespace=charlist.replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^\:])/g,"$1");}for(var i=0;i<str.length;i++){if(whitespace.indexOf(str.charAt(i))===-1){str=str.substring(i);break;}}for(i=str.length-1;i>=0;i--){if(whitespace.indexOf(str.charAt(i))===-1){str=str.substring(0,i+1);break;}}return whitespace.indexOf(str.charAt(0))===-1?str:"";}function wordwrap(str,int_width,str_break,cut){var m=int_width,b=str_break,c=cut;var i,j,l,s,r;if(m<1){return str;}for(i=-1,l=(r=str.split("\n")).length;++i<l;r[i]+=s){for(s=r[i],r[i]="";s.length>m;r[i]+=s.slice(0,j)+((s=s.slice(j)).length?b:"")){j=c==2||(j=s.slice(0,m+1).match(/\S*(\s)?$/))[1]?m:j.input.length-j[0].length||c==1&&m||j.input.length+(j=s.slice(m).match(/^\S*/)).input.length;}}return r.join("\n");}function is_string(mixed_var){return(typeof(mixed_var)=="string");}function ord(string){return string.charCodeAt(0);}function array_unique(array){var p,i,j,tmp_arr=array;for(i=tmp_arr.length;i;){for(p=--i;p>0;){if(tmp_arr[i]===tmp_arr[--p]){for(j=p;--p&&tmp_arr[i]===tmp_arr[p];){}i-=tmp_arr.splice(p+1,j-p).length;}}}return tmp_arr;}function print_r(array,return_val){var output="",pad_char=" ",pad_val=4;var formatArray=function(obj,cur_depth,pad_val,pad_char){if(cur_depth>0){cur_depth++;}var base_pad=repeat_char(pad_val*cur_depth,pad_char);var thick_pad=repeat_char(pad_val*(cur_depth+1),pad_char);var str="";if(obj instanceof Array||obj instanceof Object){str+="Array\n"+base_pad+"(\n";for(var key in obj){if(obj[key] instanceof Array||obj[key] instanceof Object){str+=thick_pad+"["+key+"] => "+formatArray(obj[key],cur_depth+1,pad_val,pad_char);}else{str+=thick_pad+"["+key+"] => "+obj[key]+"\n";}}str+=base_pad+")\n";}else{str=obj.toString();}return str;};var repeat_char=function(len,pad_char){var str="";for(var i=0;i<len;i++){str+=pad_char;}return str;};output=formatArray(array,0,pad_val,pad_char);if(return_val!==true){document.write("<pre>"+output+"</pre>");return true;}else{return output;}}function is_array(mixed_var){return(mixed_var instanceof Array);}function BibTex(options){if(typeof options=="undefined"){options={};}this.data;this.content;this._delimiters;this.warnings;this._options;this.rtfstring;this.htmlstring;this.allowedEntryTypes;this.authorstring;this._delimiters={'"':'"',"{":"}"};this.data=[];this.content="";this.warnings=[];this._options={stripDelimiter:true,validate:true,unwrap:false,wordWrapWidth:false,wordWrapBreak:"\n",wordWrapCut:0,removeCurlyBraces:false,extractAuthors:true};for(option in options){test=this.setOption(option,options[option]);if(this.isError(test)){}}this.rtfstring='AUTHORS, "{\b TITLE}", {i JOURNAL}, YEAR';this.htmlstring='AUTHORS, "<strong>TITLE</strong>", <em>JOURNAL</em>, YEAR<br />';this.allowedEntryTypes=array("article","book","booklet","confernce","inbook","incollection","inproceedings","manual","masterthesis","misc","phdthesis","proceedings","techreport","unpublished");this.authorstring="VON LAST, JR, FIRST";}BibTex.prototype={setOption:function(option,value){ret=true;if(array_key_exists(option,this._options)){this._options[option]=value;}else{ret=this.raiseError("Unknown option "+option);}return ret;},parse:function(){this.warnings=[];this.data=[];var valid=true;var open=0;var entry=false;var charv="";var lastchar="";var buffer="";for(var i=0;i<strlen(this.content);i++){charv=substr(this.content,i,1);if((0!=open)&&("@"==charv)){if(!this._checkAt(buffer)){this._generateWarning("WARNING_MISSING_END_BRACE","",buffer);charv="}";i--;}}if((0==open)&&("@"==charv)){entry=true;}else{if(entry&&("{"==charv)&&("\\"!=lastchar)){open++;}else{if(entry&&("}"==charv)&&("\\"!=lastchar)){open--;if(open<0){valid=false;}if(0==open){entry=false;var entrydata=this._parseEntry(buffer);if(!entrydata){}else{this.data[this.data.length]=entrydata;}buffer="";}}}}if(entry){buffer+=charv;}lastchar=charv;}if(1==open){entrydata=this._parseEntry(buffer);if(!entrydata){valid=false;}else{this.data[this.data.length]=entrydata;buffer="";open=0;}}if(0!=open){valid=false;}if(this._options.validate){cites=[];for(var i=0;i<this.data.length;i++){cites[cites.length]=this.data[i]["cite"];}unique=array_unique(cites);if(cites.length!=sizeof(unique)){notuniques=[];for(var i=0;i<cites.length;i++){if(""==unique[i]){notuniques[notuniques.length]=cites[i];}}this._generateWarning("WARNING_MULTIPLE_ENTRIES",implode(",",notuniques));}}if(valid){this.content="";return true;}else{return this.raiseError("Unbalanced parenthesis");}},_parseEntry:function(entry){var entrycopy="";if(this._options.validate){entrycopy=entry;}var ret={};if("@string"==strtolower(substr(entry,0,7))){if(this._options.validate){this._generateWarning("STRING_ENTRY_NOT_YET_SUPPORTED","",entry+"}");}}else{if("@preamble"==strtolower(substr(entry,0,9))){if(this._options.validate){this._generateWarning("PREAMBLE_ENTRY_NOT_YET_SUPPORTED","",entry+"}");}}else{while(strrpos(entry,"=")!==false){position=strrpos(entry,"=");proceed=true;if(substr(entry,position-1,1)=="\\"){proceed=false;}if(proceed){proceed=this._checkEqualSign(entry,position);}while(!proceed){substring=substr(entry,0,position);position=strrpos(substring,"=");proceed=true;if(substr(entry,position-1,1)=="\\"){proceed=false;}if(proceed){proceed=this._checkEqualSign(entry,position);}}value=trim(substr(entry,position+1));entry=substr(entry,0,position);if(","==substr(value,strlen(value)-1,1)){value=substr(value,0,-1);}if(this._options.validate){this._validateValue(value,entrycopy);}if(this._options.stripDelimiter){value=this._stripDelimiter(value);}if(this._options.unwrap){value=this._unwrap(value);}if(this._options.removeCurlyBraces){value=this._removeCurlyBraces(value);}position=strrpos(entry,",");field=strtolower(trim(substr(entry,position+1)));ret[field]=value;entry=substr(entry,0,position);}var arr=entry.split("{");ret.cite=trim(arr[1]);ret.entryType=strtolower(trim(arr[0]));if("@"==ret.entryType.substring(0,1)){ret.entryType=substr(ret.entryType,1);}if(this._options.validate){if(!this._checkAllowedEntryType(ret.entryType)){this._generateWarning("WARNING_NOT_ALLOWED_ENTRY_TYPE",ret.entryType,entry+"}");}}if(in_array("author",array_keys(ret))&&this._options.extractAuthors){ret.author=this._extractAuthors(ret.author);}}}return ret;},_checkEqualSign:function(entry,position){var ret=true;var length=strlen(entry);var open=0;for(var i=length-1;i>=position;i--){precedingchar=substr(entry,i-1,1);charv=substr(entry,i,1);if(("{"==charv)&&("\\"!=precedingchar)){open++;}if(("}"==charv)&&("\\"!=precedingchar)){open--;}}if(0!=open){ret=false;}if(ret){entrycopy=trim(entry);lastchar=substr(entrycopy,strlen(entrycopy)-1,1);if(","==lastchar){lastchar=substr(entrycopy,strlen(entrycopy)-2,1);}if('"'==lastchar){ret=false;found=0;for(var i=length;i>=position;i--){precedingchar=substr(entry,i-1,1);charv=substr(entry,i,1);if(('"'==charv)&&("\\"!=precedingchar)){found++;}if(2==found){ret=true;break;}}}}return ret;},_checkAllowedEntryType:function(entry){return in_array(entry,this.allowedEntryTypes);},_checkAt:function(entry){var ret=false;var opening=array_keys(this._delimiters);var closing=array_values(this._delimiters);if(strrpos(entry,"=")!==false){position=strrpos(entry,"=");proceed=true;if(substr(entry,position-1,1)=="\\"){proceed=false;}while(!proceed){substring=substr(entry,0,position);position=strrpos(substring,"=");proceed=true;if(substr(entry,position-1,1)=="\\"){proceed=false;}}value=trim(substr(entry,position+1));open=0;charv="";lastchar="";for(var i=0;i<strlen(value);i++){charv=substr(this.content,i,1);if(in_array(charv,opening)&&("\\"!=lastchar)){open++;}else{if(in_array(charv,closing)&&("\\"!=lastchar)){open--;}}lastchar=charv;}if(open>0){ret=true;}}return ret;},_stripDelimiter:function(entry){var beginningdels=array_keys(this._delimiters);var ength=strlen(entry);var firstchar=substr(entry,0,1);var lastchar=substr(entry,-1,1);while(in_array(firstchar,beginningdels)){if(lastchar==this._delimiters[firstchar]){entry=substr(entry,1,-1);}else{break;}firstchar=substr(entry,0,1);lastchar=substr(entry,-1,1);}return entry;},_unwrap:function(entry){entry=entry.replace(/\s+/," ");return trim(entry);},_wordwrap:function(entry){if((""!=entry)&&(is_string(entry))){entry=wordwrap(entry,this._options.wordWrapWidth,this._options.wordWrapBreak,this._options.wordWrapCut);}return entry;},_extractAuthors:function(entry){entry=this._unwrap(entry);var authorarray=entry.split(" and ");for(var i=0;i<authorarray.length;i++){var author=trim(authorarray[i]);var first="";var von="";var last="";var jr="";if(strpos(author,",")===false){var tmparray=author.split(" |~");var size=tmparray.length;if(1==size){last=tmparray[0];}else{if(2==size){first=tmparray[0];last=tmparray[1];}else{var invon=false;var inlast=false;for(var j=0;j<(size-1);j++){if(inlast){last+=" "+tmparray[j];}else{if(invon){casev=this._determineCase(tmparray[j]);if(this.isError(casev)){}else{if((0==casev)||(-1==casev)){islast=true;for(var k=(j+1);k<(size-1);k++){futurecase=this._determineCase(tmparray[k]);if(this.isError(casev)){}else{if(0==futurecase){islast=false;}}}if(islast){inlast=true;if(-1==casev){last+=" "+tmparray[j];}else{von+=" "+tmparray[j];}}else{von+=" "+tmparray[j];}}else{von+=" "+tmparray[j];}}}else{var casev=this._determineCase(tmparray[j]);if(this.isError(casev)){}else{if(0==casev){invon=true;von+=" "+tmparray[j];}else{first+=" "+tmparray[j];}}}}}last+=" "+tmparray[size-1];}}}else{var tmparray=[];tmparray=explode(",",author);vonlastarray=[];vonlastarray=explode(" ",tmparray[0]);size=sizeof(vonlastarray);if(1==size){last=vonlastarray[0];}else{inlast=false;for(var j=0;j<(size-1);j++){if(inlast){last+=" "+vonlastarray[j];}else{if(0!=(this._determineCase(vonlastarray[j]))){islast=true;for(var k=(j+1);k<(size-1);k++){this._determineCase(vonlastarray[k]);casev=this._determineCase(vonlastarray[k]);if(this.isError(casev)){}else{if(0==casev){islast=false;}}}if(islast){inlast=true;last+=" "+vonlastarray[j];}else{von+=" "+vonlastarray[j];}}else{von+=" "+vonlastarray[j];}}}last+=" "+vonlastarray[size-1];}if(3==tmparray.length){jr=tmparray[1];}first=tmparray[tmparray.length-1];}authorarray[i]={first:trim(first),von:trim(von),last:trim(last),jr:trim(jr)};}return authorarray;},_determineCase:function(word){var ret=-1;var trimmedword=trim(word);if(is_string(word)&&(strlen(trimmedword)>0)){var i=0;var found=false;var openbrace=0;while(!found&&(i<=strlen(word))){var letter=substr(trimmedword,i,1);var ordv=ord(letter);if(ordv==123){openbrace++;}if(ordv==125){openbrace--;}if((ordv>=65)&&(ordv<=90)&&(0==openbrace)){ret=1;found=true;}else{if((ordv>=97)&&(ordv<=122)&&(0==openbrace)){ret=0;found=true;}else{i++;}}}}else{ret=this.raiseError("Could not determine case on word: "+word);}return ret;},isError:function(obj){return(typeof(obj)=="Object"&&obj.isError==1);},_validateValue:function(entry,wholeentry){if(entry.match(/^{.*@.*}/)){this._generateWarning("WARNING_AT_IN_BRACES",entry,wholeentry);}if(entry.match(/^\".*\\".*\"/)){this._generateWarning("WARNING_ESCAPED_DOUBLE_QUOTE_INSIDE_DOUBLE_QUOTES",entry,wholeentry);}var open=0;var lastchar="";var charv="";for(var i=0;i<strlen(entry);i++){charv=substr(entry,i,1);if(("{"==charv)&&("\\"!=lastchar)){open++;}if(("}"==charv)&&("\\"!=lastchar)){open--;}lastchar=charv;}if(0!=open){this._generateWarning("WARNING_UNBALANCED_AMOUNT_OF_BRACES",entry,wholeentry);}},_removeCurlyBraces:function(value){var beginningdels=array_keys(this._delimiters);var firstchar=substr(value,0,1);var lastchar=substr(value,-1,1);var begin="";var end="";while(in_array(firstchar,beginningdels)){if(lastchar==this._delimiters[firstchar]){begin+=firstchar;end+=lastchar;value=substr(value,1,-1);}else{break;}firstchar=substr(value,0,1);lastchar=substr(value,-1,1);}var pattern="/([^\\\\]){(+*?[^\\\\])}/";var replacement="12";value=value.replace(/([^\\\\])\{(.*?[^\\\\])\}/,replacement);value=begin+value+end;return value;},_generateWarning:function(type,entry,wholeentry){if(typeof wholeentry=="undefined"){wholeentry="";}var warning={};warning.warning=type;warning.entry=entry;warning.wholeentry=wholeentry;this.warnings[this.warnings.length]=warning;},clearWarnings:function(){this.warnings=array();},hasWarning:function(){if(sizeof(this.warnings)>0){return true;}else{return false;}},amount:function(){return sizeof(this.data);},_formatAuthor:function(array){if(!array_key_exists("von",array)){array.von="";}else{array.von=trim(array.von);}if(!array_key_exists("last",array)){array.last="";}else{array.last=trim(array.last);}if(!array_key_exists("jr",array)){array.jr="";}else{array.jr=trim(array.jr);}if(!array_key_exists("first",array)){array.first="";}else{array.first=trim(array.first);}ret=this.authorstring;ret=str_replace("VON",array.von,ret);ret=str_replace("LAST",array.last,ret);ret=str_replace("JR",array.jr,ret);ret=str_replace("FIRST",array.first,ret);return trim(ret);},bibTex:function(){var bibtex="";for(var i=0;i<this.data.length;i++){var entry=this.data[i];bibtex+="@"+strtolower(entry.entryType)+" { "+entry.cite+",\n";for(key in entry){var val=entry[key];if(this._options.wordWrapWidth>0){val=this._wordWrap(val);}if(!in_array(key,array("cite","entryType","author"))){bibtex+="\t"+key+" = {"+val+"},\n";}}if(array_key_exists("author",entry)){if(this._options.extractAuthors){tmparray=[];for(j in entry.author){var authorentry=entry.author[j];tmparray[tmparray.length]=this._formatAuthor(authorentry);}author=join(" and ",tmparray);}else{author=entry.author;}}else{author="";}bibtex+="\tauthor = {"+author+"}\n";bibtex+="}\n\n";}return bibtex;},addEntry:function(newentry){this.data[this.data.length]=newentry;},getStatistic:function(){var ret=array();for(var i=0;i<this.data.length;i++){var entry=this.data[i];if(array_key_exists(entry.entryType,ret)){ret[entry.entryType]++;}else{ret[entry.entryType]=1;}}return ret;},rtf:function(){var ret="{\\rtf\n";for(var i=0;i<this.data.length;i++){var entry=this.data[i];line=this.rtfstring;title="";journal="";year="";authors="";if(array_key_exists("title",entry)){title=this._unwrap(entry.title);}if(array_key_exists("journal",entry)){journal=this._unwrap(entry.journal);}if(array_key_exists("year",entry)){year=this._unwrap(entry.year);}if(array_key_exists("author",entry)){if(this._options.extractAuthors){tmparray=[];for(var j in entry.author){var authorentry=entry.author[j];tmparray[tmparray.length]=this._formatAuthor(authorentry);}authors=join(", ",tmparray);}else{authors=entry.author;}}if((""!=title)||(""!=journal)||(""!=year)||(""!=authors)){line=str_replace("TITLE",title,line);line=str_replace("JOURNAL",journal,line);line=str_replace("YEAR",year,line);line=str_replace("AUTHORS",authors,line);line+="\n\\par\n";ret+=line;}else{this._generateWarning("WARNING_LINE_WAS_NOT_CONVERTED","",print_r(entry,1));}}ret+="}";return ret;},html:function(min,max){if(typeof min=="undefined"){min=0;}if(typeof max=="undefined"){max=this.data.length;}var ret="<p>\n";for(var i=min;i<max;i++){var entry=this.data[i];var line=this.htmlstring;var title="";var journal="";var year="";var authors="";if(array_key_exists("title",entry)){title=this._unwrap(entry.title);}if(array_key_exists("journal",entry)){journal=this._unwrap(entry.journal);}if(array_key_exists("year",entry)){year=this._unwrap(entry.year);}if(array_key_exists("author",entry)){if(this._options.extractAuthors){tmparray=[];for(j in entry.author){var authorentry=entry.author[j];tmparray[tmparray.length]=this._formatAuthor(authorentry);}authors=join(", ",tmparray);}else{authors=entry.author;}}if((""!=title)||(""!=journal)||(""!=year)||(""!=authors)){line=str_replace("TITLE",title,line);line=str_replace("JOURNAL",journal,line);line=str_replace("YEAR",year,line);line=str_replace("AUTHORS",authors,line);line+="\n";ret+=line;}else{this._generateWarning("WARNING_LINE_WAS_NOT_CONVERTED","",print_r(entry,1));}}ret+="</p>\n";return ret;}};
/*! DataTables 1.10.10
 * ©2008-2015 SpryMedia Ltd - datatables.net/license
 */
(function(factory){if(typeof define==="function"&&define.amd){define(["jquery"],function($){return factory($,window,document);});}else{if(typeof exports==="object"){module.exports=function(root,$){if(!root){root=window;}if(!$){$=typeof window!=="undefined"?require("jquery"):require("jquery")(root);}return factory($,root,root.document);};}else{factory(jQuery,window,document);}}}(function($,window,document,undefined){var DataTable;var _ext;var _Api;var _api_register;var _api_registerPlural;var _re_dic={};var _re_new_lines=/[\r\n]/g;var _re_html=/<.*?>/g;var _re_date_start=/^[\w\+\-]/;var _re_date_end=/[\w\+\-]$/;var _re_escape_regex=new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^","-"].join("|\\")+")","g");var _re_formatted_numeric=/[',$£€¥%\u2009\u202F\u20BD\u20a9\u20BArfk]/gi;var _empty=function(d){return !d||d===true||d==="-"?true:false;};var _intVal=function(s){var integer=parseInt(s,10);return !isNaN(integer)&&isFinite(s)?integer:null;};var _numToDecimal=function(num,decimalPoint){if(!_re_dic[decimalPoint]){_re_dic[decimalPoint]=new RegExp(_fnEscapeRegex(decimalPoint),"g");}return typeof num==="string"&&decimalPoint!=="."?num.replace(/\./g,"").replace(_re_dic[decimalPoint],"."):num;};var _isNumber=function(d,decimalPoint,formatted){var strType=typeof d==="string";if(_empty(d)){return true;}if(decimalPoint&&strType){d=_numToDecimal(d,decimalPoint);}if(formatted&&strType){d=d.replace(_re_formatted_numeric,"");}return !isNaN(parseFloat(d))&&isFinite(d);};var _isHtml=function(d){return _empty(d)||typeof d==="string";};var _htmlNumeric=function(d,decimalPoint,formatted){if(_empty(d)){return true;}var html=_isHtml(d);return !html?null:_isNumber(_stripHtml(d),decimalPoint,formatted)?true:null;};var _pluck=function(a,prop,prop2){var out=[];var i=0,ien=a.length;if(prop2!==undefined){for(;i<ien;i++){if(a[i]&&a[i][prop]){out.push(a[i][prop][prop2]);}}}else{for(;i<ien;i++){if(a[i]){out.push(a[i][prop]);}}}return out;};var _pluck_order=function(a,order,prop,prop2){var out=[];var i=0,ien=order.length;if(prop2!==undefined){for(;i<ien;i++){if(a[order[i]][prop]){out.push(a[order[i]][prop][prop2]);}}}else{for(;i<ien;i++){out.push(a[order[i]][prop]);}}return out;};var _range=function(len,start){var out=[];var end;if(start===undefined){start=0;end=len;}else{end=start;start=len;}for(var i=start;i<end;i++){out.push(i);}return out;};var _removeEmpty=function(a){var out=[];for(var i=0,ien=a.length;i<ien;i++){if(a[i]){out.push(a[i]);}}return out;};var _stripHtml=function(d){return d.replace(_re_html,"");};var _unique=function(src){var out=[],val,i,ien=src.length,j,k=0;again:for(i=0;i<ien;i++){val=src[i];for(j=0;j<k;j++){if(out[j]===val){continue again;}}out.push(val);k++;}return out;};function _fnHungarianMap(o){var hungarian="a aa ai ao as b fn i m o s ",match,newKey,map={};$.each(o,function(key,val){match=key.match(/^([^A-Z]+?)([A-Z])/);if(match&&hungarian.indexOf(match[1]+" ")!==-1){newKey=key.replace(match[0],match[2].toLowerCase());map[newKey]=key;if(match[1]==="o"){_fnHungarianMap(o[key]);}}});o._hungarianMap=map;}function _fnCamelToHungarian(src,user,force){if(!src._hungarianMap){_fnHungarianMap(src);}var hungarianKey;$.each(user,function(key,val){hungarianKey=src._hungarianMap[key];if(hungarianKey!==undefined&&(force||user[hungarianKey]===undefined)){if(hungarianKey.charAt(0)==="o"){if(!user[hungarianKey]){user[hungarianKey]={};}$.extend(true,user[hungarianKey],user[key]);_fnCamelToHungarian(src[hungarianKey],user[hungarianKey],force);}else{user[hungarianKey]=user[key];}}});}function _fnLanguageCompat(lang){var defaults=DataTable.defaults.oLanguage;var zeroRecords=lang.sZeroRecords;if(!lang.sEmptyTable&&zeroRecords&&defaults.sEmptyTable==="No data available in table"){_fnMap(lang,lang,"sZeroRecords","sEmptyTable");}if(!lang.sLoadingRecords&&zeroRecords&&defaults.sLoadingRecords==="Loading..."){_fnMap(lang,lang,"sZeroRecords","sLoadingRecords");}if(lang.sInfoThousands){lang.sThousands=lang.sInfoThousands;}var decimal=lang.sDecimal;if(decimal){_addNumericSort(decimal);}}var _fnCompatMap=function(o,knew,old){if(o[knew]!==undefined){o[old]=o[knew];}};function _fnCompatOpts(init){_fnCompatMap(init,"ordering","bSort");_fnCompatMap(init,"orderMulti","bSortMulti");_fnCompatMap(init,"orderClasses","bSortClasses");_fnCompatMap(init,"orderCellsTop","bSortCellsTop");_fnCompatMap(init,"order","aaSorting");_fnCompatMap(init,"orderFixed","aaSortingFixed");_fnCompatMap(init,"paging","bPaginate");_fnCompatMap(init,"pagingType","sPaginationType");_fnCompatMap(init,"pageLength","iDisplayLength");_fnCompatMap(init,"searching","bFilter");if(typeof init.sScrollX==="boolean"){init.sScrollX=init.sScrollX?"100%":"";}if(typeof init.scrollX==="boolean"){init.scrollX=init.scrollX?"100%":"";}var searchCols=init.aoSearchCols;if(searchCols){for(var i=0,ien=searchCols.length;i<ien;i++){if(searchCols[i]){_fnCamelToHungarian(DataTable.models.oSearch,searchCols[i]);}}}}function _fnCompatCols(init){_fnCompatMap(init,"orderable","bSortable");_fnCompatMap(init,"orderData","aDataSort");_fnCompatMap(init,"orderSequence","asSorting");_fnCompatMap(init,"orderDataType","sortDataType");var dataSort=init.aDataSort;if(dataSort&&!$.isArray(dataSort)){init.aDataSort=[dataSort];}}function _fnBrowserDetect(settings){if(!DataTable.__browser){var browser={};DataTable.__browser=browser;var n=$("<div/>").css({position:"fixed",top:0,left:0,height:1,width:1,overflow:"hidden"}).append($("<div/>").css({position:"absolute",top:1,left:1,width:100,overflow:"scroll"}).append($("<div/>").css({width:"100%",height:10}))).appendTo("body");var outer=n.children();var inner=outer.children();browser.barWidth=outer[0].offsetWidth-outer[0].clientWidth;browser.bScrollOversize=inner[0].offsetWidth===100&&outer[0].clientWidth!==100;browser.bScrollbarLeft=Math.round(inner.offset().left)!==1;browser.bBounding=n[0].getBoundingClientRect().width?true:false;n.remove();}$.extend(settings.oBrowser,DataTable.__browser);settings.oScroll.iBarWidth=DataTable.__browser.barWidth;}function _fnReduce(that,fn,init,start,end,inc){var i=start,value,isSet=false;if(init!==undefined){value=init;isSet=true;}while(i!==end){if(!that.hasOwnProperty(i)){continue;}value=isSet?fn(value,that[i],i,that):that[i];isSet=true;i+=inc;}return value;}function _fnAddColumn(oSettings,nTh){var oDefaults=DataTable.defaults.column;var iCol=oSettings.aoColumns.length;var oCol=$.extend({},DataTable.models.oColumn,oDefaults,{nTh:nTh?nTh:document.createElement("th"),sTitle:oDefaults.sTitle?oDefaults.sTitle:nTh?nTh.innerHTML:"",aDataSort:oDefaults.aDataSort?oDefaults.aDataSort:[iCol],mData:oDefaults.mData?oDefaults.mData:iCol,idx:iCol});oSettings.aoColumns.push(oCol);var searchCols=oSettings.aoPreSearchCols;searchCols[iCol]=$.extend({},DataTable.models.oSearch,searchCols[iCol]);_fnColumnOptions(oSettings,iCol,$(nTh).data());}function _fnColumnOptions(oSettings,iCol,oOptions){var oCol=oSettings.aoColumns[iCol];var oClasses=oSettings.oClasses;var th=$(oCol.nTh);if(!oCol.sWidthOrig){oCol.sWidthOrig=th.attr("width")||null;var t=(th.attr("style")||"").match(/width:\s*(\d+[pxem%]+)/);if(t){oCol.sWidthOrig=t[1];}}if(oOptions!==undefined&&oOptions!==null){_fnCompatCols(oOptions);_fnCamelToHungarian(DataTable.defaults.column,oOptions);if(oOptions.mDataProp!==undefined&&!oOptions.mData){oOptions.mData=oOptions.mDataProp;}if(oOptions.sType){oCol._sManualType=oOptions.sType;}if(oOptions.className&&!oOptions.sClass){oOptions.sClass=oOptions.className;}$.extend(oCol,oOptions);_fnMap(oCol,oOptions,"sWidth","sWidthOrig");if(oOptions.iDataSort!==undefined){oCol.aDataSort=[oOptions.iDataSort];}_fnMap(oCol,oOptions,"aDataSort");}var mDataSrc=oCol.mData;var mData=_fnGetObjectDataFn(mDataSrc);var mRender=oCol.mRender?_fnGetObjectDataFn(oCol.mRender):null;var attrTest=function(src){return typeof src==="string"&&src.indexOf("@")!==-1;};oCol._bAttrSrc=$.isPlainObject(mDataSrc)&&(attrTest(mDataSrc.sort)||attrTest(mDataSrc.type)||attrTest(mDataSrc.filter));oCol.fnGetData=function(rowData,type,meta){var innerData=mData(rowData,type,undefined,meta);return mRender&&type?mRender(innerData,type,rowData,meta):innerData;};oCol.fnSetData=function(rowData,val,meta){return _fnSetObjectDataFn(mDataSrc)(rowData,val,meta);};if(typeof mDataSrc!=="number"){oSettings._rowReadObject=true;}if(!oSettings.oFeatures.bSort){oCol.bSortable=false;th.addClass(oClasses.sSortableNone);}var bAsc=$.inArray("asc",oCol.asSorting)!==-1;var bDesc=$.inArray("desc",oCol.asSorting)!==-1;if(!oCol.bSortable||(!bAsc&&!bDesc)){oCol.sSortingClass=oClasses.sSortableNone;oCol.sSortingClassJUI="";}else{if(bAsc&&!bDesc){oCol.sSortingClass=oClasses.sSortableAsc;oCol.sSortingClassJUI=oClasses.sSortJUIAscAllowed;}else{if(!bAsc&&bDesc){oCol.sSortingClass=oClasses.sSortableDesc;oCol.sSortingClassJUI=oClasses.sSortJUIDescAllowed;}else{oCol.sSortingClass=oClasses.sSortable;oCol.sSortingClassJUI=oClasses.sSortJUI;}}}}function _fnAdjustColumnSizing(settings){if(settings.oFeatures.bAutoWidth!==false){var columns=settings.aoColumns;_fnCalculateColumnWidths(settings);for(var i=0,iLen=columns.length;i<iLen;i++){columns[i].nTh.style.width=columns[i].sWidth;}}var scroll=settings.oScroll;if(scroll.sY!==""||scroll.sX!==""){_fnScrollDraw(settings);}_fnCallbackFire(settings,null,"column-sizing",[settings]);}function _fnVisibleToColumnIndex(oSettings,iMatch){var aiVis=_fnGetColumns(oSettings,"bVisible");return typeof aiVis[iMatch]==="number"?aiVis[iMatch]:null;}function _fnColumnIndexToVisible(oSettings,iMatch){var aiVis=_fnGetColumns(oSettings,"bVisible");var iPos=$.inArray(iMatch,aiVis);return iPos!==-1?iPos:null;}function _fnVisbleColumns(oSettings){return _fnGetColumns(oSettings,"bVisible").length;}function _fnGetColumns(oSettings,sParam){var a=[];$.map(oSettings.aoColumns,function(val,i){if(val[sParam]){a.push(i);}});return a;}function _fnColumnTypes(settings){var columns=settings.aoColumns;var data=settings.aoData;var types=DataTable.ext.type.detect;var i,ien,j,jen,k,ken;var col,cell,detectedType,cache;for(i=0,ien=columns.length;i<ien;i++){col=columns[i];cache=[];if(!col.sType&&col._sManualType){col.sType=col._sManualType;}else{if(!col.sType){for(j=0,jen=types.length;j<jen;j++){for(k=0,ken=data.length;k<ken;k++){if(cache[k]===undefined){cache[k]=_fnGetCellData(settings,k,i,"type");}detectedType=types[j](cache[k],settings);if(!detectedType&&j!==types.length-1){break;}if(detectedType==="html"){break;}}if(detectedType){col.sType=detectedType;break;}}if(!col.sType){col.sType="string";}}}}}function _fnApplyColumnDefs(oSettings,aoColDefs,aoCols,fn){var i,iLen,j,jLen,k,kLen,def;var columns=oSettings.aoColumns;if(aoColDefs){for(i=aoColDefs.length-1;i>=0;i--){def=aoColDefs[i];var aTargets=def.targets!==undefined?def.targets:def.aTargets;if(!$.isArray(aTargets)){aTargets=[aTargets];}for(j=0,jLen=aTargets.length;j<jLen;j++){if(typeof aTargets[j]==="number"&&aTargets[j]>=0){while(columns.length<=aTargets[j]){_fnAddColumn(oSettings);}fn(aTargets[j],def);}else{if(typeof aTargets[j]==="number"&&aTargets[j]<0){fn(columns.length+aTargets[j],def);}else{if(typeof aTargets[j]==="string"){for(k=0,kLen=columns.length;k<kLen;k++){if(aTargets[j]=="_all"||$(columns[k].nTh).hasClass(aTargets[j])){fn(k,def);}}}}}}}}if(aoCols){for(i=0,iLen=aoCols.length;i<iLen;i++){fn(i,aoCols[i]);}}}function _fnAddData(oSettings,aDataIn,nTr,anTds){var iRow=oSettings.aoData.length;var oData=$.extend(true,{},DataTable.models.oRow,{src:nTr?"dom":"data",idx:iRow});oData._aData=aDataIn;oSettings.aoData.push(oData);var nTd,sThisType;var columns=oSettings.aoColumns;for(var i=0,iLen=columns.length;i<iLen;i++){columns[i].sType=null;}oSettings.aiDisplayMaster.push(iRow);var id=oSettings.rowIdFn(aDataIn);if(id!==undefined){oSettings.aIds[id]=oData;}if(nTr||!oSettings.oFeatures.bDeferRender){_fnCreateTr(oSettings,iRow,nTr,anTds);}return iRow;}function _fnAddTr(settings,trs){var row;if(!(trs instanceof $)){trs=$(trs);}return trs.map(function(i,el){row=_fnGetRowElements(settings,el);return _fnAddData(settings,row.data,el,row.cells);});}function _fnNodeToDataIndex(oSettings,n){return(n._DT_RowIndex!==undefined)?n._DT_RowIndex:null;}function _fnNodeToColumnIndex(oSettings,iRow,n){return $.inArray(n,oSettings.aoData[iRow].anCells);}function _fnGetCellData(settings,rowIdx,colIdx,type){var draw=settings.iDraw;var col=settings.aoColumns[colIdx];var rowData=settings.aoData[rowIdx]._aData;var defaultContent=col.sDefaultContent;var cellData=col.fnGetData(rowData,type,{settings:settings,row:rowIdx,col:colIdx});if(cellData===undefined){if(settings.iDrawError!=draw&&defaultContent===null){_fnLog(settings,0,"Requested unknown parameter "+(typeof col.mData=="function"?"{function}":"'"+col.mData+"'")+" for row "+rowIdx+", column "+colIdx,4);settings.iDrawError=draw;}return defaultContent;}if((cellData===rowData||cellData===null)&&defaultContent!==null){cellData=defaultContent;}else{if(typeof cellData==="function"){return cellData.call(rowData);}}if(cellData===null&&type=="display"){return"";}return cellData;}function _fnSetCellData(settings,rowIdx,colIdx,val){var col=settings.aoColumns[colIdx];var rowData=settings.aoData[rowIdx]._aData;col.fnSetData(rowData,val,{settings:settings,row:rowIdx,col:colIdx});}var __reArray=/\[.*?\]$/;var __reFn=/\(\)$/;function _fnSplitObjNotation(str){return $.map(str.match(/(\\.|[^\.])+/g)||[""],function(s){return s.replace(/\\./g,".");});}function _fnGetObjectDataFn(mSource){if($.isPlainObject(mSource)){var o={};$.each(mSource,function(key,val){if(val){o[key]=_fnGetObjectDataFn(val);}});return function(data,type,row,meta){var t=o[type]||o._;return t!==undefined?t(data,type,row,meta):data;};}else{if(mSource===null){return function(data){return data;};}else{if(typeof mSource==="function"){return function(data,type,row,meta){return mSource(data,type,row,meta);};}else{if(typeof mSource==="string"&&(mSource.indexOf(".")!==-1||mSource.indexOf("[")!==-1||mSource.indexOf("(")!==-1)){var fetchData=function(data,type,src){var arrayNotation,funcNotation,out,innerSrc;if(src!==""){var a=_fnSplitObjNotation(src);for(var i=0,iLen=a.length;i<iLen;i++){arrayNotation=a[i].match(__reArray);funcNotation=a[i].match(__reFn);if(arrayNotation){a[i]=a[i].replace(__reArray,"");if(a[i]!==""){data=data[a[i]];}out=[];a.splice(0,i+1);innerSrc=a.join(".");if($.isArray(data)){for(var j=0,jLen=data.length;j<jLen;j++){out.push(fetchData(data[j],type,innerSrc));}}var join=arrayNotation[0].substring(1,arrayNotation[0].length-1);data=(join==="")?out:out.join(join);break;}else{if(funcNotation){a[i]=a[i].replace(__reFn,"");data=data[a[i]]();continue;}}if(data===null||data[a[i]]===undefined){return undefined;}data=data[a[i]];}}return data;};return function(data,type){return fetchData(data,type,mSource);};}else{return function(data,type){return data[mSource];};}}}}}function _fnSetObjectDataFn(mSource){if($.isPlainObject(mSource)){return _fnSetObjectDataFn(mSource._);}else{if(mSource===null){return function(){};}else{if(typeof mSource==="function"){return function(data,val,meta){mSource(data,"set",val,meta);};}else{if(typeof mSource==="string"&&(mSource.indexOf(".")!==-1||mSource.indexOf("[")!==-1||mSource.indexOf("(")!==-1)){var setData=function(data,val,src){var a=_fnSplitObjNotation(src),b;var aLast=a[a.length-1];var arrayNotation,funcNotation,o,innerSrc;for(var i=0,iLen=a.length-1;i<iLen;i++){arrayNotation=a[i].match(__reArray);funcNotation=a[i].match(__reFn);if(arrayNotation){a[i]=a[i].replace(__reArray,"");data[a[i]]=[];b=a.slice();b.splice(0,i+1);innerSrc=b.join(".");if($.isArray(val)){for(var j=0,jLen=val.length;j<jLen;j++){o={};setData(o,val[j],innerSrc);data[a[i]].push(o);}}else{data[a[i]]=val;}return;}else{if(funcNotation){a[i]=a[i].replace(__reFn,"");data=data[a[i]](val);}}if(data[a[i]]===null||data[a[i]]===undefined){data[a[i]]={};}data=data[a[i]];}if(aLast.match(__reFn)){data=data[aLast.replace(__reFn,"")](val);}else{data[aLast.replace(__reArray,"")]=val;}};return function(data,val){return setData(data,val,mSource);};}else{return function(data,val){data[mSource]=val;};}}}}}function _fnGetDataMaster(settings){return _pluck(settings.aoData,"_aData");}function _fnClearTable(settings){settings.aoData.length=0;settings.aiDisplayMaster.length=0;settings.aiDisplay.length=0;settings.aIds={};}function _fnDeleteIndex(a,iTarget,splice){var iTargetIndex=-1;for(var i=0,iLen=a.length;i<iLen;i++){if(a[i]==iTarget){iTargetIndex=i;}else{if(a[i]>iTarget){a[i]--;}}}if(iTargetIndex!=-1&&splice===undefined){a.splice(iTargetIndex,1);}}function _fnInvalidate(settings,rowIdx,src,colIdx){var row=settings.aoData[rowIdx];var i,ien;var cellWrite=function(cell,col){while(cell.childNodes.length){cell.removeChild(cell.firstChild);}cell.innerHTML=_fnGetCellData(settings,rowIdx,col,"display");};if(src==="dom"||((!src||src==="auto")&&row.src==="dom")){row._aData=_fnGetRowElements(settings,row,colIdx,colIdx===undefined?undefined:row._aData).data;}else{var cells=row.anCells;if(cells){if(colIdx!==undefined){cellWrite(cells[colIdx],colIdx);}else{for(i=0,ien=cells.length;i<ien;i++){cellWrite(cells[i],i);}}}}row._aSortData=null;row._aFilterData=null;var cols=settings.aoColumns;if(colIdx!==undefined){cols[colIdx].sType=null;}else{for(i=0,ien=cols.length;i<ien;i++){cols[i].sType=null;}_fnRowAttributes(settings,row);}}function _fnGetRowElements(settings,row,colIdx,d){var tds=[],td=row.firstChild,name,col,o,i=0,contents,columns=settings.aoColumns,objectRead=settings._rowReadObject;d=d!==undefined?d:objectRead?{}:[];var attr=function(str,td){if(typeof str==="string"){var idx=str.indexOf("@");if(idx!==-1){var attr=str.substring(idx+1);var setter=_fnSetObjectDataFn(str);setter(d,td.getAttribute(attr));}}};var cellProcess=function(cell){if(colIdx===undefined||colIdx===i){col=columns[i];contents=$.trim(cell.innerHTML);if(col&&col._bAttrSrc){var setter=_fnSetObjectDataFn(col.mData._);setter(d,contents);attr(col.mData.sort,cell);attr(col.mData.type,cell);attr(col.mData.filter,cell);}else{if(objectRead){if(!col._setter){col._setter=_fnSetObjectDataFn(col.mData);}col._setter(d,contents);}else{d[i]=contents;}}}i++;};if(td){while(td){name=td.nodeName.toUpperCase();if(name=="TD"||name=="TH"){cellProcess(td);tds.push(td);}td=td.nextSibling;}}else{tds=row.anCells;for(var j=0,jen=tds.length;j<jen;j++){cellProcess(tds[j]);}}var rowNode=row.firstChild?row:row.nTr;if(rowNode){var id=rowNode.getAttribute("id");if(id){_fnSetObjectDataFn(settings.rowId)(d,id);}}return{data:d,cells:tds};}function _fnCreateTr(oSettings,iRow,nTrIn,anTds){var row=oSettings.aoData[iRow],rowData=row._aData,cells=[],nTr,nTd,oCol,i,iLen;if(row.nTr===null){nTr=nTrIn||document.createElement("tr");row.nTr=nTr;row.anCells=cells;nTr._DT_RowIndex=iRow;_fnRowAttributes(oSettings,row);for(i=0,iLen=oSettings.aoColumns.length;i<iLen;i++){oCol=oSettings.aoColumns[i];nTd=nTrIn?anTds[i]:document.createElement(oCol.sCellType);nTd._DT_CellIndex={row:iRow,column:i};cells.push(nTd);if(!nTrIn||oCol.mRender||oCol.mData!==i){nTd.innerHTML=_fnGetCellData(oSettings,iRow,i,"display");}if(oCol.sClass){nTd.className+=" "+oCol.sClass;}if(oCol.bVisible&&!nTrIn){nTr.appendChild(nTd);}else{if(!oCol.bVisible&&nTrIn){nTd.parentNode.removeChild(nTd);}}if(oCol.fnCreatedCell){oCol.fnCreatedCell.call(oSettings.oInstance,nTd,_fnGetCellData(oSettings,iRow,i),rowData,iRow,i);}}_fnCallbackFire(oSettings,"aoRowCreatedCallback",null,[nTr,rowData,iRow]);}row.nTr.setAttribute("role","row");}function _fnRowAttributes(settings,row){var tr=row.nTr;var data=row._aData;if(tr){var id=settings.rowIdFn(data);if(id){tr.id=id;}if(data.DT_RowClass){var a=data.DT_RowClass.split(" ");row.__rowc=row.__rowc?_unique(row.__rowc.concat(a)):a;$(tr).removeClass(row.__rowc.join(" ")).addClass(data.DT_RowClass);}if(data.DT_RowAttr){$(tr).attr(data.DT_RowAttr);}if(data.DT_RowData){$(tr).data(data.DT_RowData);}}}function _fnBuildHead(oSettings){var i,ien,cell,row,column;var thead=oSettings.nTHead;var tfoot=oSettings.nTFoot;var createHeader=$("th, td",thead).length===0;var classes=oSettings.oClasses;var columns=oSettings.aoColumns;if(createHeader){row=$("<tr/>").appendTo(thead);}for(i=0,ien=columns.length;i<ien;i++){column=columns[i];cell=$(column.nTh).addClass(column.sClass);if(createHeader){cell.appendTo(row);}if(oSettings.oFeatures.bSort){cell.addClass(column.sSortingClass);if(column.bSortable!==false){cell.attr("tabindex",oSettings.iTabIndex).attr("aria-controls",oSettings.sTableId);_fnSortAttachListener(oSettings,column.nTh,i);}}if(column.sTitle!=cell[0].innerHTML){cell.html(column.sTitle);}_fnRenderer(oSettings,"header")(oSettings,cell,column,classes);}if(createHeader){_fnDetectHeader(oSettings.aoHeader,thead);}$(thead).find(">tr").attr("role","row");$(thead).find(">tr>th, >tr>td").addClass(classes.sHeaderTH);$(tfoot).find(">tr>th, >tr>td").addClass(classes.sFooterTH);if(tfoot!==null){var cells=oSettings.aoFooter[0];for(i=0,ien=cells.length;i<ien;i++){column=columns[i];column.nTf=cells[i].cell;if(column.sClass){$(column.nTf).addClass(column.sClass);}}}}function _fnDrawHead(oSettings,aoSource,bIncludeHidden){var i,iLen,j,jLen,k,kLen,n,nLocalTr;var aoLocal=[];var aApplied=[];var iColumns=oSettings.aoColumns.length;var iRowspan,iColspan;if(!aoSource){return;}if(bIncludeHidden===undefined){bIncludeHidden=false;}for(i=0,iLen=aoSource.length;i<iLen;i++){aoLocal[i]=aoSource[i].slice();aoLocal[i].nTr=aoSource[i].nTr;for(j=iColumns-1;j>=0;j--){if(!oSettings.aoColumns[j].bVisible&&!bIncludeHidden){aoLocal[i].splice(j,1);}}aApplied.push([]);}for(i=0,iLen=aoLocal.length;i<iLen;i++){nLocalTr=aoLocal[i].nTr;if(nLocalTr){while((n=nLocalTr.firstChild)){nLocalTr.removeChild(n);}}for(j=0,jLen=aoLocal[i].length;j<jLen;j++){iRowspan=1;iColspan=1;if(aApplied[i][j]===undefined){nLocalTr.appendChild(aoLocal[i][j].cell);aApplied[i][j]=1;while(aoLocal[i+iRowspan]!==undefined&&aoLocal[i][j].cell==aoLocal[i+iRowspan][j].cell){aApplied[i+iRowspan][j]=1;iRowspan++;}while(aoLocal[i][j+iColspan]!==undefined&&aoLocal[i][j].cell==aoLocal[i][j+iColspan].cell){for(k=0;k<iRowspan;k++){aApplied[i+k][j+iColspan]=1;}iColspan++;}$(aoLocal[i][j].cell).attr("rowspan",iRowspan).attr("colspan",iColspan);}}}}function _fnDraw(oSettings){var aPreDraw=_fnCallbackFire(oSettings,"aoPreDrawCallback","preDraw",[oSettings]);if($.inArray(false,aPreDraw)!==-1){_fnProcessingDisplay(oSettings,false);return;}var i,iLen,n;var anRows=[];var iRowCount=0;var asStripeClasses=oSettings.asStripeClasses;var iStripes=asStripeClasses.length;var iOpenRows=oSettings.aoOpenRows.length;var oLang=oSettings.oLanguage;var iInitDisplayStart=oSettings.iInitDisplayStart;var bServerSide=_fnDataSource(oSettings)=="ssp";var aiDisplay=oSettings.aiDisplay;oSettings.bDrawing=true;if(iInitDisplayStart!==undefined&&iInitDisplayStart!==-1){oSettings._iDisplayStart=bServerSide?iInitDisplayStart:iInitDisplayStart>=oSettings.fnRecordsDisplay()?0:iInitDisplayStart;oSettings.iInitDisplayStart=-1;}var iDisplayStart=oSettings._iDisplayStart;var iDisplayEnd=oSettings.fnDisplayEnd();if(oSettings.bDeferLoading){oSettings.bDeferLoading=false;oSettings.iDraw++;_fnProcessingDisplay(oSettings,false);}else{if(!bServerSide){oSettings.iDraw++;}else{if(!oSettings.bDestroying&&!_fnAjaxUpdate(oSettings)){return;}}}if(aiDisplay.length!==0){var iStart=bServerSide?0:iDisplayStart;var iEnd=bServerSide?oSettings.aoData.length:iDisplayEnd;for(var j=iStart;j<iEnd;j++){var iDataIndex=aiDisplay[j];var aoData=oSettings.aoData[iDataIndex];if(aoData.nTr===null){_fnCreateTr(oSettings,iDataIndex);}var nRow=aoData.nTr;if(iStripes!==0){var sStripe=asStripeClasses[iRowCount%iStripes];if(aoData._sRowStripe!=sStripe){$(nRow).removeClass(aoData._sRowStripe).addClass(sStripe);aoData._sRowStripe=sStripe;}}_fnCallbackFire(oSettings,"aoRowCallback",null,[nRow,aoData._aData,iRowCount,j]);anRows.push(nRow);iRowCount++;}}else{var sZero=oLang.sZeroRecords;if(oSettings.iDraw==1&&_fnDataSource(oSettings)=="ajax"){sZero=oLang.sLoadingRecords;}else{if(oLang.sEmptyTable&&oSettings.fnRecordsTotal()===0){sZero=oLang.sEmptyTable;}}anRows[0]=$("<tr/>",{"class":iStripes?asStripeClasses[0]:""}).append($("<td />",{valign:"top",colSpan:_fnVisbleColumns(oSettings),"class":oSettings.oClasses.sRowEmpty}).html(sZero))[0];}_fnCallbackFire(oSettings,"aoHeaderCallback","header",[$(oSettings.nTHead).children("tr")[0],_fnGetDataMaster(oSettings),iDisplayStart,iDisplayEnd,aiDisplay]);_fnCallbackFire(oSettings,"aoFooterCallback","footer",[$(oSettings.nTFoot).children("tr")[0],_fnGetDataMaster(oSettings),iDisplayStart,iDisplayEnd,aiDisplay]);var body=$(oSettings.nTBody);body.children().detach();body.append($(anRows));_fnCallbackFire(oSettings,"aoDrawCallback","draw",[oSettings]);oSettings.bSorted=false;oSettings.bFiltered=false;oSettings.bDrawing=false;}function _fnReDraw(settings,holdPosition){var features=settings.oFeatures,sort=features.bSort,filter=features.bFilter;if(sort){_fnSort(settings);}if(filter){_fnFilterComplete(settings,settings.oPreviousSearch);}else{settings.aiDisplay=settings.aiDisplayMaster.slice();}if(holdPosition!==true){settings._iDisplayStart=0;}settings._drawHold=holdPosition;_fnDraw(settings);settings._drawHold=false;}function _fnAddOptionsHtml(oSettings){var classes=oSettings.oClasses;var table=$(oSettings.nTable);var holding=$("<div/>").insertBefore(table);var features=oSettings.oFeatures;var insert=$("<div/>",{id:oSettings.sTableId+"_wrapper","class":classes.sWrapper+(oSettings.nTFoot?"":" "+classes.sNoFooter)});oSettings.nHolding=holding[0];oSettings.nTableWrapper=insert[0];oSettings.nTableReinsertBefore=oSettings.nTable.nextSibling;var aDom=oSettings.sDom.split("");var featureNode,cOption,nNewNode,cNext,sAttr,j;for(var i=0;i<aDom.length;i++){featureNode=null;cOption=aDom[i];if(cOption=="<"){nNewNode=$("<div/>")[0];cNext=aDom[i+1];if(cNext=="'"||cNext=='"'){sAttr="";j=2;while(aDom[i+j]!=cNext){sAttr+=aDom[i+j];j++;}if(sAttr=="H"){sAttr=classes.sJUIHeader;}else{if(sAttr=="F"){sAttr=classes.sJUIFooter;}}if(sAttr.indexOf(".")!=-1){var aSplit=sAttr.split(".");nNewNode.id=aSplit[0].substr(1,aSplit[0].length-1);nNewNode.className=aSplit[1];}else{if(sAttr.charAt(0)=="#"){nNewNode.id=sAttr.substr(1,sAttr.length-1);}else{nNewNode.className=sAttr;}}i+=j;}insert.append(nNewNode);insert=$(nNewNode);}else{if(cOption==">"){insert=insert.parent();}else{if(cOption=="l"&&features.bPaginate&&features.bLengthChange){featureNode=_fnFeatureHtmlLength(oSettings);}else{if(cOption=="f"&&features.bFilter){featureNode=_fnFeatureHtmlFilter(oSettings);}else{if(cOption=="r"&&features.bProcessing){featureNode=_fnFeatureHtmlProcessing(oSettings);}else{if(cOption=="t"){featureNode=_fnFeatureHtmlTable(oSettings);}else{if(cOption=="i"&&features.bInfo){featureNode=_fnFeatureHtmlInfo(oSettings);}else{if(cOption=="p"&&features.bPaginate){featureNode=_fnFeatureHtmlPaginate(oSettings);}else{if(DataTable.ext.feature.length!==0){var aoFeatures=DataTable.ext.feature;for(var k=0,kLen=aoFeatures.length;k<kLen;k++){if(cOption==aoFeatures[k].cFeature){featureNode=aoFeatures[k].fnInit(oSettings);break;}}}}}}}}}}}if(featureNode){var aanFeatures=oSettings.aanFeatures;if(!aanFeatures[cOption]){aanFeatures[cOption]=[];}aanFeatures[cOption].push(featureNode);insert.append(featureNode);}}holding.replaceWith(insert);oSettings.nHolding=null;}function _fnDetectHeader(aLayout,nThead){var nTrs=$(nThead).children("tr");var nTr,nCell;var i,k,l,iLen,jLen,iColShifted,iColumn,iColspan,iRowspan;var bUnique;var fnShiftCol=function(a,i,j){var k=a[i];while(k[j]){j++;}return j;};aLayout.splice(0,aLayout.length);for(i=0,iLen=nTrs.length;i<iLen;i++){aLayout.push([]);}for(i=0,iLen=nTrs.length;i<iLen;i++){nTr=nTrs[i];iColumn=0;nCell=nTr.firstChild;while(nCell){if(nCell.nodeName.toUpperCase()=="TD"||nCell.nodeName.toUpperCase()=="TH"){iColspan=nCell.getAttribute("colspan")*1;iRowspan=nCell.getAttribute("rowspan")*1;iColspan=(!iColspan||iColspan===0||iColspan===1)?1:iColspan;iRowspan=(!iRowspan||iRowspan===0||iRowspan===1)?1:iRowspan;iColShifted=fnShiftCol(aLayout,i,iColumn);bUnique=iColspan===1?true:false;for(l=0;l<iColspan;l++){for(k=0;k<iRowspan;k++){aLayout[i+k][iColShifted+l]={cell:nCell,unique:bUnique};aLayout[i+k].nTr=nTr;}}}nCell=nCell.nextSibling;}}}function _fnGetUniqueThs(oSettings,nHeader,aLayout){var aReturn=[];if(!aLayout){aLayout=oSettings.aoHeader;if(nHeader){aLayout=[];_fnDetectHeader(aLayout,nHeader);}}for(var i=0,iLen=aLayout.length;i<iLen;i++){for(var j=0,jLen=aLayout[i].length;j<jLen;j++){if(aLayout[i][j].unique&&(!aReturn[j]||!oSettings.bSortCellsTop)){aReturn[j]=aLayout[i][j].cell;}}}return aReturn;}function _fnBuildAjax(oSettings,data,fn){_fnCallbackFire(oSettings,"aoServerParams","serverParams",[data]);if(data&&$.isArray(data)){var tmp={};var rbracket=/(.*?)\[\]$/;$.each(data,function(key,val){var match=val.name.match(rbracket);if(match){var name=match[0];if(!tmp[name]){tmp[name]=[];}tmp[name].push(val.value);}else{tmp[val.name]=val.value;}});data=tmp;}var ajaxData;var ajax=oSettings.ajax;var instance=oSettings.oInstance;var callback=function(json){_fnCallbackFire(oSettings,null,"xhr",[oSettings,json,oSettings.jqXHR]);fn(json);};if($.isPlainObject(ajax)&&ajax.data){ajaxData=ajax.data;var newData=$.isFunction(ajaxData)?ajaxData(data,oSettings):ajaxData;data=$.isFunction(ajaxData)&&newData?newData:$.extend(true,data,newData);delete ajax.data;}var baseAjax={data:data,success:function(json){var error=json.error||json.sError;if(error){_fnLog(oSettings,0,error);}oSettings.json=json;callback(json);},dataType:"json",cache:false,type:oSettings.sServerMethod,error:function(xhr,error,thrown){var ret=_fnCallbackFire(oSettings,null,"xhr",[oSettings,null,oSettings.jqXHR]);if($.inArray(true,ret)===-1){if(error=="parsererror"){_fnLog(oSettings,0,"Invalid JSON response",1);}else{if(xhr.readyState===4){_fnLog(oSettings,0,"Ajax error",7);}}}_fnProcessingDisplay(oSettings,false);}};oSettings.oAjaxData=data;_fnCallbackFire(oSettings,null,"preXhr",[oSettings,data]);if(oSettings.fnServerData){oSettings.fnServerData.call(instance,oSettings.sAjaxSource,$.map(data,function(val,key){return{name:key,value:val};}),callback,oSettings);}else{if(oSettings.sAjaxSource||typeof ajax==="string"){oSettings.jqXHR=$.ajax($.extend(baseAjax,{url:ajax||oSettings.sAjaxSource}));}else{if($.isFunction(ajax)){oSettings.jqXHR=ajax.call(instance,data,callback,oSettings);}else{oSettings.jqXHR=$.ajax($.extend(baseAjax,ajax));ajax.data=ajaxData;}}}}function _fnAjaxUpdate(settings){if(settings.bAjaxDataGet){settings.iDraw++;_fnProcessingDisplay(settings,true);_fnBuildAjax(settings,_fnAjaxParameters(settings),function(json){_fnAjaxUpdateDraw(settings,json);});return false;}return true;}function _fnAjaxParameters(settings){var columns=settings.aoColumns,columnCount=columns.length,features=settings.oFeatures,preSearch=settings.oPreviousSearch,preColSearch=settings.aoPreSearchCols,i,data=[],dataProp,column,columnSearch,sort=_fnSortFlatten(settings),displayStart=settings._iDisplayStart,displayLength=features.bPaginate!==false?settings._iDisplayLength:-1;var param=function(name,value){data.push({name:name,value:value});};param("sEcho",settings.iDraw);param("iColumns",columnCount);param("sColumns",_pluck(columns,"sName").join(","));param("iDisplayStart",displayStart);param("iDisplayLength",displayLength);var d={draw:settings.iDraw,columns:[],order:[],start:displayStart,length:displayLength,search:{value:preSearch.sSearch,regex:preSearch.bRegex}};for(i=0;i<columnCount;i++){column=columns[i];columnSearch=preColSearch[i];dataProp=typeof column.mData=="function"?"function":column.mData;d.columns.push({data:dataProp,name:column.sName,searchable:column.bSearchable,orderable:column.bSortable,search:{value:columnSearch.sSearch,regex:columnSearch.bRegex}});param("mDataProp_"+i,dataProp);if(features.bFilter){param("sSearch_"+i,columnSearch.sSearch);param("bRegex_"+i,columnSearch.bRegex);param("bSearchable_"+i,column.bSearchable);}if(features.bSort){param("bSortable_"+i,column.bSortable);}}if(features.bFilter){param("sSearch",preSearch.sSearch);param("bRegex",preSearch.bRegex);}if(features.bSort){$.each(sort,function(i,val){d.order.push({column:val.col,dir:val.dir});param("iSortCol_"+i,val.col);param("sSortDir_"+i,val.dir);});param("iSortingCols",sort.length);}var legacy=DataTable.ext.legacy.ajax;if(legacy===null){return settings.sAjaxSource?data:d;}return legacy?data:d;}function _fnAjaxUpdateDraw(settings,json){var compat=function(old,modern){return json[old]!==undefined?json[old]:json[modern];};var data=_fnAjaxDataSrc(settings,json);var draw=compat("sEcho","draw");var recordsTotal=compat("iTotalRecords","recordsTotal");var recordsFiltered=compat("iTotalDisplayRecords","recordsFiltered");if(draw){if(draw*1<settings.iDraw){return;}settings.iDraw=draw*1;}_fnClearTable(settings);settings._iRecordsTotal=parseInt(recordsTotal,10);settings._iRecordsDisplay=parseInt(recordsFiltered,10);for(var i=0,ien=data.length;i<ien;i++){_fnAddData(settings,data[i]);}settings.aiDisplay=settings.aiDisplayMaster.slice();settings.bAjaxDataGet=false;_fnDraw(settings);if(!settings._bInitComplete){_fnInitComplete(settings,json);}settings.bAjaxDataGet=true;_fnProcessingDisplay(settings,false);}function _fnAjaxDataSrc(oSettings,json){var dataSrc=$.isPlainObject(oSettings.ajax)&&oSettings.ajax.dataSrc!==undefined?oSettings.ajax.dataSrc:oSettings.sAjaxDataProp;if(dataSrc==="data"){return json.aaData||json[dataSrc];}return dataSrc!==""?_fnGetObjectDataFn(dataSrc)(json):json;}function _fnFeatureHtmlFilter(settings){var classes=settings.oClasses;var tableId=settings.sTableId;var language=settings.oLanguage;var previousSearch=settings.oPreviousSearch;var features=settings.aanFeatures;var input='<input type="search" class="'+classes.sFilterInput+'"/>';var str=language.sSearch;str=str.match(/_INPUT_/)?str.replace("_INPUT_",input):str+input;var filter=$("<div/>",{id:!features.f?tableId+"_filter":null,"class":classes.sFilter}).append($("<label/>").append(str));var searchFn=function(){var n=features.f;var val=!this.value?"":this.value;if(val!=previousSearch.sSearch){_fnFilterComplete(settings,{sSearch:val,bRegex:previousSearch.bRegex,bSmart:previousSearch.bSmart,bCaseInsensitive:previousSearch.bCaseInsensitive});settings._iDisplayStart=0;_fnDraw(settings);}};var searchDelay=settings.searchDelay!==null?settings.searchDelay:_fnDataSource(settings)==="ssp"?400:0;var jqFilter=$("input",filter).val(previousSearch.sSearch).attr("placeholder",language.sSearchPlaceholder).bind("keyup.DT search.DT input.DT paste.DT cut.DT",searchDelay?_fnThrottle(searchFn,searchDelay):searchFn).bind("keypress.DT",function(e){if(e.keyCode==13){return false;}}).attr("aria-controls",tableId);$(settings.nTable).on("search.dt.DT",function(ev,s){if(settings===s){try{if(jqFilter[0]!==document.activeElement){jqFilter.val(previousSearch.sSearch);}}catch(e){}}});return filter[0];}function _fnFilterComplete(oSettings,oInput,iForce){var oPrevSearch=oSettings.oPreviousSearch;var aoPrevSearch=oSettings.aoPreSearchCols;var fnSaveFilter=function(oFilter){oPrevSearch.sSearch=oFilter.sSearch;oPrevSearch.bRegex=oFilter.bRegex;oPrevSearch.bSmart=oFilter.bSmart;oPrevSearch.bCaseInsensitive=oFilter.bCaseInsensitive;};var fnRegex=function(o){return o.bEscapeRegex!==undefined?!o.bEscapeRegex:o.bRegex;};_fnColumnTypes(oSettings);if(_fnDataSource(oSettings)!="ssp"){_fnFilter(oSettings,oInput.sSearch,iForce,fnRegex(oInput),oInput.bSmart,oInput.bCaseInsensitive);fnSaveFilter(oInput);for(var i=0;i<aoPrevSearch.length;i++){_fnFilterColumn(oSettings,aoPrevSearch[i].sSearch,i,fnRegex(aoPrevSearch[i]),aoPrevSearch[i].bSmart,aoPrevSearch[i].bCaseInsensitive);}_fnFilterCustom(oSettings);}else{fnSaveFilter(oInput);}oSettings.bFiltered=true;_fnCallbackFire(oSettings,null,"search",[oSettings]);}function _fnFilterCustom(settings){var filters=DataTable.ext.search;var displayRows=settings.aiDisplay;var row,rowIdx;for(var i=0,ien=filters.length;i<ien;i++){var rows=[];for(var j=0,jen=displayRows.length;j<jen;j++){rowIdx=displayRows[j];row=settings.aoData[rowIdx];if(filters[i](settings,row._aFilterData,rowIdx,row._aData,j)){rows.push(rowIdx);}}displayRows.length=0;$.merge(displayRows,rows);}}function _fnFilterColumn(settings,searchStr,colIdx,regex,smart,caseInsensitive){if(searchStr===""){return;}var data;var display=settings.aiDisplay;var rpSearch=_fnFilterCreateSearch(searchStr,regex,smart,caseInsensitive);for(var i=display.length-1;i>=0;i--){data=settings.aoData[display[i]]._aFilterData[colIdx];if(!rpSearch.test(data)){display.splice(i,1);}}}function _fnFilter(settings,input,force,regex,smart,caseInsensitive){var rpSearch=_fnFilterCreateSearch(input,regex,smart,caseInsensitive);var prevSearch=settings.oPreviousSearch.sSearch;var displayMaster=settings.aiDisplayMaster;var display,invalidated,i;if(DataTable.ext.search.length!==0){force=true;}invalidated=_fnFilterData(settings);if(input.length<=0){settings.aiDisplay=displayMaster.slice();}else{if(invalidated||force||prevSearch.length>input.length||input.indexOf(prevSearch)!==0||settings.bSorted){settings.aiDisplay=displayMaster.slice();}display=settings.aiDisplay;for(i=display.length-1;i>=0;i--){if(!rpSearch.test(settings.aoData[display[i]]._sFilterRow)){display.splice(i,1);}}}}function _fnFilterCreateSearch(search,regex,smart,caseInsensitive){search=regex?search:_fnEscapeRegex(search);if(smart){var a=$.map(search.match(/"[^"]+"|[^ ]+/g)||[""],function(word){if(word.charAt(0)==='"'){var m=word.match(/^"(.*)"$/);word=m?m[1]:word;}return word.replace('"',"");});search="^(?=.*?"+a.join(")(?=.*?")+").*$";}return new RegExp(search,caseInsensitive?"i":"");}function _fnEscapeRegex(sVal){return sVal.replace(_re_escape_regex,"\\$1");}var __filter_div=$("<div>")[0];var __filter_div_textContent=__filter_div.textContent!==undefined;function _fnFilterData(settings){var columns=settings.aoColumns;var column;var i,j,ien,jen,filterData,cellData,row;var fomatters=DataTable.ext.type.search;var wasInvalidated=false;for(i=0,ien=settings.aoData.length;i<ien;i++){row=settings.aoData[i];if(!row._aFilterData){filterData=[];for(j=0,jen=columns.length;j<jen;j++){column=columns[j];if(column.bSearchable){cellData=_fnGetCellData(settings,i,j,"filter");if(fomatters[column.sType]){cellData=fomatters[column.sType](cellData);}if(cellData===null){cellData="";}if(typeof cellData!=="string"&&cellData.toString){cellData=cellData.toString();}}else{cellData="";}if(cellData.indexOf&&cellData.indexOf("&")!==-1){__filter_div.innerHTML=cellData;cellData=__filter_div_textContent?__filter_div.textContent:__filter_div.innerText;}if(cellData.replace){cellData=cellData.replace(/[\r\n]/g,"");}filterData.push(cellData);}row._aFilterData=filterData;row._sFilterRow=filterData.join("  ");wasInvalidated=true;}}return wasInvalidated;}function _fnSearchToCamel(obj){return{search:obj.sSearch,smart:obj.bSmart,regex:obj.bRegex,caseInsensitive:obj.bCaseInsensitive};}function _fnSearchToHung(obj){return{sSearch:obj.search,bSmart:obj.smart,bRegex:obj.regex,bCaseInsensitive:obj.caseInsensitive};}function _fnFeatureHtmlInfo(settings){var tid=settings.sTableId,nodes=settings.aanFeatures.i,n=$("<div/>",{"class":settings.oClasses.sInfo,id:!nodes?tid+"_info":null});if(!nodes){settings.aoDrawCallback.push({fn:_fnUpdateInfo,sName:"information"});n.attr("role","status").attr("aria-live","polite");$(settings.nTable).attr("aria-describedby",tid+"_info");}return n[0];}function _fnUpdateInfo(settings){var nodes=settings.aanFeatures.i;if(nodes.length===0){return;}var lang=settings.oLanguage,start=settings._iDisplayStart+1,end=settings.fnDisplayEnd(),max=settings.fnRecordsTotal(),total=settings.fnRecordsDisplay(),out=total?lang.sInfo:lang.sInfoEmpty;if(total!==max){out+=" "+lang.sInfoFiltered;}out+=lang.sInfoPostFix;out=_fnInfoMacros(settings,out);var callback=lang.fnInfoCallback;if(callback!==null){out=callback.call(settings.oInstance,settings,start,end,max,total,out);}$(nodes).html(out);}function _fnInfoMacros(settings,str){var formatter=settings.fnFormatNumber,start=settings._iDisplayStart+1,len=settings._iDisplayLength,vis=settings.fnRecordsDisplay(),all=len===-1;return str.replace(/_START_/g,formatter.call(settings,start)).replace(/_END_/g,formatter.call(settings,settings.fnDisplayEnd())).replace(/_MAX_/g,formatter.call(settings,settings.fnRecordsTotal())).replace(/_TOTAL_/g,formatter.call(settings,vis)).replace(/_PAGE_/g,formatter.call(settings,all?1:Math.ceil(start/len))).replace(/_PAGES_/g,formatter.call(settings,all?1:Math.ceil(vis/len)));}function _fnInitialise(settings){var i,iLen,iAjaxStart=settings.iInitDisplayStart;var columns=settings.aoColumns,column;var features=settings.oFeatures;var deferLoading=settings.bDeferLoading;if(!settings.bInitialised){setTimeout(function(){_fnInitialise(settings);},200);return;}_fnAddOptionsHtml(settings);_fnBuildHead(settings);_fnDrawHead(settings,settings.aoHeader);_fnDrawHead(settings,settings.aoFooter);_fnProcessingDisplay(settings,true);if(features.bAutoWidth){_fnCalculateColumnWidths(settings);}for(i=0,iLen=columns.length;i<iLen;i++){column=columns[i];if(column.sWidth){column.nTh.style.width=_fnStringToCss(column.sWidth);}}_fnCallbackFire(settings,null,"preInit",[settings]);_fnReDraw(settings);var dataSrc=_fnDataSource(settings);if(dataSrc!="ssp"||deferLoading){if(dataSrc=="ajax"){_fnBuildAjax(settings,[],function(json){var aData=_fnAjaxDataSrc(settings,json);for(i=0;i<aData.length;i++){_fnAddData(settings,aData[i]);}settings.iInitDisplayStart=iAjaxStart;_fnReDraw(settings);_fnProcessingDisplay(settings,false);_fnInitComplete(settings,json);},settings);}else{_fnProcessingDisplay(settings,false);_fnInitComplete(settings);}}}function _fnInitComplete(settings,json){settings._bInitComplete=true;if(json||settings.oInit.aaData){_fnAdjustColumnSizing(settings);}_fnCallbackFire(settings,null,"plugin-init",[settings,json]);_fnCallbackFire(settings,"aoInitComplete","init",[settings,json]);}function _fnLengthChange(settings,val){var len=parseInt(val,10);settings._iDisplayLength=len;_fnLengthOverflow(settings);_fnCallbackFire(settings,null,"length",[settings,len]);}function _fnFeatureHtmlLength(settings){var classes=settings.oClasses,tableId=settings.sTableId,menu=settings.aLengthMenu,d2=$.isArray(menu[0]),lengths=d2?menu[0]:menu,language=d2?menu[1]:menu;var select=$("<select/>",{name:tableId+"_length","aria-controls":tableId,"class":classes.sLengthSelect});for(var i=0,ien=lengths.length;i<ien;i++){select[0][i]=new Option(language[i],lengths[i]);}var div=$("<div><label/></div>").addClass(classes.sLength);if(!settings.aanFeatures.l){div[0].id=tableId+"_length";}div.children().append(settings.oLanguage.sLengthMenu.replace("_MENU_",select[0].outerHTML));$("select",div).val(settings._iDisplayLength).bind("change.DT",function(e){_fnLengthChange(settings,$(this).val());_fnDraw(settings);});$(settings.nTable).bind("length.dt.DT",function(e,s,len){if(settings===s){$("select",div).val(len);}});return div[0];}function _fnFeatureHtmlPaginate(settings){var type=settings.sPaginationType,plugin=DataTable.ext.pager[type],modern=typeof plugin==="function",redraw=function(settings){_fnDraw(settings);},node=$("<div/>").addClass(settings.oClasses.sPaging+type)[0],features=settings.aanFeatures;if(!modern){plugin.fnInit(settings,node,redraw);}if(!features.p){node.id=settings.sTableId+"_paginate";settings.aoDrawCallback.push({fn:function(settings){if(modern){var start=settings._iDisplayStart,len=settings._iDisplayLength,visRecords=settings.fnRecordsDisplay(),all=len===-1,page=all?0:Math.ceil(start/len),pages=all?1:Math.ceil(visRecords/len),buttons=plugin(page,pages),i,ien;for(i=0,ien=features.p.length;i<ien;i++){_fnRenderer(settings,"pageButton")(settings,features.p[i],i,buttons,page,pages);}}else{plugin.fnUpdate(settings,redraw);}},sName:"pagination"});}return node;}function _fnPageChange(settings,action,redraw){var start=settings._iDisplayStart,len=settings._iDisplayLength,records=settings.fnRecordsDisplay();if(records===0||len===-1){start=0;}else{if(typeof action==="number"){start=action*len;if(start>records){start=0;}}else{if(action=="first"){start=0;}else{if(action=="previous"){start=len>=0?start-len:0;if(start<0){start=0;}}else{if(action=="next"){if(start+len<records){start+=len;}}else{if(action=="last"){start=Math.floor((records-1)/len)*len;}else{_fnLog(settings,0,"Unknown paging action: "+action,5);}}}}}}var changed=settings._iDisplayStart!==start;settings._iDisplayStart=start;if(changed){_fnCallbackFire(settings,null,"page",[settings]);if(redraw){_fnDraw(settings);}}return changed;}function _fnFeatureHtmlProcessing(settings){return $("<div/>",{id:!settings.aanFeatures.r?settings.sTableId+"_processing":null,"class":settings.oClasses.sProcessing}).html(settings.oLanguage.sProcessing).insertBefore(settings.nTable)[0];}function _fnProcessingDisplay(settings,show){if(settings.oFeatures.bProcessing){$(settings.aanFeatures.r).css("display",show?"block":"none");}_fnCallbackFire(settings,null,"processing",[settings,show]);}function _fnFeatureHtmlTable(settings){var table=$(settings.nTable);table.attr("role","grid");var scroll=settings.oScroll;if(scroll.sX===""&&scroll.sY===""){return settings.nTable;}var scrollX=scroll.sX;var scrollY=scroll.sY;var classes=settings.oClasses;var caption=table.children("caption");var captionSide=caption.length?caption[0]._captionSide:null;var headerClone=$(table[0].cloneNode(false));var footerClone=$(table[0].cloneNode(false));var footer=table.children("tfoot");var _div="<div/>";var size=function(s){return !s?null:_fnStringToCss(s);};if(!footer.length){footer=null;}var scroller=$(_div,{"class":classes.sScrollWrapper}).append($(_div,{"class":classes.sScrollHead}).css({overflow:"hidden",position:"relative",border:0,width:scrollX?size(scrollX):"100%"}).append($(_div,{"class":classes.sScrollHeadInner}).css({"box-sizing":"content-box",width:scroll.sXInner||"100%"}).append(headerClone.removeAttr("id").css("margin-left",0).append(captionSide==="top"?caption:null).append(table.children("thead"))))).append($(_div,{"class":classes.sScrollBody}).css({position:"relative",overflow:"auto",width:size(scrollX)}).append(table));if(footer){scroller.append($(_div,{"class":classes.sScrollFoot}).css({overflow:"hidden",border:0,width:scrollX?size(scrollX):"100%"}).append($(_div,{"class":classes.sScrollFootInner}).append(footerClone.removeAttr("id").css("margin-left",0).append(captionSide==="bottom"?caption:null).append(table.children("tfoot")))));}var children=scroller.children();var scrollHead=children[0];var scrollBody=children[1];var scrollFoot=footer?children[2]:null;if(scrollX){$(scrollBody).on("scroll.DT",function(e){var scrollLeft=this.scrollLeft;scrollHead.scrollLeft=scrollLeft;if(footer){scrollFoot.scrollLeft=scrollLeft;}});}$(scrollBody).css(scrollY&&scroll.bCollapse?"max-height":"height",scrollY);settings.nScrollHead=scrollHead;settings.nScrollBody=scrollBody;settings.nScrollFoot=scrollFoot;settings.aoDrawCallback.push({fn:_fnScrollDraw,sName:"scrolling"});return scroller[0];}function _fnScrollDraw(settings){var scroll=settings.oScroll,scrollX=scroll.sX,scrollXInner=scroll.sXInner,scrollY=scroll.sY,barWidth=scroll.iBarWidth,divHeader=$(settings.nScrollHead),divHeaderStyle=divHeader[0].style,divHeaderInner=divHeader.children("div"),divHeaderInnerStyle=divHeaderInner[0].style,divHeaderTable=divHeaderInner.children("table"),divBodyEl=settings.nScrollBody,divBody=$(divBodyEl),divBodyStyle=divBodyEl.style,divFooter=$(settings.nScrollFoot),divFooterInner=divFooter.children("div"),divFooterTable=divFooterInner.children("table"),header=$(settings.nTHead),table=$(settings.nTable),tableEl=table[0],tableStyle=tableEl.style,footer=settings.nTFoot?$(settings.nTFoot):null,browser=settings.oBrowser,ie67=browser.bScrollOversize,headerTrgEls,footerTrgEls,headerSrcEls,footerSrcEls,headerCopy,footerCopy,headerWidths=[],footerWidths=[],headerContent=[],idx,correction,sanityWidth,zeroOut=function(nSizer){var style=nSizer.style;style.paddingTop="0";style.paddingBottom="0";style.borderTopWidth="0";style.borderBottomWidth="0";style.height=0;};var scrollBarVis=divBodyEl.scrollHeight>divBodyEl.clientHeight;if(settings.scrollBarVis!==scrollBarVis&&settings.scrollBarVis!==undefined){settings.scrollBarVis=scrollBarVis;_fnAdjustColumnSizing(settings);return;}else{settings.scrollBarVis=scrollBarVis;}table.children("thead, tfoot").remove();headerCopy=header.clone().prependTo(table);headerTrgEls=header.find("tr");headerSrcEls=headerCopy.find("tr");headerCopy.find("th, td").removeAttr("tabindex");if(footer){footerCopy=footer.clone().prependTo(table);footerTrgEls=footer.find("tr");footerSrcEls=footerCopy.find("tr");}if(!scrollX){divBodyStyle.width="100%";divHeader[0].style.width="100%";}$.each(_fnGetUniqueThs(settings,headerCopy),function(i,el){idx=_fnVisibleToColumnIndex(settings,i);el.style.width=settings.aoColumns[idx].sWidth;});if(footer){_fnApplyToChildren(function(n){n.style.width="";},footerSrcEls);}sanityWidth=table.outerWidth();if(scrollX===""){tableStyle.width="100%";if(ie67&&(table.find("tbody").height()>divBodyEl.offsetHeight||divBody.css("overflow-y")=="scroll")){tableStyle.width=_fnStringToCss(table.outerWidth()-barWidth);}sanityWidth=table.outerWidth();}else{if(scrollXInner!==""){tableStyle.width=_fnStringToCss(scrollXInner);sanityWidth=table.outerWidth();}}_fnApplyToChildren(zeroOut,headerSrcEls);_fnApplyToChildren(function(nSizer){headerContent.push(nSizer.innerHTML);headerWidths.push(_fnStringToCss($(nSizer).css("width")));},headerSrcEls);_fnApplyToChildren(function(nToSize,i){nToSize.style.width=headerWidths[i];},headerTrgEls);$(headerSrcEls).height(0);if(footer){_fnApplyToChildren(zeroOut,footerSrcEls);_fnApplyToChildren(function(nSizer){footerWidths.push(_fnStringToCss($(nSizer).css("width")));},footerSrcEls);_fnApplyToChildren(function(nToSize,i){nToSize.style.width=footerWidths[i];},footerTrgEls);$(footerSrcEls).height(0);}_fnApplyToChildren(function(nSizer,i){nSizer.innerHTML='<div class="dataTables_sizing" style="height:0;overflow:hidden;">'+headerContent[i]+"</div>";nSizer.style.width=headerWidths[i];},headerSrcEls);if(footer){_fnApplyToChildren(function(nSizer,i){nSizer.innerHTML="";nSizer.style.width=footerWidths[i];},footerSrcEls);}if(table.outerWidth()<sanityWidth){correction=((divBodyEl.scrollHeight>divBodyEl.offsetHeight||divBody.css("overflow-y")=="scroll"))?sanityWidth+barWidth:sanityWidth;if(ie67&&(divBodyEl.scrollHeight>divBodyEl.offsetHeight||divBody.css("overflow-y")=="scroll")){tableStyle.width=_fnStringToCss(correction-barWidth);}if(scrollX===""||scrollXInner!==""){_fnLog(settings,1,"Possible column misalignment",6);}}else{correction="100%";}divBodyStyle.width=_fnStringToCss(correction);divHeaderStyle.width=_fnStringToCss(correction);if(footer){settings.nScrollFoot.style.width=_fnStringToCss(correction);}if(!scrollY){if(ie67){divBodyStyle.height=_fnStringToCss(tableEl.offsetHeight+barWidth);}}var iOuterWidth=table.outerWidth();divHeaderTable[0].style.width=_fnStringToCss(iOuterWidth);divHeaderInnerStyle.width=_fnStringToCss(iOuterWidth);var bScrolling=table.height()>divBodyEl.clientHeight||divBody.css("overflow-y")=="scroll";var padding="padding"+(browser.bScrollbarLeft?"Left":"Right");divHeaderInnerStyle[padding]=bScrolling?barWidth+"px":"0px";if(footer){divFooterTable[0].style.width=_fnStringToCss(iOuterWidth);divFooterInner[0].style.width=_fnStringToCss(iOuterWidth);divFooterInner[0].style[padding]=bScrolling?barWidth+"px":"0px";}divBody.scroll();if((settings.bSorted||settings.bFiltered)&&!settings._drawHold){divBodyEl.scrollTop=0;}}function _fnApplyToChildren(fn,an1,an2){var index=0,i=0,iLen=an1.length;var nNode1,nNode2;while(i<iLen){nNode1=an1[i].firstChild;nNode2=an2?an2[i].firstChild:null;while(nNode1){if(nNode1.nodeType===1){if(an2){fn(nNode1,nNode2,index);}else{fn(nNode1,index);}index++;}nNode1=nNode1.nextSibling;nNode2=an2?nNode2.nextSibling:null;}i++;}}var __re_html_remove=/<.*?>/g;function _fnCalculateColumnWidths(oSettings){var table=oSettings.nTable,columns=oSettings.aoColumns,scroll=oSettings.oScroll,scrollY=scroll.sY,scrollX=scroll.sX,scrollXInner=scroll.sXInner,columnCount=columns.length,visibleColumns=_fnGetColumns(oSettings,"bVisible"),headerCells=$("th",oSettings.nTHead),tableWidthAttr=table.getAttribute("width"),tableContainer=table.parentNode,userInputs=false,i,column,columnIdx,width,outerWidth,browser=oSettings.oBrowser,ie67=browser.bScrollOversize;var styleWidth=table.style.width;if(styleWidth&&styleWidth.indexOf("%")!==-1){tableWidthAttr=styleWidth;}for(i=0;i<visibleColumns.length;i++){column=columns[visibleColumns[i]];if(column.sWidth!==null){column.sWidth=_fnConvertToWidth(column.sWidthOrig,tableContainer);userInputs=true;}}if(ie67||!userInputs&&!scrollX&&!scrollY&&columnCount==_fnVisbleColumns(oSettings)&&columnCount==headerCells.length){for(i=0;i<columnCount;i++){var colIdx=_fnVisibleToColumnIndex(oSettings,i);if(colIdx!==null){columns[colIdx].sWidth=_fnStringToCss(headerCells.eq(i).width());}}}else{var tmpTable=$(table).clone().css("visibility","hidden").removeAttr("id");tmpTable.find("tbody tr").remove();var tr=$("<tr/>").appendTo(tmpTable.find("tbody"));tmpTable.find("thead, tfoot").remove();tmpTable.append($(oSettings.nTHead).clone()).append($(oSettings.nTFoot).clone());tmpTable.find("tfoot th, tfoot td").css("width","");headerCells=_fnGetUniqueThs(oSettings,tmpTable.find("thead")[0]);for(i=0;i<visibleColumns.length;i++){column=columns[visibleColumns[i]];headerCells[i].style.width=column.sWidthOrig!==null&&column.sWidthOrig!==""?_fnStringToCss(column.sWidthOrig):"";if(column.sWidthOrig&&scrollX){$(headerCells[i]).append($("<div/>").css({width:column.sWidthOrig,margin:0,padding:0,border:0,height:1}));}}if(oSettings.aoData.length){for(i=0;i<visibleColumns.length;i++){columnIdx=visibleColumns[i];column=columns[columnIdx];$(_fnGetWidestNode(oSettings,columnIdx)).clone(false).append(column.sContentPadding).appendTo(tr);}}var holder=$("<div/>").css(scrollX||scrollY?{position:"absolute",top:0,left:0,height:1,right:0,overflow:"hidden"}:{}).append(tmpTable).appendTo(tableContainer);if(scrollX&&scrollXInner){tmpTable.width(scrollXInner);}else{if(scrollX){tmpTable.css("width","auto");tmpTable.removeAttr("width");if(tmpTable.width()<tableContainer.clientWidth&&tableWidthAttr){tmpTable.width(tableContainer.clientWidth);}}else{if(scrollY){tmpTable.width(tableContainer.clientWidth);}else{if(tableWidthAttr){tmpTable.width(tableWidthAttr);}}}}var total=0;for(i=0;i<visibleColumns.length;i++){var cell=$(headerCells[i]);var border=cell.outerWidth()-cell.width();var bounding=browser.bBounding?Math.ceil(headerCells[i].getBoundingClientRect().width):cell.outerWidth();total+=bounding;columns[visibleColumns[i]].sWidth=_fnStringToCss(bounding-border);}table.style.width=_fnStringToCss(total);holder.remove();}if(tableWidthAttr){table.style.width=_fnStringToCss(tableWidthAttr);}if((tableWidthAttr||scrollX)&&!oSettings._reszEvt){var bindResize=function(){$(window).bind("resize.DT-"+oSettings.sInstance,_fnThrottle(function(){_fnAdjustColumnSizing(oSettings);}));};if(ie67){setTimeout(bindResize,1000);}else{bindResize();}oSettings._reszEvt=true;}}function _fnThrottle(fn,freq){var frequency=freq!==undefined?freq:200,last,timer;return function(){var that=this,now=+new Date(),args=arguments;if(last&&now<last+frequency){clearTimeout(timer);timer=setTimeout(function(){last=undefined;fn.apply(that,args);},frequency);}else{last=now;fn.apply(that,args);}};}function _fnConvertToWidth(width,parent){if(!width){return 0;}var n=$("<div/>").css("width",_fnStringToCss(width)).appendTo(parent||document.body);var val=n[0].offsetWidth;n.remove();return val;}function _fnGetWidestNode(settings,colIdx){var idx=_fnGetMaxLenString(settings,colIdx);if(idx<0){return null;}var data=settings.aoData[idx];return !data.nTr?$("<td/>").html(_fnGetCellData(settings,idx,colIdx,"display"))[0]:data.anCells[colIdx];}function _fnGetMaxLenString(settings,colIdx){var s,max=-1,maxIdx=-1;for(var i=0,ien=settings.aoData.length;i<ien;i++){s=_fnGetCellData(settings,i,colIdx,"display")+"";s=s.replace(__re_html_remove,"");s=s.replace(/&nbsp;/g," ");if(s.length>max){max=s.length;maxIdx=i;}}return maxIdx;}function _fnStringToCss(s){if(s===null){return"0px";}if(typeof s=="number"){return s<0?"0px":s+"px";}return s.match(/\d$/)?s+"px":s;}function _fnSortFlatten(settings){var i,iLen,k,kLen,aSort=[],aiOrig=[],aoColumns=settings.aoColumns,aDataSort,iCol,sType,srcCol,fixed=settings.aaSortingFixed,fixedObj=$.isPlainObject(fixed),nestedSort=[],add=function(a){if(a.length&&!$.isArray(a[0])){nestedSort.push(a);}else{$.merge(nestedSort,a);}};if($.isArray(fixed)){add(fixed);}if(fixedObj&&fixed.pre){add(fixed.pre);}add(settings.aaSorting);if(fixedObj&&fixed.post){add(fixed.post);}for(i=0;i<nestedSort.length;i++){srcCol=nestedSort[i][0];aDataSort=aoColumns[srcCol].aDataSort;for(k=0,kLen=aDataSort.length;k<kLen;k++){iCol=aDataSort[k];sType=aoColumns[iCol].sType||"string";if(nestedSort[i]._idx===undefined){nestedSort[i]._idx=$.inArray(nestedSort[i][1],aoColumns[iCol].asSorting);}aSort.push({src:srcCol,col:iCol,dir:nestedSort[i][1],index:nestedSort[i]._idx,type:sType,formatter:DataTable.ext.type.order[sType+"-pre"]});}}return aSort;}function _fnSort(oSettings){var i,ien,iLen,j,jLen,k,kLen,sDataType,nTh,aiOrig=[],oExtSort=DataTable.ext.type.order,aoData=oSettings.aoData,aoColumns=oSettings.aoColumns,aDataSort,data,iCol,sType,oSort,formatters=0,sortCol,displayMaster=oSettings.aiDisplayMaster,aSort;_fnColumnTypes(oSettings);aSort=_fnSortFlatten(oSettings);for(i=0,ien=aSort.length;i<ien;i++){sortCol=aSort[i];if(sortCol.formatter){formatters++;}_fnSortData(oSettings,sortCol.col);}if(_fnDataSource(oSettings)!="ssp"&&aSort.length!==0){for(i=0,iLen=displayMaster.length;i<iLen;i++){aiOrig[displayMaster[i]]=i;}if(formatters===aSort.length){displayMaster.sort(function(a,b){var x,y,k,test,sort,len=aSort.length,dataA=aoData[a]._aSortData,dataB=aoData[b]._aSortData;for(k=0;k<len;k++){sort=aSort[k];x=dataA[sort.col];y=dataB[sort.col];test=x<y?-1:x>y?1:0;if(test!==0){return sort.dir==="asc"?test:-test;}}x=aiOrig[a];y=aiOrig[b];return x<y?-1:x>y?1:0;});}else{displayMaster.sort(function(a,b){var x,y,k,l,test,sort,fn,len=aSort.length,dataA=aoData[a]._aSortData,dataB=aoData[b]._aSortData;for(k=0;k<len;k++){sort=aSort[k];x=dataA[sort.col];y=dataB[sort.col];fn=oExtSort[sort.type+"-"+sort.dir]||oExtSort["string-"+sort.dir];test=fn(x,y);if(test!==0){return test;}}x=aiOrig[a];y=aiOrig[b];return x<y?-1:x>y?1:0;});}}oSettings.bSorted=true;}function _fnSortAria(settings){var label;var nextSort;var columns=settings.aoColumns;var aSort=_fnSortFlatten(settings);var oAria=settings.oLanguage.oAria;for(var i=0,iLen=columns.length;i<iLen;i++){var col=columns[i];var asSorting=col.asSorting;var sTitle=col.sTitle.replace(/<.*?>/g,"");var th=col.nTh;th.removeAttribute("aria-sort");if(col.bSortable){if(aSort.length>0&&aSort[0].col==i){th.setAttribute("aria-sort",aSort[0].dir=="asc"?"ascending":"descending");nextSort=asSorting[aSort[0].index+1]||asSorting[0];}else{nextSort=asSorting[0];}label=sTitle+(nextSort==="asc"?oAria.sSortAscending:oAria.sSortDescending);}else{label=sTitle;}th.setAttribute("aria-label",label);}}function _fnSortListener(settings,colIdx,append,callback){var col=settings.aoColumns[colIdx];var sorting=settings.aaSorting;var asSorting=col.asSorting;var nextSortIdx;var next=function(a,overflow){var idx=a._idx;if(idx===undefined){idx=$.inArray(a[1],asSorting);}return idx+1<asSorting.length?idx+1:overflow?null:0;};if(typeof sorting[0]==="number"){sorting=settings.aaSorting=[sorting];}if(append&&settings.oFeatures.bSortMulti){var sortIdx=$.inArray(colIdx,_pluck(sorting,"0"));if(sortIdx!==-1){nextSortIdx=next(sorting[sortIdx],true);if(nextSortIdx===null&&sorting.length===1){nextSortIdx=0;}if(nextSortIdx===null){sorting.splice(sortIdx,1);}else{sorting[sortIdx][1]=asSorting[nextSortIdx];sorting[sortIdx]._idx=nextSortIdx;}}else{sorting.push([colIdx,asSorting[0],0]);sorting[sorting.length-1]._idx=0;}}else{if(sorting.length&&sorting[0][0]==colIdx){nextSortIdx=next(sorting[0]);sorting.length=1;sorting[0][1]=asSorting[nextSortIdx];sorting[0]._idx=nextSortIdx;}else{sorting.length=0;sorting.push([colIdx,asSorting[0]]);sorting[0]._idx=0;}}_fnReDraw(settings);if(typeof callback=="function"){callback(settings);}}function _fnSortAttachListener(settings,attachTo,colIdx,callback){var col=settings.aoColumns[colIdx];_fnBindAction(attachTo,{},function(e){if(col.bSortable===false){return;}if(settings.oFeatures.bProcessing){_fnProcessingDisplay(settings,true);setTimeout(function(){_fnSortListener(settings,colIdx,e.shiftKey,callback);if(_fnDataSource(settings)!=="ssp"){_fnProcessingDisplay(settings,false);}},0);}else{_fnSortListener(settings,colIdx,e.shiftKey,callback);}});}function _fnSortingClasses(settings){var oldSort=settings.aLastSort;var sortClass=settings.oClasses.sSortColumn;var sort=_fnSortFlatten(settings);var features=settings.oFeatures;var i,ien,colIdx;if(features.bSort&&features.bSortClasses){for(i=0,ien=oldSort.length;i<ien;i++){colIdx=oldSort[i].src;$(_pluck(settings.aoData,"anCells",colIdx)).removeClass(sortClass+(i<2?i+1:3));}for(i=0,ien=sort.length;i<ien;i++){colIdx=sort[i].src;$(_pluck(settings.aoData,"anCells",colIdx)).addClass(sortClass+(i<2?i+1:3));}}settings.aLastSort=sort;}function _fnSortData(settings,idx){var column=settings.aoColumns[idx];var customSort=DataTable.ext.order[column.sSortDataType];var customData;if(customSort){customData=customSort.call(settings.oInstance,settings,idx,_fnColumnIndexToVisible(settings,idx));}var row,cellData;var formatter=DataTable.ext.type.order[column.sType+"-pre"];for(var i=0,ien=settings.aoData.length;i<ien;i++){row=settings.aoData[i];if(!row._aSortData){row._aSortData=[];}if(!row._aSortData[idx]||customSort){cellData=customSort?customData[i]:_fnGetCellData(settings,i,idx,"sort");row._aSortData[idx]=formatter?formatter(cellData):cellData;}}}function _fnSaveState(settings){if(!settings.oFeatures.bStateSave||settings.bDestroying){return;}var state={time:+new Date(),start:settings._iDisplayStart,length:settings._iDisplayLength,order:$.extend(true,[],settings.aaSorting),search:_fnSearchToCamel(settings.oPreviousSearch),columns:$.map(settings.aoColumns,function(col,i){return{visible:col.bVisible,search:_fnSearchToCamel(settings.aoPreSearchCols[i])};})};_fnCallbackFire(settings,"aoStateSaveParams","stateSaveParams",[settings,state]);settings.oSavedState=state;settings.fnStateSaveCallback.call(settings.oInstance,settings,state);}function _fnLoadState(settings,oInit){var i,ien;var columns=settings.aoColumns;if(!settings.oFeatures.bStateSave){return;}var state=settings.fnStateLoadCallback.call(settings.oInstance,settings);if(!state||!state.time){return;}var abStateLoad=_fnCallbackFire(settings,"aoStateLoadParams","stateLoadParams",[settings,state]);if($.inArray(false,abStateLoad)!==-1){return;}var duration=settings.iStateDuration;if(duration>0&&state.time<+new Date()-(duration*1000)){return;}if(columns.length!==state.columns.length){return;}settings.oLoadedState=$.extend(true,{},state);if(state.start!==undefined){settings._iDisplayStart=state.start;settings.iInitDisplayStart=state.start;}if(state.length!==undefined){settings._iDisplayLength=state.length;}if(state.order!==undefined){settings.aaSorting=[];$.each(state.order,function(i,col){settings.aaSorting.push(col[0]>=columns.length?[0,col[1]]:col);});}if(state.search!==undefined){$.extend(settings.oPreviousSearch,_fnSearchToHung(state.search));}for(i=0,ien=state.columns.length;i<ien;i++){var col=state.columns[i];if(col.visible!==undefined){columns[i].bVisible=col.visible;}if(col.search!==undefined){$.extend(settings.aoPreSearchCols[i],_fnSearchToHung(col.search));}}_fnCallbackFire(settings,"aoStateLoaded","stateLoaded",[settings,state]);}function _fnSettingsFromNode(table){var settings=DataTable.settings;var idx=$.inArray(table,_pluck(settings,"nTable"));return idx!==-1?settings[idx]:null;}function _fnLog(settings,level,msg,tn){msg="DataTables warning: "+(settings?"table id="+settings.sTableId+" - ":"")+msg;if(tn){msg+=". For more information about this error, please see http://datatables.net/tn/"+tn;}if(!level){var ext=DataTable.ext;var type=ext.sErrMode||ext.errMode;if(settings){_fnCallbackFire(settings,null,"error",[settings,tn,msg]);}if(type=="alert"){alert(msg);}else{if(type=="throw"){throw new Error(msg);}else{if(typeof type=="function"){type(settings,tn,msg);}}}}else{if(window.console&&console.log){console.log(msg);}}}function _fnMap(ret,src,name,mappedName){if($.isArray(name)){$.each(name,function(i,val){if($.isArray(val)){_fnMap(ret,src,val[0],val[1]);}else{_fnMap(ret,src,val);}});return;}if(mappedName===undefined){mappedName=name;}if(src[name]!==undefined){ret[mappedName]=src[name];}}function _fnExtend(out,extender,breakRefs){var val;for(var prop in extender){if(extender.hasOwnProperty(prop)){val=extender[prop];if($.isPlainObject(val)){if(!$.isPlainObject(out[prop])){out[prop]={};}$.extend(true,out[prop],val);}else{if(breakRefs&&prop!=="data"&&prop!=="aaData"&&$.isArray(val)){out[prop]=val.slice();}else{out[prop]=val;}}}}return out;}function _fnBindAction(n,oData,fn){$(n).bind("click.DT",oData,function(e){n.blur();fn(e);}).bind("keypress.DT",oData,function(e){if(e.which===13){e.preventDefault();fn(e);}}).bind("selectstart.DT",function(){return false;});}function _fnCallbackReg(oSettings,sStore,fn,sName){if(fn){oSettings[sStore].push({fn:fn,sName:sName});}}function _fnCallbackFire(settings,callbackArr,eventName,args){var ret=[];if(callbackArr){ret=$.map(settings[callbackArr].slice().reverse(),function(val,i){return val.fn.apply(settings.oInstance,args);});}if(eventName!==null){var e=$.Event(eventName+".dt");$(settings.nTable).trigger(e,args);ret.push(e.result);}return ret;}function _fnLengthOverflow(settings){var start=settings._iDisplayStart,end=settings.fnDisplayEnd(),len=settings._iDisplayLength;if(start>=end){start=end-len;}start-=(start%len);if(len===-1||start<0){start=0;}settings._iDisplayStart=start;}function _fnRenderer(settings,type){var renderer=settings.renderer;var host=DataTable.ext.renderer[type];if($.isPlainObject(renderer)&&renderer[type]){return host[renderer[type]]||host._;}else{if(typeof renderer==="string"){return host[renderer]||host._;}}return host._;}function _fnDataSource(settings){if(settings.oFeatures.bServerSide){return"ssp";}else{if(settings.ajax||settings.sAjaxSource){return"ajax";}}return"dom";}DataTable=function(options){this.$=function(sSelector,oOpts){return this.api(true).$(sSelector,oOpts);};this._=function(sSelector,oOpts){return this.api(true).rows(sSelector,oOpts).data();};this.api=function(traditional){return traditional?new _Api(_fnSettingsFromNode(this[_ext.iApiIndex])):new _Api(this);};this.fnAddData=function(data,redraw){var api=this.api(true);var rows=$.isArray(data)&&($.isArray(data[0])||$.isPlainObject(data[0]))?api.rows.add(data):api.row.add(data);if(redraw===undefined||redraw){api.draw();}return rows.flatten().toArray();};this.fnAdjustColumnSizing=function(bRedraw){var api=this.api(true).columns.adjust();var settings=api.settings()[0];var scroll=settings.oScroll;if(bRedraw===undefined||bRedraw){api.draw(false);}else{if(scroll.sX!==""||scroll.sY!==""){_fnScrollDraw(settings);}}};this.fnClearTable=function(bRedraw){var api=this.api(true).clear();if(bRedraw===undefined||bRedraw){api.draw();}};this.fnClose=function(nTr){this.api(true).row(nTr).child.hide();};this.fnDeleteRow=function(target,callback,redraw){var api=this.api(true);var rows=api.rows(target);var settings=rows.settings()[0];var data=settings.aoData[rows[0][0]];rows.remove();if(callback){callback.call(this,settings,data);}if(redraw===undefined||redraw){api.draw();}return data;};this.fnDestroy=function(remove){this.api(true).destroy(remove);};this.fnDraw=function(complete){this.api(true).draw(complete);};this.fnFilter=function(sInput,iColumn,bRegex,bSmart,bShowGlobal,bCaseInsensitive){var api=this.api(true);if(iColumn===null||iColumn===undefined){api.search(sInput,bRegex,bSmart,bCaseInsensitive);}else{api.column(iColumn).search(sInput,bRegex,bSmart,bCaseInsensitive);}api.draw();};this.fnGetData=function(src,col){var api=this.api(true);if(src!==undefined){var type=src.nodeName?src.nodeName.toLowerCase():"";return col!==undefined||type=="td"||type=="th"?api.cell(src,col).data():api.row(src).data()||null;}return api.data().toArray();};this.fnGetNodes=function(iRow){var api=this.api(true);return iRow!==undefined?api.row(iRow).node():api.rows().nodes().flatten().toArray();};this.fnGetPosition=function(node){var api=this.api(true);var nodeName=node.nodeName.toUpperCase();if(nodeName=="TR"){return api.row(node).index();}else{if(nodeName=="TD"||nodeName=="TH"){var cell=api.cell(node).index();return[cell.row,cell.columnVisible,cell.column];}}return null;};this.fnIsOpen=function(nTr){return this.api(true).row(nTr).child.isShown();};this.fnOpen=function(nTr,mHtml,sClass){return this.api(true).row(nTr).child(mHtml,sClass).show().child()[0];};this.fnPageChange=function(mAction,bRedraw){var api=this.api(true).page(mAction);if(bRedraw===undefined||bRedraw){api.draw(false);}};this.fnSetColumnVis=function(iCol,bShow,bRedraw){var api=this.api(true).column(iCol).visible(bShow);if(bRedraw===undefined||bRedraw){api.columns.adjust().draw();}};this.fnSettings=function(){return _fnSettingsFromNode(this[_ext.iApiIndex]);};this.fnSort=function(aaSort){this.api(true).order(aaSort).draw();};this.fnSortListener=function(nNode,iColumn,fnCallback){this.api(true).order.listener(nNode,iColumn,fnCallback);};this.fnUpdate=function(mData,mRow,iColumn,bRedraw,bAction){var api=this.api(true);if(iColumn===undefined||iColumn===null){api.row(mRow).data(mData);}else{api.cell(mRow,iColumn).data(mData);}if(bAction===undefined||bAction){api.columns.adjust();}if(bRedraw===undefined||bRedraw){api.draw();}return 0;};this.fnVersionCheck=_ext.fnVersionCheck;var _that=this;var emptyInit=options===undefined;var len=this.length;if(emptyInit){options={};}this.oApi=this.internal=_ext.internal;for(var fn in DataTable.ext.internal){if(fn){this[fn]=_fnExternApiFunc(fn);}}this.each(function(){var o={};var oInit=len>1?_fnExtend(o,options,true):options;var i=0,iLen,j,jLen,k,kLen;var sId=this.getAttribute("id");var bInitHandedOff=false;var defaults=DataTable.defaults;var $this=$(this);if(this.nodeName.toLowerCase()!="table"){_fnLog(null,0,"Non-table node initialisation ("+this.nodeName+")",2);return;}_fnCompatOpts(defaults);_fnCompatCols(defaults.column);_fnCamelToHungarian(defaults,defaults,true);_fnCamelToHungarian(defaults.column,defaults.column,true);_fnCamelToHungarian(defaults,$.extend(oInit,$this.data()));var allSettings=DataTable.settings;for(i=0,iLen=allSettings.length;i<iLen;i++){var s=allSettings[i];if(s.nTable==this||s.nTHead.parentNode==this||(s.nTFoot&&s.nTFoot.parentNode==this)){var bRetrieve=oInit.bRetrieve!==undefined?oInit.bRetrieve:defaults.bRetrieve;var bDestroy=oInit.bDestroy!==undefined?oInit.bDestroy:defaults.bDestroy;if(emptyInit||bRetrieve){return s.oInstance;}else{if(bDestroy){s.oInstance.fnDestroy();break;}else{_fnLog(s,0,"Cannot reinitialise DataTable",3);return;}}}if(s.sTableId==this.id){allSettings.splice(i,1);break;}}if(sId===null||sId===""){sId="DataTables_Table_"+(DataTable.ext._unique++);this.id=sId;}var oSettings=$.extend(true,{},DataTable.models.oSettings,{sDestroyWidth:$this[0].style.width,sInstance:sId,sTableId:sId});oSettings.nTable=this;oSettings.oApi=_that.internal;oSettings.oInit=oInit;allSettings.push(oSettings);oSettings.oInstance=(_that.length===1)?_that:$this.dataTable();_fnCompatOpts(oInit);if(oInit.oLanguage){_fnLanguageCompat(oInit.oLanguage);}if(oInit.aLengthMenu&&!oInit.iDisplayLength){oInit.iDisplayLength=$.isArray(oInit.aLengthMenu[0])?oInit.aLengthMenu[0][0]:oInit.aLengthMenu[0];}oInit=_fnExtend($.extend(true,{},defaults),oInit);_fnMap(oSettings.oFeatures,oInit,["bPaginate","bLengthChange","bFilter","bSort","bSortMulti","bInfo","bProcessing","bAutoWidth","bSortClasses","bServerSide","bDeferRender"]);_fnMap(oSettings,oInit,["asStripeClasses","ajax","fnServerData","fnFormatNumber","sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource","sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback","renderer","searchDelay","rowId",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"],["bJQueryUI","bJUI"]]);_fnMap(oSettings.oScroll,oInit,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]);_fnMap(oSettings.oLanguage,oInit,"fnInfoCallback");_fnCallbackReg(oSettings,"aoDrawCallback",oInit.fnDrawCallback,"user");_fnCallbackReg(oSettings,"aoServerParams",oInit.fnServerParams,"user");_fnCallbackReg(oSettings,"aoStateSaveParams",oInit.fnStateSaveParams,"user");_fnCallbackReg(oSettings,"aoStateLoadParams",oInit.fnStateLoadParams,"user");_fnCallbackReg(oSettings,"aoStateLoaded",oInit.fnStateLoaded,"user");_fnCallbackReg(oSettings,"aoRowCallback",oInit.fnRowCallback,"user");_fnCallbackReg(oSettings,"aoRowCreatedCallback",oInit.fnCreatedRow,"user");_fnCallbackReg(oSettings,"aoHeaderCallback",oInit.fnHeaderCallback,"user");_fnCallbackReg(oSettings,"aoFooterCallback",oInit.fnFooterCallback,"user");_fnCallbackReg(oSettings,"aoInitComplete",oInit.fnInitComplete,"user");_fnCallbackReg(oSettings,"aoPreDrawCallback",oInit.fnPreDrawCallback,"user");oSettings.rowIdFn=_fnGetObjectDataFn(oInit.rowId);_fnBrowserDetect(oSettings);var oClasses=oSettings.oClasses;if(oInit.bJQueryUI){$.extend(oClasses,DataTable.ext.oJUIClasses,oInit.oClasses);if(oInit.sDom===defaults.sDom&&defaults.sDom==="lfrtip"){oSettings.sDom='<"H"lfr>t<"F"ip>';}if(!oSettings.renderer){oSettings.renderer="jqueryui";}else{if($.isPlainObject(oSettings.renderer)&&!oSettings.renderer.header){oSettings.renderer.header="jqueryui";}}}else{$.extend(oClasses,DataTable.ext.classes,oInit.oClasses);}$this.addClass(oClasses.sTable);if(oSettings.iInitDisplayStart===undefined){oSettings.iInitDisplayStart=oInit.iDisplayStart;oSettings._iDisplayStart=oInit.iDisplayStart;}if(oInit.iDeferLoading!==null){oSettings.bDeferLoading=true;var tmp=$.isArray(oInit.iDeferLoading);oSettings._iRecordsDisplay=tmp?oInit.iDeferLoading[0]:oInit.iDeferLoading;oSettings._iRecordsTotal=tmp?oInit.iDeferLoading[1]:oInit.iDeferLoading;}var oLanguage=oSettings.oLanguage;$.extend(true,oLanguage,oInit.oLanguage);if(oLanguage.sUrl!==""){$.ajax({dataType:"json",url:oLanguage.sUrl,success:function(json){_fnLanguageCompat(json);_fnCamelToHungarian(defaults.oLanguage,json);$.extend(true,oLanguage,json);_fnInitialise(oSettings);},error:function(){_fnInitialise(oSettings);}});bInitHandedOff=true;}if(oInit.asStripeClasses===null){oSettings.asStripeClasses=[oClasses.sStripeOdd,oClasses.sStripeEven];}var stripeClasses=oSettings.asStripeClasses;var rowOne=$this.children("tbody").find("tr").eq(0);if($.inArray(true,$.map(stripeClasses,function(el,i){return rowOne.hasClass(el);}))!==-1){$("tbody tr",this).removeClass(stripeClasses.join(" "));oSettings.asDestroyStripes=stripeClasses.slice();}var anThs=[];var aoColumnsInit;var nThead=this.getElementsByTagName("thead");if(nThead.length!==0){_fnDetectHeader(oSettings.aoHeader,nThead[0]);anThs=_fnGetUniqueThs(oSettings);}if(oInit.aoColumns===null){aoColumnsInit=[];for(i=0,iLen=anThs.length;i<iLen;i++){aoColumnsInit.push(null);}}else{aoColumnsInit=oInit.aoColumns;}for(i=0,iLen=aoColumnsInit.length;i<iLen;i++){_fnAddColumn(oSettings,anThs?anThs[i]:null);}_fnApplyColumnDefs(oSettings,oInit.aoColumnDefs,aoColumnsInit,function(iCol,oDef){_fnColumnOptions(oSettings,iCol,oDef);});if(rowOne.length){var a=function(cell,name){return cell.getAttribute("data-"+name)!==null?name:null;};$(rowOne[0]).children("th, td").each(function(i,cell){var col=oSettings.aoColumns[i];if(col.mData===i){var sort=a(cell,"sort")||a(cell,"order");var filter=a(cell,"filter")||a(cell,"search");if(sort!==null||filter!==null){col.mData={_:i+".display",sort:sort!==null?i+".@data-"+sort:undefined,type:sort!==null?i+".@data-"+sort:undefined,filter:filter!==null?i+".@data-"+filter:undefined};_fnColumnOptions(oSettings,i);}}});}var features=oSettings.oFeatures;if(oInit.bStateSave){features.bStateSave=true;_fnLoadState(oSettings,oInit);_fnCallbackReg(oSettings,"aoDrawCallback",_fnSaveState,"state_save");}if(oInit.aaSorting===undefined){var sorting=oSettings.aaSorting;for(i=0,iLen=sorting.length;i<iLen;i++){sorting[i][1]=oSettings.aoColumns[i].asSorting[0];}}_fnSortingClasses(oSettings);if(features.bSort){_fnCallbackReg(oSettings,"aoDrawCallback",function(){if(oSettings.bSorted){var aSort=_fnSortFlatten(oSettings);var sortedColumns={};$.each(aSort,function(i,val){sortedColumns[val.src]=val.dir;});_fnCallbackFire(oSettings,null,"order",[oSettings,aSort,sortedColumns]);_fnSortAria(oSettings);}});}_fnCallbackReg(oSettings,"aoDrawCallback",function(){if(oSettings.bSorted||_fnDataSource(oSettings)==="ssp"||features.bDeferRender){_fnSortingClasses(oSettings);}},"sc");var captions=$this.children("caption").each(function(){this._captionSide=$this.css("caption-side");});var thead=$this.children("thead");if(thead.length===0){thead=$("<thead/>").appendTo(this);}oSettings.nTHead=thead[0];var tbody=$this.children("tbody");if(tbody.length===0){tbody=$("<tbody/>").appendTo(this);}oSettings.nTBody=tbody[0];var tfoot=$this.children("tfoot");if(tfoot.length===0&&captions.length>0&&(oSettings.oScroll.sX!==""||oSettings.oScroll.sY!=="")){tfoot=$("<tfoot/>").appendTo(this);}if(tfoot.length===0||tfoot.children().length===0){$this.addClass(oClasses.sNoFooter);}else{if(tfoot.length>0){oSettings.nTFoot=tfoot[0];_fnDetectHeader(oSettings.aoFooter,oSettings.nTFoot);}}if(oInit.aaData){for(i=0;i<oInit.aaData.length;i++){_fnAddData(oSettings,oInit.aaData[i]);}}else{if(oSettings.bDeferLoading||_fnDataSource(oSettings)=="dom"){_fnAddTr(oSettings,$(oSettings.nTBody).children("tr"));}}oSettings.aiDisplay=oSettings.aiDisplayMaster.slice();oSettings.bInitialised=true;if(bInitHandedOff===false){_fnInitialise(oSettings);}});_that=null;return this;};var __apiStruct=[];var __arrayProto=Array.prototype;var _toSettings=function(mixed){var idx,jq;var settings=DataTable.settings;var tables=$.map(settings,function(el,i){return el.nTable;});if(!mixed){return[];}else{if(mixed.nTable&&mixed.oApi){return[mixed];}else{if(mixed.nodeName&&mixed.nodeName.toLowerCase()==="table"){idx=$.inArray(mixed,tables);return idx!==-1?[settings[idx]]:null;}else{if(mixed&&typeof mixed.settings==="function"){return mixed.settings().toArray();}else{if(typeof mixed==="string"){jq=$(mixed);}else{if(mixed instanceof $){jq=mixed;}}}}}}if(jq){return jq.map(function(i){idx=$.inArray(this,tables);return idx!==-1?settings[idx]:null;}).toArray();}};_Api=function(context,data){if(!(this instanceof _Api)){return new _Api(context,data);}var settings=[];var ctxSettings=function(o){var a=_toSettings(o);if(a){settings=settings.concat(a);}};if($.isArray(context)){for(var i=0,ien=context.length;i<ien;i++){ctxSettings(context[i]);}}else{ctxSettings(context);}this.context=_unique(settings);if(data){$.merge(this,data);}this.selector={rows:null,cols:null,opts:null};_Api.extend(this,this,__apiStruct);};DataTable.Api=_Api;$.extend(_Api.prototype,{any:function(){return this.count()!==0;},concat:__arrayProto.concat,context:[],count:function(){return this.flatten().length;},each:function(fn){for(var i=0,ien=this.length;i<ien;i++){fn.call(this,this[i],i,this);}return this;},eq:function(idx){var ctx=this.context;return ctx.length>idx?new _Api(ctx[idx],this[idx]):null;},filter:function(fn){var a=[];if(__arrayProto.filter){a=__arrayProto.filter.call(this,fn,this);}else{for(var i=0,ien=this.length;i<ien;i++){if(fn.call(this,this[i],i,this)){a.push(this[i]);}}}return new _Api(this.context,a);},flatten:function(){var a=[];return new _Api(this.context,a.concat.apply(a,this.toArray()));},join:__arrayProto.join,indexOf:__arrayProto.indexOf||function(obj,start){for(var i=(start||0),ien=this.length;i<ien;i++){if(this[i]===obj){return i;}}return -1;},iterator:function(flatten,type,fn,alwaysNew){var a=[],ret,i,ien,j,jen,context=this.context,rows,items,item,selector=this.selector;if(typeof flatten==="string"){alwaysNew=fn;fn=type;type=flatten;flatten=false;}for(i=0,ien=context.length;i<ien;i++){var apiInst=new _Api(context[i]);if(type==="table"){ret=fn.call(apiInst,context[i],i);if(ret!==undefined){a.push(ret);}}else{if(type==="columns"||type==="rows"){ret=fn.call(apiInst,context[i],this[i],i);if(ret!==undefined){a.push(ret);}}else{if(type==="column"||type==="column-rows"||type==="row"||type==="cell"){items=this[i];if(type==="column-rows"){rows=_selector_row_indexes(context[i],selector.opts);}for(j=0,jen=items.length;j<jen;j++){item=items[j];if(type==="cell"){ret=fn.call(apiInst,context[i],item.row,item.column,i,j);}else{ret=fn.call(apiInst,context[i],item,i,j,rows);}if(ret!==undefined){a.push(ret);}}}}}}if(a.length||alwaysNew){var api=new _Api(context,flatten?a.concat.apply([],a):a);var apiSelector=api.selector;apiSelector.rows=selector.rows;apiSelector.cols=selector.cols;apiSelector.opts=selector.opts;return api;}return this;},lastIndexOf:__arrayProto.lastIndexOf||function(obj,start){return this.indexOf.apply(this.toArray.reverse(),arguments);},length:0,map:function(fn){var a=[];if(__arrayProto.map){a=__arrayProto.map.call(this,fn,this);}else{for(var i=0,ien=this.length;i<ien;i++){a.push(fn.call(this,this[i],i));}}return new _Api(this.context,a);},pluck:function(prop){return this.map(function(el){return el[prop];});},pop:__arrayProto.pop,push:__arrayProto.push,reduce:__arrayProto.reduce||function(fn,init){return _fnReduce(this,fn,init,0,this.length,1);},reduceRight:__arrayProto.reduceRight||function(fn,init){return _fnReduce(this,fn,init,this.length-1,-1,-1);},reverse:__arrayProto.reverse,selector:null,shift:__arrayProto.shift,sort:__arrayProto.sort,splice:__arrayProto.splice,toArray:function(){return __arrayProto.slice.call(this);},to$:function(){return $(this);},toJQuery:function(){return $(this);},unique:function(){return new _Api(this.context,_unique(this));},unshift:__arrayProto.unshift});_Api.extend=function(scope,obj,ext){if(!ext.length||!obj||(!(obj instanceof _Api)&&!obj.__dt_wrapper)){return;}var i,ien,j,jen,struct,inner,methodScoping=function(scope,fn,struc){return function(){var ret=fn.apply(scope,arguments);_Api.extend(ret,ret,struc.methodExt);return ret;};};for(i=0,ien=ext.length;i<ien;i++){struct=ext[i];obj[struct.name]=typeof struct.val==="function"?methodScoping(scope,struct.val,struct):$.isPlainObject(struct.val)?{}:struct.val;obj[struct.name].__dt_wrapper=true;_Api.extend(scope,obj[struct.name],struct.propExt);}};_Api.register=_api_register=function(name,val){if($.isArray(name)){for(var j=0,jen=name.length;j<jen;j++){_Api.register(name[j],val);}return;}var i,ien,heir=name.split("."),struct=__apiStruct,key,method;var find=function(src,name){for(var i=0,ien=src.length;i<ien;i++){if(src[i].name===name){return src[i];}}return null;};for(i=0,ien=heir.length;i<ien;i++){method=heir[i].indexOf("()")!==-1;key=method?heir[i].replace("()",""):heir[i];var src=find(struct,key);if(!src){src={name:key,val:{},methodExt:[],propExt:[]};struct.push(src);}if(i===ien-1){src.val=val;}else{struct=method?src.methodExt:src.propExt;}}};_Api.registerPlural=_api_registerPlural=function(pluralName,singularName,val){_Api.register(pluralName,val);_Api.register(singularName,function(){var ret=val.apply(this,arguments);if(ret===this){return this;}else{if(ret instanceof _Api){return ret.length?$.isArray(ret[0])?new _Api(ret.context,ret[0]):ret[0]:undefined;}}return ret;});};var __table_selector=function(selector,a){if(typeof selector==="number"){return[a[selector]];}var nodes=$.map(a,function(el,i){return el.nTable;});return $(nodes).filter(selector).map(function(i){var idx=$.inArray(this,nodes);return a[idx];}).toArray();};_api_register("tables()",function(selector){return selector?new _Api(__table_selector(selector,this.context)):this;});_api_register("table()",function(selector){var tables=this.tables(selector);var ctx=tables.context;return ctx.length?new _Api(ctx[0]):tables;});_api_registerPlural("tables().nodes()","table().node()",function(){return this.iterator("table",function(ctx){return ctx.nTable;},1);});_api_registerPlural("tables().body()","table().body()",function(){return this.iterator("table",function(ctx){return ctx.nTBody;},1);});_api_registerPlural("tables().header()","table().header()",function(){return this.iterator("table",function(ctx){return ctx.nTHead;},1);});_api_registerPlural("tables().footer()","table().footer()",function(){return this.iterator("table",function(ctx){return ctx.nTFoot;},1);});_api_registerPlural("tables().containers()","table().container()",function(){return this.iterator("table",function(ctx){return ctx.nTableWrapper;},1);});_api_register("draw()",function(paging){return this.iterator("table",function(settings){if(paging==="page"){_fnDraw(settings);}else{if(typeof paging==="string"){paging=paging==="full-hold"?false:true;}_fnReDraw(settings,paging===false);}});});_api_register("page()",function(action){if(action===undefined){return this.page.info().page;}return this.iterator("table",function(settings){_fnPageChange(settings,action);});});_api_register("page.info()",function(action){if(this.context.length===0){return undefined;}var settings=this.context[0],start=settings._iDisplayStart,len=settings.oFeatures.bPaginate?settings._iDisplayLength:-1,visRecords=settings.fnRecordsDisplay(),all=len===-1;return{page:all?0:Math.floor(start/len),pages:all?1:Math.ceil(visRecords/len),start:start,end:settings.fnDisplayEnd(),length:len,recordsTotal:settings.fnRecordsTotal(),recordsDisplay:visRecords,serverSide:_fnDataSource(settings)==="ssp"};});_api_register("page.len()",function(len){if(len===undefined){return this.context.length!==0?this.context[0]._iDisplayLength:undefined;}return this.iterator("table",function(settings){_fnLengthChange(settings,len);});});var __reload=function(settings,holdPosition,callback){if(callback){var api=new _Api(settings);api.one("draw",function(){callback(api.ajax.json());});}if(_fnDataSource(settings)=="ssp"){_fnReDraw(settings,holdPosition);}else{_fnProcessingDisplay(settings,true);var xhr=settings.jqXHR;if(xhr&&xhr.readyState!==4){xhr.abort();}_fnBuildAjax(settings,[],function(json){_fnClearTable(settings);var data=_fnAjaxDataSrc(settings,json);for(var i=0,ien=data.length;i<ien;i++){_fnAddData(settings,data[i]);}_fnReDraw(settings,holdPosition);_fnProcessingDisplay(settings,false);});}};_api_register("ajax.json()",function(){var ctx=this.context;if(ctx.length>0){return ctx[0].json;}});_api_register("ajax.params()",function(){var ctx=this.context;if(ctx.length>0){return ctx[0].oAjaxData;}});_api_register("ajax.reload()",function(callback,resetPaging){return this.iterator("table",function(settings){__reload(settings,resetPaging===false,callback);});});_api_register("ajax.url()",function(url){var ctx=this.context;if(url===undefined){if(ctx.length===0){return undefined;}ctx=ctx[0];return ctx.ajax?$.isPlainObject(ctx.ajax)?ctx.ajax.url:ctx.ajax:ctx.sAjaxSource;}return this.iterator("table",function(settings){if($.isPlainObject(settings.ajax)){settings.ajax.url=url;}else{settings.ajax=url;}});});_api_register("ajax.url().load()",function(callback,resetPaging){return this.iterator("table",function(ctx){__reload(ctx,resetPaging===false,callback);});});var _selector_run=function(type,selector,selectFn,settings,opts){var out=[],res,a,i,ien,j,jen,selectorType=typeof selector;if(!selector||selectorType==="string"||selectorType==="function"||selector.length===undefined){selector=[selector];}for(i=0,ien=selector.length;i<ien;i++){a=selector[i]&&selector[i].split?selector[i].split(","):[selector[i]];for(j=0,jen=a.length;j<jen;j++){res=selectFn(typeof a[j]==="string"?$.trim(a[j]):a[j]);if(res&&res.length){out=out.concat(res);}}}var ext=_ext.selector[type];if(ext.length){for(i=0,ien=ext.length;i<ien;i++){out=ext[i](settings,opts,out);}}return _unique(out);};var _selector_opts=function(opts){if(!opts){opts={};}if(opts.filter&&opts.search===undefined){opts.search=opts.filter;}return $.extend({search:"none",order:"current",page:"all"},opts);};var _selector_first=function(inst){for(var i=0,ien=inst.length;i<ien;i++){if(inst[i].length>0){inst[0]=inst[i];inst[0].length=1;inst.length=1;inst.context=[inst.context[i]];return inst;}}inst.length=0;return inst;};var _selector_row_indexes=function(settings,opts){var i,ien,tmp,a=[],displayFiltered=settings.aiDisplay,displayMaster=settings.aiDisplayMaster;var search=opts.search,order=opts.order,page=opts.page;if(_fnDataSource(settings)=="ssp"){return search==="removed"?[]:_range(0,displayMaster.length);}else{if(page=="current"){for(i=settings._iDisplayStart,ien=settings.fnDisplayEnd();i<ien;i++){a.push(displayFiltered[i]);}}else{if(order=="current"||order=="applied"){a=search=="none"?displayMaster.slice():search=="applied"?displayFiltered.slice():$.map(displayMaster,function(el,i){return $.inArray(el,displayFiltered)===-1?el:null;});}else{if(order=="index"||order=="original"){for(i=0,ien=settings.aoData.length;i<ien;i++){if(search=="none"){a.push(i);}else{tmp=$.inArray(i,displayFiltered);if((tmp===-1&&search=="removed")||(tmp>=0&&search=="applied")){a.push(i);}}}}}}}return a;};var __row_selector=function(settings,selector,opts){var run=function(sel){var selInt=_intVal(sel);var i,ien;if(selInt!==null&&!opts){return[selInt];}var rows=_selector_row_indexes(settings,opts);if(selInt!==null&&$.inArray(selInt,rows)!==-1){return[selInt];}else{if(!sel){return rows;}}if(typeof sel==="function"){return $.map(rows,function(idx){var row=settings.aoData[idx];return sel(idx,row._aData,row.nTr)?idx:null;});}var nodes=_removeEmpty(_pluck_order(settings.aoData,rows,"nTr"));if(sel.nodeName){if($.inArray(sel,nodes)!==-1){return[sel._DT_RowIndex];}}if(typeof sel==="string"&&sel.charAt(0)==="#"){var rowObj=settings.aIds[sel.replace(/^#/,"")];if(rowObj!==undefined){return[rowObj.idx];}}return $(nodes).filter(sel).map(function(){return this._DT_RowIndex;}).toArray();};return _selector_run("row",selector,run,settings,opts);};_api_register("rows()",function(selector,opts){if(selector===undefined){selector="";}else{if($.isPlainObject(selector)){opts=selector;selector="";}}opts=_selector_opts(opts);var inst=this.iterator("table",function(settings){return __row_selector(settings,selector,opts);},1);inst.selector.rows=selector;inst.selector.opts=opts;return inst;});_api_register("rows().nodes()",function(){return this.iterator("row",function(settings,row){return settings.aoData[row].nTr||undefined;},1);});_api_register("rows().data()",function(){return this.iterator(true,"rows",function(settings,rows){return _pluck_order(settings.aoData,rows,"_aData");},1);});_api_registerPlural("rows().cache()","row().cache()",function(type){return this.iterator("row",function(settings,row){var r=settings.aoData[row];return type==="search"?r._aFilterData:r._aSortData;},1);});_api_registerPlural("rows().invalidate()","row().invalidate()",function(src){return this.iterator("row",function(settings,row){_fnInvalidate(settings,row,src);});});_api_registerPlural("rows().indexes()","row().index()",function(){return this.iterator("row",function(settings,row){return row;},1);});_api_registerPlural("rows().ids()","row().id()",function(hash){var a=[];var context=this.context;for(var i=0,ien=context.length;i<ien;i++){for(var j=0,jen=this[i].length;j<jen;j++){var id=context[i].rowIdFn(context[i].aoData[this[i][j]]._aData);a.push((hash===true?"#":"")+id);}}return new _Api(context,a);});_api_registerPlural("rows().remove()","row().remove()",function(){var that=this;this.iterator("row",function(settings,row,thatIdx){var data=settings.aoData;var rowData=data[row];var i,ien,j,jen;var loopRow,loopCells;data.splice(row,1);for(i=0,ien=data.length;i<ien;i++){loopRow=data[i];loopCells=loopRow.anCells;if(loopRow.nTr!==null){loopRow.nTr._DT_RowIndex=i;}if(loopCells!==null){for(j=0,jen=loopCells.length;j<jen;j++){loopCells[j]._DT_CellIndex.row=i;}}}_fnDeleteIndex(settings.aiDisplayMaster,row);_fnDeleteIndex(settings.aiDisplay,row);_fnDeleteIndex(that[thatIdx],row,false);_fnLengthOverflow(settings);var id=settings.rowIdFn(rowData._aData);if(id!==undefined){delete settings.aIds[id];}});this.iterator("table",function(settings){for(var i=0,ien=settings.aoData.length;i<ien;i++){settings.aoData[i].idx=i;}});return this;});_api_register("rows.add()",function(rows){var newRows=this.iterator("table",function(settings){var row,i,ien;var out=[];for(i=0,ien=rows.length;i<ien;i++){row=rows[i];if(row.nodeName&&row.nodeName.toUpperCase()==="TR"){out.push(_fnAddTr(settings,row)[0]);}else{out.push(_fnAddData(settings,row));}}return out;},1);var modRows=this.rows(-1);modRows.pop();$.merge(modRows,newRows);return modRows;});_api_register("row()",function(selector,opts){return _selector_first(this.rows(selector,opts));});_api_register("row().data()",function(data){var ctx=this.context;if(data===undefined){return ctx.length&&this.length?ctx[0].aoData[this[0]]._aData:undefined;}ctx[0].aoData[this[0]]._aData=data;_fnInvalidate(ctx[0],this[0],"data");return this;});_api_register("row().node()",function(){var ctx=this.context;return ctx.length&&this.length?ctx[0].aoData[this[0]].nTr||null:null;});_api_register("row.add()",function(row){if(row instanceof $&&row.length){row=row[0];}var rows=this.iterator("table",function(settings){if(row.nodeName&&row.nodeName.toUpperCase()==="TR"){return _fnAddTr(settings,row)[0];}return _fnAddData(settings,row);});return this.row(rows[0]);});var __details_add=function(ctx,row,data,klass){var rows=[];var addRow=function(r,k){if($.isArray(r)||r instanceof $){for(var i=0,ien=r.length;i<ien;i++){addRow(r[i],k);}return;}if(r.nodeName&&r.nodeName.toLowerCase()==="tr"){rows.push(r);}else{var created=$("<tr><td/></tr>").addClass(k);$("td",created).addClass(k).html(r)[0].colSpan=_fnVisbleColumns(ctx);rows.push(created[0]);}};addRow(data,klass);if(row._details){row._details.remove();}row._details=$(rows);if(row._detailsShow){row._details.insertAfter(row.nTr);}};var __details_remove=function(api,idx){var ctx=api.context;if(ctx.length){var row=ctx[0].aoData[idx!==undefined?idx:api[0]];if(row&&row._details){row._details.remove();row._detailsShow=undefined;row._details=undefined;}}};var __details_display=function(api,show){var ctx=api.context;if(ctx.length&&api.length){var row=ctx[0].aoData[api[0]];if(row._details){row._detailsShow=show;if(show){row._details.insertAfter(row.nTr);}else{row._details.detach();}__details_events(ctx[0]);}}};var __details_events=function(settings){var api=new _Api(settings);var namespace=".dt.DT_details";var drawEvent="draw"+namespace;var colvisEvent="column-visibility"+namespace;var destroyEvent="destroy"+namespace;var data=settings.aoData;api.off(drawEvent+" "+colvisEvent+" "+destroyEvent);if(_pluck(data,"_details").length>0){api.on(drawEvent,function(e,ctx){if(settings!==ctx){return;}api.rows({page:"current"}).eq(0).each(function(idx){var row=data[idx];if(row._detailsShow){row._details.insertAfter(row.nTr);}});});api.on(colvisEvent,function(e,ctx,idx,vis){if(settings!==ctx){return;}var row,visible=_fnVisbleColumns(ctx);for(var i=0,ien=data.length;i<ien;i++){row=data[i];if(row._details){row._details.children("td[colspan]").attr("colspan",visible);}}});api.on(destroyEvent,function(e,ctx){if(settings!==ctx){return;}for(var i=0,ien=data.length;i<ien;i++){if(data[i]._details){__details_remove(api,i);}}});}};var _emp="";var _child_obj=_emp+"row().child";var _child_mth=_child_obj+"()";_api_register(_child_mth,function(data,klass){var ctx=this.context;if(data===undefined){return ctx.length&&this.length?ctx[0].aoData[this[0]]._details:undefined;}else{if(data===true){this.child.show();}else{if(data===false){__details_remove(this);}else{if(ctx.length&&this.length){__details_add(ctx[0],ctx[0].aoData[this[0]],data,klass);}}}}return this;});_api_register([_child_obj+".show()",_child_mth+".show()"],function(show){__details_display(this,true);return this;});_api_register([_child_obj+".hide()",_child_mth+".hide()"],function(){__details_display(this,false);return this;});_api_register([_child_obj+".remove()",_child_mth+".remove()"],function(){__details_remove(this);return this;});_api_register(_child_obj+".isShown()",function(){var ctx=this.context;if(ctx.length&&this.length){return ctx[0].aoData[this[0]]._detailsShow||false;}return false;});var __re_column_selector=/^(.+):(name|visIdx|visible)$/;var __columnData=function(settings,column,r1,r2,rows){var a=[];for(var row=0,ien=rows.length;row<ien;row++){a.push(_fnGetCellData(settings,rows[row],column));}return a;};var __column_selector=function(settings,selector,opts){var columns=settings.aoColumns,names=_pluck(columns,"sName"),nodes=_pluck(columns,"nTh");var run=function(s){var selInt=_intVal(s);if(s===""){return _range(columns.length);}if(selInt!==null){return[selInt>=0?selInt:columns.length+selInt];}if(typeof s==="function"){var rows=_selector_row_indexes(settings,opts);return $.map(columns,function(col,idx){return s(idx,__columnData(settings,idx,0,0,rows),nodes[idx])?idx:null;});}var match=typeof s==="string"?s.match(__re_column_selector):"";if(match){switch(match[2]){case"visIdx":case"visible":var idx=parseInt(match[1],10);if(idx<0){var visColumns=$.map(columns,function(col,i){return col.bVisible?i:null;});return[visColumns[visColumns.length+idx]];}return[_fnVisibleToColumnIndex(settings,idx)];case"name":return $.map(names,function(name,i){return name===match[1]?i:null;});}}else{return $(nodes).filter(s).map(function(){return $.inArray(this,nodes);}).toArray();}};return _selector_run("column",selector,run,settings,opts);};var __setColumnVis=function(settings,column,vis,recalc){var cols=settings.aoColumns,col=cols[column],data=settings.aoData,row,cells,i,ien,tr;if(vis===undefined){return col.bVisible;}if(col.bVisible===vis){return;}if(vis){var insertBefore=$.inArray(true,_pluck(cols,"bVisible"),column+1);for(i=0,ien=data.length;i<ien;i++){tr=data[i].nTr;cells=data[i].anCells;if(tr){tr.insertBefore(cells[column],cells[insertBefore]||null);}}}else{$(_pluck(settings.aoData,"anCells",column)).detach();}col.bVisible=vis;_fnDrawHead(settings,settings.aoHeader);_fnDrawHead(settings,settings.aoFooter);if(recalc===undefined||recalc){_fnAdjustColumnSizing(settings);if(settings.oScroll.sX||settings.oScroll.sY){_fnScrollDraw(settings);}}_fnCallbackFire(settings,null,"column-visibility",[settings,column,vis,recalc]);_fnSaveState(settings);};_api_register("columns()",function(selector,opts){if(selector===undefined){selector="";}else{if($.isPlainObject(selector)){opts=selector;selector="";}}opts=_selector_opts(opts);var inst=this.iterator("table",function(settings){return __column_selector(settings,selector,opts);},1);inst.selector.cols=selector;inst.selector.opts=opts;return inst;});_api_registerPlural("columns().header()","column().header()",function(selector,opts){return this.iterator("column",function(settings,column){return settings.aoColumns[column].nTh;},1);});_api_registerPlural("columns().footer()","column().footer()",function(selector,opts){return this.iterator("column",function(settings,column){return settings.aoColumns[column].nTf;},1);});_api_registerPlural("columns().data()","column().data()",function(){return this.iterator("column-rows",__columnData,1);});_api_registerPlural("columns().dataSrc()","column().dataSrc()",function(){return this.iterator("column",function(settings,column){return settings.aoColumns[column].mData;},1);});_api_registerPlural("columns().cache()","column().cache()",function(type){return this.iterator("column-rows",function(settings,column,i,j,rows){return _pluck_order(settings.aoData,rows,type==="search"?"_aFilterData":"_aSortData",column);},1);});_api_registerPlural("columns().nodes()","column().nodes()",function(){return this.iterator("column-rows",function(settings,column,i,j,rows){return _pluck_order(settings.aoData,rows,"anCells",column);},1);});_api_registerPlural("columns().visible()","column().visible()",function(vis,calc){return this.iterator("column",function(settings,column){if(vis===undefined){return settings.aoColumns[column].bVisible;}__setColumnVis(settings,column,vis,calc);});});_api_registerPlural("columns().indexes()","column().index()",function(type){return this.iterator("column",function(settings,column){return type==="visible"?_fnColumnIndexToVisible(settings,column):column;},1);});_api_register("columns.adjust()",function(){return this.iterator("table",function(settings){_fnAdjustColumnSizing(settings);},1);});_api_register("column.index()",function(type,idx){if(this.context.length!==0){var ctx=this.context[0];if(type==="fromVisible"||type==="toData"){return _fnVisibleToColumnIndex(ctx,idx);}else{if(type==="fromData"||type==="toVisible"){return _fnColumnIndexToVisible(ctx,idx);}}}});_api_register("column()",function(selector,opts){return _selector_first(this.columns(selector,opts));});var __cell_selector=function(settings,selector,opts){var data=settings.aoData;var rows=_selector_row_indexes(settings,opts);var cells=_removeEmpty(_pluck_order(data,rows,"anCells"));var allCells=$([].concat.apply([],cells));var row;var columns=settings.aoColumns.length;var a,i,ien,j,o,host;var run=function(s){var fnSelector=typeof s==="function";if(s===null||s===undefined||fnSelector){a=[];for(i=0,ien=rows.length;i<ien;i++){row=rows[i];for(j=0;j<columns;j++){o={row:row,column:j};if(fnSelector){host=data[row];if(s(o,_fnGetCellData(settings,row,j),host.anCells?host.anCells[j]:null)){a.push(o);}}else{a.push(o);}}}return a;}if($.isPlainObject(s)){return[s];}return allCells.filter(s).map(function(i,el){return{row:el._DT_CellIndex.row,column:el._DT_CellIndex.column};}).toArray();};return _selector_run("cell",selector,run,settings,opts);};_api_register("cells()",function(rowSelector,columnSelector,opts){if($.isPlainObject(rowSelector)){if(rowSelector.row===undefined){opts=rowSelector;rowSelector=null;}else{opts=columnSelector;columnSelector=null;}}if($.isPlainObject(columnSelector)){opts=columnSelector;columnSelector=null;}if(columnSelector===null||columnSelector===undefined){return this.iterator("table",function(settings){return __cell_selector(settings,rowSelector,_selector_opts(opts));});}var columns=this.columns(columnSelector,opts);var rows=this.rows(rowSelector,opts);var a,i,ien,j,jen;var cells=this.iterator("table",function(settings,idx){a=[];for(i=0,ien=rows[idx].length;i<ien;i++){for(j=0,jen=columns[idx].length;j<jen;j++){a.push({row:rows[idx][i],column:columns[idx][j]});}}return a;},1);$.extend(cells.selector,{cols:columnSelector,rows:rowSelector,opts:opts});return cells;});_api_registerPlural("cells().nodes()","cell().node()",function(){return this.iterator("cell",function(settings,row,column){var cells=settings.aoData[row].anCells;return cells?cells[column]:undefined;},1);});_api_register("cells().data()",function(){return this.iterator("cell",function(settings,row,column){return _fnGetCellData(settings,row,column);},1);});_api_registerPlural("cells().cache()","cell().cache()",function(type){type=type==="search"?"_aFilterData":"_aSortData";return this.iterator("cell",function(settings,row,column){return settings.aoData[row][type][column];},1);});_api_registerPlural("cells().render()","cell().render()",function(type){return this.iterator("cell",function(settings,row,column){return _fnGetCellData(settings,row,column,type);},1);});_api_registerPlural("cells().indexes()","cell().index()",function(){return this.iterator("cell",function(settings,row,column){return{row:row,column:column,columnVisible:_fnColumnIndexToVisible(settings,column)};},1);});_api_registerPlural("cells().invalidate()","cell().invalidate()",function(src){return this.iterator("cell",function(settings,row,column){_fnInvalidate(settings,row,src,column);});});_api_register("cell()",function(rowSelector,columnSelector,opts){return _selector_first(this.cells(rowSelector,columnSelector,opts));});_api_register("cell().data()",function(data){var ctx=this.context;var cell=this[0];if(data===undefined){return ctx.length&&cell.length?_fnGetCellData(ctx[0],cell[0].row,cell[0].column):undefined;}_fnSetCellData(ctx[0],cell[0].row,cell[0].column,data);_fnInvalidate(ctx[0],cell[0].row,"data",cell[0].column);return this;});_api_register("order()",function(order,dir){var ctx=this.context;if(order===undefined){return ctx.length!==0?ctx[0].aaSorting:undefined;}if(typeof order==="number"){order=[[order,dir]];}else{if(!$.isArray(order[0])){order=Array.prototype.slice.call(arguments);}}return this.iterator("table",function(settings){settings.aaSorting=order.slice();});});_api_register("order.listener()",function(node,column,callback){return this.iterator("table",function(settings){_fnSortAttachListener(settings,node,column,callback);});});_api_register("order.fixed()",function(set){if(!set){var ctx=this.context;var fixed=ctx.length?ctx[0].aaSortingFixed:undefined;return $.isArray(fixed)?{pre:fixed}:fixed;}return this.iterator("table",function(settings){settings.aaSortingFixed=$.extend(true,{},set);});});_api_register(["columns().order()","column().order()"],function(dir){var that=this;return this.iterator("table",function(settings,i){var sort=[];$.each(that[i],function(j,col){sort.push([col,dir]);});settings.aaSorting=sort;});});_api_register("search()",function(input,regex,smart,caseInsen){var ctx=this.context;if(input===undefined){return ctx.length!==0?ctx[0].oPreviousSearch.sSearch:undefined;}return this.iterator("table",function(settings){if(!settings.oFeatures.bFilter){return;}_fnFilterComplete(settings,$.extend({},settings.oPreviousSearch,{sSearch:input+"",bRegex:regex===null?false:regex,bSmart:smart===null?true:smart,bCaseInsensitive:caseInsen===null?true:caseInsen}),1);});});_api_registerPlural("columns().search()","column().search()",function(input,regex,smart,caseInsen){return this.iterator("column",function(settings,column){var preSearch=settings.aoPreSearchCols;if(input===undefined){return preSearch[column].sSearch;}if(!settings.oFeatures.bFilter){return;}$.extend(preSearch[column],{sSearch:input+"",bRegex:regex===null?false:regex,bSmart:smart===null?true:smart,bCaseInsensitive:caseInsen===null?true:caseInsen});_fnFilterComplete(settings,settings.oPreviousSearch,1);});});_api_register("state()",function(){return this.context.length?this.context[0].oSavedState:null;});_api_register("state.clear()",function(){return this.iterator("table",function(settings){settings.fnStateSaveCallback.call(settings.oInstance,settings,{});});});_api_register("state.loaded()",function(){return this.context.length?this.context[0].oLoadedState:null;});_api_register("state.save()",function(){return this.iterator("table",function(settings){_fnSaveState(settings);});});DataTable.versionCheck=DataTable.fnVersionCheck=function(version){var aThis=DataTable.version.split(".");var aThat=version.split(".");var iThis,iThat;for(var i=0,iLen=aThat.length;i<iLen;i++){iThis=parseInt(aThis[i],10)||0;iThat=parseInt(aThat[i],10)||0;if(iThis===iThat){continue;}return iThis>iThat;}return true;};DataTable.isDataTable=DataTable.fnIsDataTable=function(table){var t=$(table).get(0);var is=false;$.each(DataTable.settings,function(i,o){var head=o.nScrollHead?$("table",o.nScrollHead)[0]:null;var foot=o.nScrollFoot?$("table",o.nScrollFoot)[0]:null;if(o.nTable===t||head===t||foot===t){is=true;}});return is;};DataTable.tables=DataTable.fnTables=function(visible){var api=false;if($.isPlainObject(visible)){api=visible.api;visible=visible.visible;}var a=$.map(DataTable.settings,function(o){if(!visible||(visible&&$(o.nTable).is(":visible"))){return o.nTable;}});return api?new _Api(a):a;};DataTable.util={throttle:_fnThrottle,escapeRegex:_fnEscapeRegex};DataTable.camelToHungarian=_fnCamelToHungarian;_api_register("$()",function(selector,opts){var rows=this.rows(opts).nodes(),jqRows=$(rows);return $([].concat(jqRows.filter(selector).toArray(),jqRows.find(selector).toArray()));});$.each(["on","one","off"],function(i,key){_api_register(key+"()",function(){var args=Array.prototype.slice.call(arguments);if(!args[0].match(/\.dt\b/)){args[0]+=".dt";}var inst=$(this.tables().nodes());inst[key].apply(inst,args);return this;});});_api_register("clear()",function(){return this.iterator("table",function(settings){_fnClearTable(settings);});});_api_register("settings()",function(){return new _Api(this.context,this.context);});_api_register("init()",function(){var ctx=this.context;return ctx.length?ctx[0].oInit:null;});_api_register("data()",function(){return this.iterator("table",function(settings){return _pluck(settings.aoData,"_aData");}).flatten();});_api_register("destroy()",function(remove){remove=remove||false;return this.iterator("table",function(settings){var orig=settings.nTableWrapper.parentNode;var classes=settings.oClasses;var table=settings.nTable;var tbody=settings.nTBody;var thead=settings.nTHead;var tfoot=settings.nTFoot;var jqTable=$(table);var jqTbody=$(tbody);var jqWrapper=$(settings.nTableWrapper);var rows=$.map(settings.aoData,function(r){return r.nTr;});var i,ien;settings.bDestroying=true;_fnCallbackFire(settings,"aoDestroyCallback","destroy",[settings]);if(!remove){new _Api(settings).columns().visible(true);}jqWrapper.unbind(".DT").find(":not(tbody *)").unbind(".DT");$(window).unbind(".DT-"+settings.sInstance);if(table!=thead.parentNode){jqTable.children("thead").detach();jqTable.append(thead);}if(tfoot&&table!=tfoot.parentNode){jqTable.children("tfoot").detach();jqTable.append(tfoot);}settings.aaSorting=[];settings.aaSortingFixed=[];_fnSortingClasses(settings);$(rows).removeClass(settings.asStripeClasses.join(" "));$("th, td",thead).removeClass(classes.sSortable+" "+classes.sSortableAsc+" "+classes.sSortableDesc+" "+classes.sSortableNone);if(settings.bJUI){$("th span."+classes.sSortIcon+", td span."+classes.sSortIcon,thead).detach();$("th, td",thead).each(function(){var wrapper=$("div."+classes.sSortJUIWrapper,this);$(this).append(wrapper.contents());wrapper.detach();});}jqTbody.children().detach();jqTbody.append(rows);var removedMethod=remove?"remove":"detach";jqTable[removedMethod]();jqWrapper[removedMethod]();if(!remove&&orig){orig.insertBefore(table,settings.nTableReinsertBefore);jqTable.css("width",settings.sDestroyWidth).removeClass(classes.sTable);ien=settings.asDestroyStripes.length;if(ien){jqTbody.children().each(function(i){$(this).addClass(settings.asDestroyStripes[i%ien]);});}}var idx=$.inArray(settings,DataTable.settings);if(idx!==-1){DataTable.settings.splice(idx,1);}});});$.each(["column","row","cell"],function(i,type){_api_register(type+"s().every()",function(fn){var opts=this.selector.opts;var api=this;return this.iterator(type,function(settings,arg1,arg2,arg3,arg4){fn.call(api[type](arg1,type==="cell"?arg2:opts,type==="cell"?opts:undefined),arg1,arg2,arg3,arg4);});});});_api_register("i18n()",function(token,def,plural){var ctx=this.context[0];var resolved=_fnGetObjectDataFn(token)(ctx.oLanguage);if(resolved===undefined){resolved=def;}if(plural!==undefined&&$.isPlainObject(resolved)){resolved=resolved[plural]!==undefined?resolved[plural]:resolved._;}return resolved.replace("%d",plural);});DataTable.version="1.10.10";DataTable.settings=[];DataTable.models={};DataTable.models.oSearch={bCaseInsensitive:true,sSearch:"",bRegex:false,bSmart:true};DataTable.models.oRow={nTr:null,anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,_sRowStripe:"",src:null,idx:-1};DataTable.models.oColumn={idx:null,aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bVisible:null,_sManualType:null,_bAttrSrc:false,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null};DataTable.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:[],ajax:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:true,bDeferRender:false,bDestroy:false,bFilter:true,bInfo:true,bJQueryUI:false,bLengthChange:true,bPaginate:true,bProcessing:false,bRetrieve:false,bScrollCollapse:false,bServerSide:false,bSort:true,bSortMulti:true,bSortCellsTop:false,bSortClasses:true,bStateSave:false,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(toFormat){return toFormat.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands);},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:null,fnServerParams:null,fnStateLoadCallback:function(settings){try{return JSON.parse((settings.iStateDuration===-1?sessionStorage:localStorage).getItem("DataTables_"+settings.sInstance+"_"+location.pathname));}catch(e){}},fnStateLoadParams:null,fnStateLoaded:null,fnStateSaveCallback:function(settings,data){try{(settings.iStateDuration===-1?sessionStorage:localStorage).setItem("DataTables_"+settings.sInstance+"_"+location.pathname,JSON.stringify(data));}catch(e){}},fnStateSaveParams:null,iStateDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iTabIndex:0,oClasses:{},oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sDecimal:"",sThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sSearchPlaceholder:"",sUrl:"",sZeroRecords:"No matching records found"},oSearch:$.extend({},DataTable.models.oSearch),sAjaxDataProp:"data",sAjaxSource:null,sDom:"lfrtip",searchDelay:null,sPaginationType:"simple_numbers",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET",renderer:null,rowId:"DT_RowId"};_fnHungarianMap(DataTable.defaults);DataTable.defaults.column={aDataSort:null,iDataSort:-1,asSorting:["asc","desc"],bSearchable:true,bSortable:true,bVisible:true,fnCreatedCell:null,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null};_fnHungarianMap(DataTable.defaults.column);DataTable.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{bCollapse:null,iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:false,bScrollbarLeft:false,bBounding:false,barWidth:0},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aIds:{},aoColumns:[],aoHeader:[],aoFooter:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:false,bInitialised:false,aoOpenRows:[],sDom:null,searchDelay:null,sPaginationType:"two_button",iStateDuration:0,aoStateSave:[],aoStateLoad:[],oSavedState:null,oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:true,jqXHR:null,json:undefined,oAjaxData:undefined,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:false,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},bFiltered:false,bSorted:false,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return _fnDataSource(this)=="ssp"?this._iRecordsTotal*1:this.aiDisplayMaster.length;},fnRecordsDisplay:function(){return _fnDataSource(this)=="ssp"?this._iRecordsDisplay*1:this.aiDisplay.length;},fnDisplayEnd:function(){var len=this._iDisplayLength,start=this._iDisplayStart,calc=start+len,records=this.aiDisplay.length,features=this.oFeatures,paginate=features.bPaginate;if(features.bServerSide){return paginate===false||len===-1?start+records:Math.min(start+len,this._iRecordsDisplay);}else{return !paginate||calc>records||len===-1?records:calc;}},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{},rowIdFn:null,rowId:null};DataTable.ext=_ext={buttons:{},classes:{},builder:"-source-",errMode:"alert",feature:[],search:[],selector:{cell:[],column:[],row:[]},internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:DataTable.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:DataTable.version};$.extend(_ext,{afnFiltering:_ext.search,aTypes:_ext.type.detect,ofnSearch:_ext.type.search,oSort:_ext.type.order,afnSortData:_ext.order,aoFeatures:_ext.feature,oApi:_ext.internal,oStdClasses:_ext.classes,oPagination:_ext.pager});$.extend(DataTable.ext.classes,{sTable:"dataTable",sNoFooter:"no-footer",sPageButton:"paginate_button",sPageButtonActive:"current",sPageButtonDisabled:"disabled",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sFilterInput:"",sLengthSelect:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sHeaderTH:"",sFooterTH:"",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sJUIHeader:"",sJUIFooter:""});(function(){var _empty="";_empty="";var _stateDefault=_empty+"ui-state-default";var _sortIcon=_empty+"css_right ui-icon ui-icon-";var _headerFooter=_empty+"fg-toolbar ui-toolbar ui-widget-header ui-helper-clearfix";$.extend(DataTable.ext.oJUIClasses,DataTable.ext.classes,{sPageButton:"fg-button ui-button "+_stateDefault,sPageButtonActive:"ui-state-disabled",sPageButtonDisabled:"ui-state-disabled",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sSortAsc:_stateDefault+" sorting_asc",sSortDesc:_stateDefault+" sorting_desc",sSortable:_stateDefault+" sorting",sSortableAsc:_stateDefault+" sorting_asc_disabled",sSortableDesc:_stateDefault+" sorting_desc_disabled",sSortableNone:_stateDefault+" sorting_disabled",sSortJUIAsc:_sortIcon+"triangle-1-n",sSortJUIDesc:_sortIcon+"triangle-1-s",sSortJUI:_sortIcon+"carat-2-n-s",sSortJUIAscAllowed:_sortIcon+"carat-1-n",sSortJUIDescAllowed:_sortIcon+"carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",sScrollHead:"dataTables_scrollHead "+_stateDefault,sScrollFoot:"dataTables_scrollFoot "+_stateDefault,sHeaderTH:_stateDefault,sFooterTH:_stateDefault,sJUIHeader:_headerFooter+" ui-corner-tl ui-corner-tr",sJUIFooter:_headerFooter+" ui-corner-bl ui-corner-br"});}());var extPagination=DataTable.ext.pager;function _numbers(page,pages){var numbers=[],buttons=extPagination.numbers_length,half=Math.floor(buttons/2),i=1;if(pages<=buttons){numbers=_range(0,pages);}else{if(page<=half){numbers=_range(0,buttons-2);numbers.push("ellipsis");numbers.push(pages-1);}else{if(page>=pages-1-half){numbers=_range(pages-(buttons-2),pages);numbers.splice(0,0,"ellipsis");numbers.splice(0,0,0);}else{numbers=_range(page-half+2,page+half-1);numbers.push("ellipsis");numbers.push(pages-1);numbers.splice(0,0,"ellipsis");numbers.splice(0,0,0);}}}numbers.DT_el="span";return numbers;}$.extend(extPagination,{simple:function(page,pages){return["previous","next"];},full:function(page,pages){return["first","previous","next","last"];},numbers:function(page,pages){return[_numbers(page,pages)];},simple_numbers:function(page,pages){return["previous",_numbers(page,pages),"next"];},full_numbers:function(page,pages){return["first","previous",_numbers(page,pages),"next","last"];},_numbers:_numbers,numbers_length:7});$.extend(true,DataTable.ext.renderer,{pageButton:{_:function(settings,host,idx,buttons,page,pages){var classes=settings.oClasses;var lang=settings.oLanguage.oPaginate;var aria=settings.oLanguage.oAria.paginate||{};var btnDisplay,btnClass,counter=0;var attach=function(container,buttons){var i,ien,node,button;var clickHandler=function(e){_fnPageChange(settings,e.data.action,true);};for(i=0,ien=buttons.length;i<ien;i++){button=buttons[i];if($.isArray(button)){var inner=$("<"+(button.DT_el||"div")+"/>").appendTo(container);attach(inner,button);}else{btnDisplay=null;btnClass="";switch(button){case"ellipsis":container.append('<span class="ellipsis">&#x2026;</span>');break;case"first":btnDisplay=lang.sFirst;btnClass=button+(page>0?"":" "+classes.sPageButtonDisabled);break;case"previous":btnDisplay=lang.sPrevious;btnClass=button+(page>0?"":" "+classes.sPageButtonDisabled);break;case"next":btnDisplay=lang.sNext;btnClass=button+(page<pages-1?"":" "+classes.sPageButtonDisabled);break;case"last":btnDisplay=lang.sLast;btnClass=button+(page<pages-1?"":" "+classes.sPageButtonDisabled);break;default:btnDisplay=button+1;btnClass=page===button?classes.sPageButtonActive:"";break;}if(btnDisplay!==null){node=$("<a>",{"class":classes.sPageButton+" "+btnClass,"aria-controls":settings.sTableId,"aria-label":aria[button],"data-dt-idx":counter,tabindex:settings.iTabIndex,id:idx===0&&typeof button==="string"?settings.sTableId+"_"+button:null}).html(btnDisplay).appendTo(container);_fnBindAction(node,{action:button},clickHandler);counter++;}}}};var activeEl;try{activeEl=$(host).find(document.activeElement).data("dt-idx");}catch(e){}attach($(host).empty(),buttons);if(activeEl){$(host).find("[data-dt-idx="+activeEl+"]").focus();}}}});$.extend(DataTable.ext.type.detect,[function(d,settings){var decimal=settings.oLanguage.sDecimal;return _isNumber(d,decimal)?"num"+decimal:null;},function(d,settings){if(d&&!(d instanceof Date)&&(!_re_date_start.test(d)||!_re_date_end.test(d))){return null;}var parsed=Date.parse(d);return(parsed!==null&&!isNaN(parsed))||_empty(d)?"date":null;},function(d,settings){var decimal=settings.oLanguage.sDecimal;return _isNumber(d,decimal,true)?"num-fmt"+decimal:null;},function(d,settings){var decimal=settings.oLanguage.sDecimal;return _htmlNumeric(d,decimal)?"html-num"+decimal:null;},function(d,settings){var decimal=settings.oLanguage.sDecimal;return _htmlNumeric(d,decimal,true)?"html-num-fmt"+decimal:null;},function(d,settings){return _empty(d)||(typeof d==="string"&&d.indexOf("<")!==-1)?"html":null;}]);$.extend(DataTable.ext.type.search,{html:function(data){return _empty(data)?data:typeof data==="string"?data.replace(_re_new_lines," ").replace(_re_html,""):"";},string:function(data){return _empty(data)?data:typeof data==="string"?data.replace(_re_new_lines," "):data;}});var __numericReplace=function(d,decimalPlace,re1,re2){if(d!==0&&(!d||d==="-")){return -Infinity;}if(decimalPlace){d=_numToDecimal(d,decimalPlace);}if(d.replace){if(re1){d=d.replace(re1,"");}if(re2){d=d.replace(re2,"");}}return d*1;};function _addNumericSort(decimalPlace){$.each({num:function(d){return __numericReplace(d,decimalPlace);},"num-fmt":function(d){return __numericReplace(d,decimalPlace,_re_formatted_numeric);},"html-num":function(d){return __numericReplace(d,decimalPlace,_re_html);},"html-num-fmt":function(d){return __numericReplace(d,decimalPlace,_re_html,_re_formatted_numeric);}},function(key,fn){_ext.type.order[key+decimalPlace+"-pre"]=fn;if(key.match(/^html\-/)){_ext.type.search[key+decimalPlace]=_ext.type.search.html;}});}$.extend(_ext.type.order,{"date-pre":function(d){return Date.parse(d)||0;},"html-pre":function(a){return _empty(a)?"":a.replace?a.replace(/<.*?>/g,"").toLowerCase():a+"";},"string-pre":function(a){return _empty(a)?"":typeof a==="string"?a.toLowerCase():!a.toString?"":a.toString();},"string-asc":function(x,y){return((x<y)?-1:((x>y)?1:0));},"string-desc":function(x,y){return((x<y)?1:((x>y)?-1:0));}});_addNumericSort("");$.extend(true,DataTable.ext.renderer,{header:{_:function(settings,cell,column,classes){$(settings.nTable).on("order.dt.DT",function(e,ctx,sorting,columns){if(settings!==ctx){return;}var colIdx=column.idx;cell.removeClass(column.sSortingClass+" "+classes.sSortAsc+" "+classes.sSortDesc).addClass(columns[colIdx]=="asc"?classes.sSortAsc:columns[colIdx]=="desc"?classes.sSortDesc:column.sSortingClass);});},jqueryui:function(settings,cell,column,classes){$("<div/>").addClass(classes.sSortJUIWrapper).append(cell.contents()).append($("<span/>").addClass(classes.sSortIcon+" "+column.sSortingClassJUI)).appendTo(cell);$(settings.nTable).on("order.dt.DT",function(e,ctx,sorting,columns){if(settings!==ctx){return;}var colIdx=column.idx;cell.removeClass(classes.sSortAsc+" "+classes.sSortDesc).addClass(columns[colIdx]=="asc"?classes.sSortAsc:columns[colIdx]=="desc"?classes.sSortDesc:column.sSortingClass);cell.find("span."+classes.sSortIcon).removeClass(classes.sSortJUIAsc+" "+classes.sSortJUIDesc+" "+classes.sSortJUI+" "+classes.sSortJUIAscAllowed+" "+classes.sSortJUIDescAllowed).addClass(columns[colIdx]=="asc"?classes.sSortJUIAsc:columns[colIdx]=="desc"?classes.sSortJUIDesc:column.sSortingClassJUI);});}}});DataTable.render={number:function(thousands,decimal,precision,prefix,postfix){return{display:function(d){if(typeof d!=="number"&&typeof d!=="string"){return d;}var negative=d<0?"-":"";var flo=parseFloat(d);if(isNaN(flo)){return d;}d=Math.abs(flo);var intPart=parseInt(d,10);var floatPart=precision?decimal+(d-intPart).toFixed(precision).substring(2):"";return negative+(prefix||"")+intPart.toString().replace(/\B(?=(\d{3})+(?!\d))/g,thousands)+floatPart+(postfix||"");}};},text:function(){return{display:function(d){return typeof d==="string"?d.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):d;}};}};function _fnExternApiFunc(fn){return function(){var args=[_fnSettingsFromNode(this[DataTable.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return DataTable.ext.internal[fn].apply(this,args);};}$.extend(DataTable.ext.internal,{_fnExternApiFunc:_fnExternApiFunc,_fnBuildAjax:_fnBuildAjax,_fnAjaxUpdate:_fnAjaxUpdate,_fnAjaxParameters:_fnAjaxParameters,_fnAjaxUpdateDraw:_fnAjaxUpdateDraw,_fnAjaxDataSrc:_fnAjaxDataSrc,_fnAddColumn:_fnAddColumn,_fnColumnOptions:_fnColumnOptions,_fnAdjustColumnSizing:_fnAdjustColumnSizing,_fnVisibleToColumnIndex:_fnVisibleToColumnIndex,_fnColumnIndexToVisible:_fnColumnIndexToVisible,_fnVisbleColumns:_fnVisbleColumns,_fnGetColumns:_fnGetColumns,_fnColumnTypes:_fnColumnTypes,_fnApplyColumnDefs:_fnApplyColumnDefs,_fnHungarianMap:_fnHungarianMap,_fnCamelToHungarian:_fnCamelToHungarian,_fnLanguageCompat:_fnLanguageCompat,_fnBrowserDetect:_fnBrowserDetect,_fnAddData:_fnAddData,_fnAddTr:_fnAddTr,_fnNodeToDataIndex:_fnNodeToDataIndex,_fnNodeToColumnIndex:_fnNodeToColumnIndex,_fnGetCellData:_fnGetCellData,_fnSetCellData:_fnSetCellData,_fnSplitObjNotation:_fnSplitObjNotation,_fnGetObjectDataFn:_fnGetObjectDataFn,_fnSetObjectDataFn:_fnSetObjectDataFn,_fnGetDataMaster:_fnGetDataMaster,_fnClearTable:_fnClearTable,_fnDeleteIndex:_fnDeleteIndex,_fnInvalidate:_fnInvalidate,_fnGetRowElements:_fnGetRowElements,_fnCreateTr:_fnCreateTr,_fnBuildHead:_fnBuildHead,_fnDrawHead:_fnDrawHead,_fnDraw:_fnDraw,_fnReDraw:_fnReDraw,_fnAddOptionsHtml:_fnAddOptionsHtml,_fnDetectHeader:_fnDetectHeader,_fnGetUniqueThs:_fnGetUniqueThs,_fnFeatureHtmlFilter:_fnFeatureHtmlFilter,_fnFilterComplete:_fnFilterComplete,_fnFilterCustom:_fnFilterCustom,_fnFilterColumn:_fnFilterColumn,_fnFilter:_fnFilter,_fnFilterCreateSearch:_fnFilterCreateSearch,_fnEscapeRegex:_fnEscapeRegex,_fnFilterData:_fnFilterData,_fnFeatureHtmlInfo:_fnFeatureHtmlInfo,_fnUpdateInfo:_fnUpdateInfo,_fnInfoMacros:_fnInfoMacros,_fnInitialise:_fnInitialise,_fnInitComplete:_fnInitComplete,_fnLengthChange:_fnLengthChange,_fnFeatureHtmlLength:_fnFeatureHtmlLength,_fnFeatureHtmlPaginate:_fnFeatureHtmlPaginate,_fnPageChange:_fnPageChange,_fnFeatureHtmlProcessing:_fnFeatureHtmlProcessing,_fnProcessingDisplay:_fnProcessingDisplay,_fnFeatureHtmlTable:_fnFeatureHtmlTable,_fnScrollDraw:_fnScrollDraw,_fnApplyToChildren:_fnApplyToChildren,_fnCalculateColumnWidths:_fnCalculateColumnWidths,_fnThrottle:_fnThrottle,_fnConvertToWidth:_fnConvertToWidth,_fnGetWidestNode:_fnGetWidestNode,_fnGetMaxLenString:_fnGetMaxLenString,_fnStringToCss:_fnStringToCss,_fnSortFlatten:_fnSortFlatten,_fnSort:_fnSort,_fnSortAria:_fnSortAria,_fnSortListener:_fnSortListener,_fnSortAttachListener:_fnSortAttachListener,_fnSortingClasses:_fnSortingClasses,_fnSortData:_fnSortData,_fnSaveState:_fnSaveState,_fnLoadState:_fnLoadState,_fnSettingsFromNode:_fnSettingsFromNode,_fnLog:_fnLog,_fnMap:_fnMap,_fnBindAction:_fnBindAction,_fnCallbackReg:_fnCallbackReg,_fnCallbackFire:_fnCallbackFire,_fnLengthOverflow:_fnLengthOverflow,_fnRenderer:_fnRenderer,_fnDataSource:_fnDataSource,_fnRowAttributes:_fnRowAttributes,_fnCalculateEnd:function(){}});$.fn.dataTable=DataTable;DataTable.$=$;$.fn.dataTableSettings=DataTable.settings;$.fn.dataTableExt=DataTable.ext;$.fn.DataTable=function(opts){return $(this).dataTable(opts).api();};$.each(DataTable,function(prop,val){$.fn.DataTable[prop]=val;});return $.fn.dataTable;}));(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?module.exports=factory():typeof define==="function"&&define.amd?define(factory):global.moment=factory();}(this,function(){var hookCallback;function utils_hooks__hooks(){return hookCallback.apply(null,arguments);}function setHookCallback(callback){hookCallback=callback;}function isArray(input){return Object.prototype.toString.call(input)==="[object Array]";}function isDate(input){return input instanceof Date||Object.prototype.toString.call(input)==="[object Date]";}function map(arr,fn){var res=[],i;for(i=0;i<arr.length;++i){res.push(fn(arr[i],i));}return res;}function hasOwnProp(a,b){return Object.prototype.hasOwnProperty.call(a,b);}function extend(a,b){for(var i in b){if(hasOwnProp(b,i)){a[i]=b[i];}}if(hasOwnProp(b,"toString")){a.toString=b.toString;}if(hasOwnProp(b,"valueOf")){a.valueOf=b.valueOf;}return a;}function create_utc__createUTC(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,true).utc();}function defaultParsingFlags(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false};}function getParsingFlags(m){if(m._pf==null){m._pf=defaultParsingFlags();}return m._pf;}function valid__isValid(m){if(m._isValid==null){var flags=getParsingFlags(m);m._isValid=!isNaN(m._d.getTime())&&flags.overflow<0&&!flags.empty&&!flags.invalidMonth&&!flags.invalidWeekday&&!flags.nullInput&&!flags.invalidFormat&&!flags.userInvalidated;if(m._strict){m._isValid=m._isValid&&flags.charsLeftOver===0&&flags.unusedTokens.length===0&&flags.bigHour===undefined;}}return m._isValid;}function valid__createInvalid(flags){var m=create_utc__createUTC(NaN);if(flags!=null){extend(getParsingFlags(m),flags);}else{getParsingFlags(m).userInvalidated=true;}return m;}var momentProperties=utils_hooks__hooks.momentProperties=[];function copyConfig(to,from){var i,prop,val;if(typeof from._isAMomentObject!=="undefined"){to._isAMomentObject=from._isAMomentObject;}if(typeof from._i!=="undefined"){to._i=from._i;}if(typeof from._f!=="undefined"){to._f=from._f;}if(typeof from._l!=="undefined"){to._l=from._l;}if(typeof from._strict!=="undefined"){to._strict=from._strict;}if(typeof from._tzm!=="undefined"){to._tzm=from._tzm;}if(typeof from._isUTC!=="undefined"){to._isUTC=from._isUTC;}if(typeof from._offset!=="undefined"){to._offset=from._offset;}if(typeof from._pf!=="undefined"){to._pf=getParsingFlags(from);}if(typeof from._locale!=="undefined"){to._locale=from._locale;}if(momentProperties.length>0){for(i in momentProperties){prop=momentProperties[i];val=from[prop];if(typeof val!=="undefined"){to[prop]=val;}}}return to;}var updateInProgress=false;function Moment(config){copyConfig(this,config);this._d=new Date(config._d!=null?config._d.getTime():NaN);if(updateInProgress===false){updateInProgress=true;utils_hooks__hooks.updateOffset(this);updateInProgress=false;}}function isMoment(obj){return obj instanceof Moment||(obj!=null&&obj._isAMomentObject!=null);}function absFloor(number){if(number<0){return Math.ceil(number);}else{return Math.floor(number);}}function toInt(argumentForCoercion){var coercedNumber=+argumentForCoercion,value=0;if(coercedNumber!==0&&isFinite(coercedNumber)){value=absFloor(coercedNumber);}return value;}function compareArrays(array1,array2,dontConvert){var len=Math.min(array1.length,array2.length),lengthDiff=Math.abs(array1.length-array2.length),diffs=0,i;for(i=0;i<len;i++){if((dontConvert&&array1[i]!==array2[i])||(!dontConvert&&toInt(array1[i])!==toInt(array2[i]))){diffs++;}}return diffs+lengthDiff;}function Locale(){}var locales={};var globalLocale;function normalizeLocale(key){return key?key.toLowerCase().replace("_","-"):key;}function chooseLocale(names){var i=0,j,next,locale,split;while(i<names.length){split=normalizeLocale(names[i]).split("-");j=split.length;next=normalizeLocale(names[i+1]);next=next?next.split("-"):null;while(j>0){locale=loadLocale(split.slice(0,j).join("-"));if(locale){return locale;}if(next&&next.length>=j&&compareArrays(split,next,true)>=j-1){break;}j--;}i++;}return null;}function loadLocale(name){var oldLocale=null;if(!locales[name]&&typeof module!=="undefined"&&module&&module.exports){try{oldLocale=globalLocale._abbr;require("./locale/"+name);locale_locales__getSetGlobalLocale(oldLocale);}catch(e){}}return locales[name];}function locale_locales__getSetGlobalLocale(key,values){var data;if(key){if(typeof values==="undefined"){data=locale_locales__getLocale(key);}else{data=defineLocale(key,values);}if(data){globalLocale=data;}}return globalLocale._abbr;}function defineLocale(name,values){if(values!==null){values.abbr=name;locales[name]=locales[name]||new Locale();locales[name].set(values);locale_locales__getSetGlobalLocale(name);return locales[name];}else{delete locales[name];return null;}}function locale_locales__getLocale(key){var locale;if(key&&key._locale&&key._locale._abbr){key=key._locale._abbr;}if(!key){return globalLocale;}if(!isArray(key)){locale=loadLocale(key);if(locale){return locale;}key=[key];}return chooseLocale(key);}var aliases={};function addUnitAlias(unit,shorthand){var lowerCase=unit.toLowerCase();aliases[lowerCase]=aliases[lowerCase+"s"]=aliases[shorthand]=unit;}function normalizeUnits(units){return typeof units==="string"?aliases[units]||aliases[units.toLowerCase()]:undefined;}function normalizeObjectUnits(inputObject){var normalizedInput={},normalizedProp,prop;for(prop in inputObject){if(hasOwnProp(inputObject,prop)){normalizedProp=normalizeUnits(prop);if(normalizedProp){normalizedInput[normalizedProp]=inputObject[prop];}}}return normalizedInput;}function makeGetSet(unit,keepTime){return function(value){if(value!=null){get_set__set(this,unit,value);utils_hooks__hooks.updateOffset(this,keepTime);return this;}else{return get_set__get(this,unit);}};}function get_set__get(mom,unit){return mom._d["get"+(mom._isUTC?"UTC":"")+unit]();}function get_set__set(mom,unit,value){return mom._d["set"+(mom._isUTC?"UTC":"")+unit](value);}function getSet(units,value){var unit;if(typeof units==="object"){for(unit in units){this.set(unit,units[unit]);}}else{units=normalizeUnits(units);if(typeof this[units]==="function"){return this[units](value);}}return this;}function zeroFill(number,targetLength,forceSign){var absNumber=""+Math.abs(number),zerosToFill=targetLength-absNumber.length,sign=number>=0;return(sign?(forceSign?"+":""):"-")+Math.pow(10,Math.max(0,zerosToFill)).toString().substr(1)+absNumber;}var formattingTokens=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;var localFormattingTokens=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g;var formatFunctions={};var formatTokenFunctions={};function addFormatToken(token,padded,ordinal,callback){var func=callback;if(typeof callback==="string"){func=function(){return this[callback]();};}if(token){formatTokenFunctions[token]=func;}if(padded){formatTokenFunctions[padded[0]]=function(){return zeroFill(func.apply(this,arguments),padded[1],padded[2]);};}if(ordinal){formatTokenFunctions[ordinal]=function(){return this.localeData().ordinal(func.apply(this,arguments),token);};}}function removeFormattingTokens(input){if(input.match(/\[[\s\S]/)){return input.replace(/^\[|\]$/g,"");}return input.replace(/\\/g,"");}function makeFormatFunction(format){var array=format.match(formattingTokens),i,length;for(i=0,length=array.length;i<length;i++){if(formatTokenFunctions[array[i]]){array[i]=formatTokenFunctions[array[i]];}else{array[i]=removeFormattingTokens(array[i]);}}return function(mom){var output="";for(i=0;i<length;i++){output+=array[i] instanceof Function?array[i].call(mom,format):array[i];}return output;};}function formatMoment(m,format){if(!m.isValid()){return m.localeData().invalidDate();}format=expandFormat(format,m.localeData());formatFunctions[format]=formatFunctions[format]||makeFormatFunction(format);return formatFunctions[format](m);}function expandFormat(format,locale){var i=5;function replaceLongDateFormatTokens(input){return locale.longDateFormat(input)||input;}localFormattingTokens.lastIndex=0;while(i>=0&&localFormattingTokens.test(format)){format=format.replace(localFormattingTokens,replaceLongDateFormatTokens);localFormattingTokens.lastIndex=0;i-=1;}return format;}var match1=/\d/;var match2=/\d\d/;var match3=/\d{3}/;var match4=/\d{4}/;var match6=/[+-]?\d{6}/;var match1to2=/\d\d?/;var match1to3=/\d{1,3}/;var match1to4=/\d{1,4}/;var match1to6=/[+-]?\d{1,6}/;var matchUnsigned=/\d+/;var matchSigned=/[+-]?\d+/;var matchOffset=/Z|[+-]\d\d:?\d\d/gi;var matchTimestamp=/[+-]?\d+(\.\d{1,3})?/;var matchWord=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i;var regexes={};function isFunction(sth){return typeof sth==="function"&&Object.prototype.toString.call(sth)==="[object Function]";}function addRegexToken(token,regex,strictRegex){regexes[token]=isFunction(regex)?regex:function(isStrict){return(isStrict&&strictRegex)?strictRegex:regex;};}function getParseRegexForToken(token,config){if(!hasOwnProp(regexes,token)){return new RegExp(unescapeFormat(token));}return regexes[token](config._strict,config._locale);}function unescapeFormat(s){return s.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(matched,p1,p2,p3,p4){return p1||p2||p3||p4;}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");}var tokens={};function addParseToken(token,callback){var i,func=callback;if(typeof token==="string"){token=[token];}if(typeof callback==="number"){func=function(input,array){array[callback]=toInt(input);};}for(i=0;i<token.length;i++){tokens[token[i]]=func;}}function addWeekParseToken(token,callback){addParseToken(token,function(input,array,config,token){config._w=config._w||{};callback(input,config._w,config,token);});}function addTimeToArrayFromToken(token,input,config){if(input!=null&&hasOwnProp(tokens,token)){tokens[token](input,config._a,config,token);}}var YEAR=0;var MONTH=1;var DATE=2;var HOUR=3;var MINUTE=4;var SECOND=5;var MILLISECOND=6;function daysInMonth(year,month){return new Date(Date.UTC(year,month+1,0)).getUTCDate();}addFormatToken("M",["MM",2],"Mo",function(){return this.month()+1;});addFormatToken("MMM",0,0,function(format){return this.localeData().monthsShort(this,format);});addFormatToken("MMMM",0,0,function(format){return this.localeData().months(this,format);});addUnitAlias("month","M");addRegexToken("M",match1to2);addRegexToken("MM",match1to2,match2);addRegexToken("MMM",matchWord);addRegexToken("MMMM",matchWord);addParseToken(["M","MM"],function(input,array){array[MONTH]=toInt(input)-1;});addParseToken(["MMM","MMMM"],function(input,array,config,token){var month=config._locale.monthsParse(input,token,config._strict);if(month!=null){array[MONTH]=month;}else{getParsingFlags(config).invalidMonth=input;}});var defaultLocaleMonths="January_February_March_April_May_June_July_August_September_October_November_December".split("_");function localeMonths(m){return this._months[m.month()];}var defaultLocaleMonthsShort="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function localeMonthsShort(m){return this._monthsShort[m.month()];}function localeMonthsParse(monthName,format,strict){var i,mom,regex;if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[];}for(i=0;i<12;i++){mom=create_utc__createUTC([2000,i]);if(strict&&!this._longMonthsParse[i]){this._longMonthsParse[i]=new RegExp("^"+this.months(mom,"").replace(".","")+"$","i");this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(mom,"").replace(".","")+"$","i");}if(!strict&&!this._monthsParse[i]){regex="^"+this.months(mom,"")+"|^"+this.monthsShort(mom,"");this._monthsParse[i]=new RegExp(regex.replace(".",""),"i");}if(strict&&format==="MMMM"&&this._longMonthsParse[i].test(monthName)){return i;}else{if(strict&&format==="MMM"&&this._shortMonthsParse[i].test(monthName)){return i;}else{if(!strict&&this._monthsParse[i].test(monthName)){return i;}}}}}function setMonth(mom,value){var dayOfMonth;if(typeof value==="string"){value=mom.localeData().monthsParse(value);if(typeof value!=="number"){return mom;}}dayOfMonth=Math.min(mom.date(),daysInMonth(mom.year(),value));mom._d["set"+(mom._isUTC?"UTC":"")+"Month"](value,dayOfMonth);return mom;}function getSetMonth(value){if(value!=null){setMonth(this,value);utils_hooks__hooks.updateOffset(this,true);return this;}else{return get_set__get(this,"Month");}}function getDaysInMonth(){return daysInMonth(this.year(),this.month());}function checkOverflow(m){var overflow;var a=m._a;if(a&&getParsingFlags(m).overflow===-2){overflow=a[MONTH]<0||a[MONTH]>11?MONTH:a[DATE]<1||a[DATE]>daysInMonth(a[YEAR],a[MONTH])?DATE:a[HOUR]<0||a[HOUR]>24||(a[HOUR]===24&&(a[MINUTE]!==0||a[SECOND]!==0||a[MILLISECOND]!==0))?HOUR:a[MINUTE]<0||a[MINUTE]>59?MINUTE:a[SECOND]<0||a[SECOND]>59?SECOND:a[MILLISECOND]<0||a[MILLISECOND]>999?MILLISECOND:-1;if(getParsingFlags(m)._overflowDayOfYear&&(overflow<YEAR||overflow>DATE)){overflow=DATE;}getParsingFlags(m).overflow=overflow;}return m;}function warn(msg){if(utils_hooks__hooks.suppressDeprecationWarnings===false&&typeof console!=="undefined"&&console.warn){console.warn("Deprecation warning: "+msg);}}function deprecate(msg,fn){var firstTime=true;return extend(function(){if(firstTime){warn(msg+"\n"+(new Error()).stack);firstTime=false;}return fn.apply(this,arguments);},fn);}var deprecations={};function deprecateSimple(name,msg){if(!deprecations[name]){warn(msg);deprecations[name]=true;}}utils_hooks__hooks.suppressDeprecationWarnings=false;var from_string__isoRegex=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/;var isoDates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]];var isoTimes=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]];var aspNetJsonRegex=/^\/?Date\((\-?\d+)/i;function configFromISO(config){var i,l,string=config._i,match=from_string__isoRegex.exec(string);if(match){getParsingFlags(config).iso=true;for(i=0,l=isoDates.length;i<l;i++){if(isoDates[i][1].exec(string)){config._f=isoDates[i][0];break;}}for(i=0,l=isoTimes.length;i<l;i++){if(isoTimes[i][1].exec(string)){config._f+=(match[6]||" ")+isoTimes[i][0];break;}}if(string.match(matchOffset)){config._f+="Z";}configFromStringAndFormat(config);}else{config._isValid=false;}}function configFromString(config){var matched=aspNetJsonRegex.exec(config._i);if(matched!==null){config._d=new Date(+matched[1]);return;}configFromISO(config);if(config._isValid===false){delete config._isValid;utils_hooks__hooks.createFromInputFallback(config);}}utils_hooks__hooks.createFromInputFallback=deprecate("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(config){config._d=new Date(config._i+(config._useUTC?" UTC":""));});function createDate(y,m,d,h,M,s,ms){var date=new Date(y,m,d,h,M,s,ms);if(y<1970){date.setFullYear(y);}return date;}function createUTCDate(y){var date=new Date(Date.UTC.apply(null,arguments));if(y<1970){date.setUTCFullYear(y);}return date;}addFormatToken(0,["YY",2],0,function(){return this.year()%100;});addFormatToken(0,["YYYY",4],0,"year");addFormatToken(0,["YYYYY",5],0,"year");addFormatToken(0,["YYYYYY",6,true],0,"year");addUnitAlias("year","y");addRegexToken("Y",matchSigned);addRegexToken("YY",match1to2,match2);addRegexToken("YYYY",match1to4,match4);addRegexToken("YYYYY",match1to6,match6);addRegexToken("YYYYYY",match1to6,match6);addParseToken(["YYYYY","YYYYYY"],YEAR);addParseToken("YYYY",function(input,array){array[YEAR]=input.length===2?utils_hooks__hooks.parseTwoDigitYear(input):toInt(input);});addParseToken("YY",function(input,array){array[YEAR]=utils_hooks__hooks.parseTwoDigitYear(input);});function daysInYear(year){return isLeapYear(year)?366:365;}function isLeapYear(year){return(year%4===0&&year%100!==0)||year%400===0;}utils_hooks__hooks.parseTwoDigitYear=function(input){return toInt(input)+(toInt(input)>68?1900:2000);};var getSetYear=makeGetSet("FullYear",false);function getIsLeapYear(){return isLeapYear(this.year());}addFormatToken("w",["ww",2],"wo","week");addFormatToken("W",["WW",2],"Wo","isoWeek");addUnitAlias("week","w");addUnitAlias("isoWeek","W");addRegexToken("w",match1to2);addRegexToken("ww",match1to2,match2);addRegexToken("W",match1to2);addRegexToken("WW",match1to2,match2);addWeekParseToken(["w","ww","W","WW"],function(input,week,config,token){week[token.substr(0,1)]=toInt(input);});function weekOfYear(mom,firstDayOfWeek,firstDayOfWeekOfYear){var end=firstDayOfWeekOfYear-firstDayOfWeek,daysToDayOfWeek=firstDayOfWeekOfYear-mom.day(),adjustedMoment;if(daysToDayOfWeek>end){daysToDayOfWeek-=7;}if(daysToDayOfWeek<end-7){daysToDayOfWeek+=7;}adjustedMoment=local__createLocal(mom).add(daysToDayOfWeek,"d");return{week:Math.ceil(adjustedMoment.dayOfYear()/7),year:adjustedMoment.year()};}function localeWeek(mom){return weekOfYear(mom,this._week.dow,this._week.doy).week;}var defaultLocaleWeek={dow:0,doy:6};function localeFirstDayOfWeek(){return this._week.dow;}function localeFirstDayOfYear(){return this._week.doy;}function getSetWeek(input){var week=this.localeData().week(this);return input==null?week:this.add((input-week)*7,"d");}function getSetISOWeek(input){var week=weekOfYear(this,1,4).week;return input==null?week:this.add((input-week)*7,"d");}addFormatToken("DDD",["DDDD",3],"DDDo","dayOfYear");addUnitAlias("dayOfYear","DDD");addRegexToken("DDD",match1to3);addRegexToken("DDDD",match3);addParseToken(["DDD","DDDD"],function(input,array,config){config._dayOfYear=toInt(input);});function dayOfYearFromWeeks(year,week,weekday,firstDayOfWeekOfYear,firstDayOfWeek){var week1Jan=6+firstDayOfWeek-firstDayOfWeekOfYear,janX=createUTCDate(year,0,1+week1Jan),d=janX.getUTCDay(),dayOfYear;if(d<firstDayOfWeek){d+=7;}weekday=weekday!=null?1*weekday:firstDayOfWeek;dayOfYear=1+week1Jan+7*(week-1)-d+weekday;return{year:dayOfYear>0?year:year-1,dayOfYear:dayOfYear>0?dayOfYear:daysInYear(year-1)+dayOfYear};}function getSetDayOfYear(input){var dayOfYear=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/86400000)+1;return input==null?dayOfYear:this.add((input-dayOfYear),"d");}function defaults(a,b,c){if(a!=null){return a;}if(b!=null){return b;}return c;}function currentDateArray(config){var now=new Date();if(config._useUTC){return[now.getUTCFullYear(),now.getUTCMonth(),now.getUTCDate()];}return[now.getFullYear(),now.getMonth(),now.getDate()];}function configFromArray(config){var i,date,input=[],currentDate,yearToUse;if(config._d){return;}currentDate=currentDateArray(config);if(config._w&&config._a[DATE]==null&&config._a[MONTH]==null){dayOfYearFromWeekInfo(config);}if(config._dayOfYear){yearToUse=defaults(config._a[YEAR],currentDate[YEAR]);if(config._dayOfYear>daysInYear(yearToUse)){getParsingFlags(config)._overflowDayOfYear=true;}date=createUTCDate(yearToUse,0,config._dayOfYear);config._a[MONTH]=date.getUTCMonth();config._a[DATE]=date.getUTCDate();}for(i=0;i<3&&config._a[i]==null;++i){config._a[i]=input[i]=currentDate[i];}for(;i<7;i++){config._a[i]=input[i]=(config._a[i]==null)?(i===2?1:0):config._a[i];}if(config._a[HOUR]===24&&config._a[MINUTE]===0&&config._a[SECOND]===0&&config._a[MILLISECOND]===0){config._nextDay=true;config._a[HOUR]=0;}config._d=(config._useUTC?createUTCDate:createDate).apply(null,input);if(config._tzm!=null){config._d.setUTCMinutes(config._d.getUTCMinutes()-config._tzm);}if(config._nextDay){config._a[HOUR]=24;}}function dayOfYearFromWeekInfo(config){var w,weekYear,week,weekday,dow,doy,temp;w=config._w;if(w.GG!=null||w.W!=null||w.E!=null){dow=1;doy=4;weekYear=defaults(w.GG,config._a[YEAR],weekOfYear(local__createLocal(),1,4).year);week=defaults(w.W,1);weekday=defaults(w.E,1);}else{dow=config._locale._week.dow;doy=config._locale._week.doy;weekYear=defaults(w.gg,config._a[YEAR],weekOfYear(local__createLocal(),dow,doy).year);week=defaults(w.w,1);if(w.d!=null){weekday=w.d;if(weekday<dow){++week;}}else{if(w.e!=null){weekday=w.e+dow;}else{weekday=dow;}}}temp=dayOfYearFromWeeks(weekYear,week,weekday,doy,dow);config._a[YEAR]=temp.year;config._dayOfYear=temp.dayOfYear;}utils_hooks__hooks.ISO_8601=function(){};function configFromStringAndFormat(config){if(config._f===utils_hooks__hooks.ISO_8601){configFromISO(config);return;}config._a=[];getParsingFlags(config).empty=true;var string=""+config._i,i,parsedInput,tokens,token,skipped,stringLength=string.length,totalParsedInputLength=0;tokens=expandFormat(config._f,config._locale).match(formattingTokens)||[];for(i=0;i<tokens.length;i++){token=tokens[i];parsedInput=(string.match(getParseRegexForToken(token,config))||[])[0];if(parsedInput){skipped=string.substr(0,string.indexOf(parsedInput));if(skipped.length>0){getParsingFlags(config).unusedInput.push(skipped);}string=string.slice(string.indexOf(parsedInput)+parsedInput.length);totalParsedInputLength+=parsedInput.length;}if(formatTokenFunctions[token]){if(parsedInput){getParsingFlags(config).empty=false;}else{getParsingFlags(config).unusedTokens.push(token);}addTimeToArrayFromToken(token,parsedInput,config);}else{if(config._strict&&!parsedInput){getParsingFlags(config).unusedTokens.push(token);}}}getParsingFlags(config).charsLeftOver=stringLength-totalParsedInputLength;if(string.length>0){getParsingFlags(config).unusedInput.push(string);}if(getParsingFlags(config).bigHour===true&&config._a[HOUR]<=12&&config._a[HOUR]>0){getParsingFlags(config).bigHour=undefined;}config._a[HOUR]=meridiemFixWrap(config._locale,config._a[HOUR],config._meridiem);configFromArray(config);checkOverflow(config);}function meridiemFixWrap(locale,hour,meridiem){var isPm;if(meridiem==null){return hour;}if(locale.meridiemHour!=null){return locale.meridiemHour(hour,meridiem);}else{if(locale.isPM!=null){isPm=locale.isPM(meridiem);if(isPm&&hour<12){hour+=12;}if(!isPm&&hour===12){hour=0;}return hour;}else{return hour;}}}function configFromStringAndArray(config){var tempConfig,bestMoment,scoreToBeat,i,currentScore;if(config._f.length===0){getParsingFlags(config).invalidFormat=true;config._d=new Date(NaN);return;}for(i=0;i<config._f.length;i++){currentScore=0;tempConfig=copyConfig({},config);if(config._useUTC!=null){tempConfig._useUTC=config._useUTC;}tempConfig._f=config._f[i];configFromStringAndFormat(tempConfig);if(!valid__isValid(tempConfig)){continue;}currentScore+=getParsingFlags(tempConfig).charsLeftOver;currentScore+=getParsingFlags(tempConfig).unusedTokens.length*10;getParsingFlags(tempConfig).score=currentScore;if(scoreToBeat==null||currentScore<scoreToBeat){scoreToBeat=currentScore;bestMoment=tempConfig;}}extend(config,bestMoment||tempConfig);}function configFromObject(config){if(config._d){return;}var i=normalizeObjectUnits(config._i);config._a=[i.year,i.month,i.day||i.date,i.hour,i.minute,i.second,i.millisecond];configFromArray(config);}function createFromConfig(config){var res=new Moment(checkOverflow(prepareConfig(config)));if(res._nextDay){res.add(1,"d");res._nextDay=undefined;}return res;}function prepareConfig(config){var input=config._i,format=config._f;config._locale=config._locale||locale_locales__getLocale(config._l);if(input===null||(format===undefined&&input==="")){return valid__createInvalid({nullInput:true});}if(typeof input==="string"){config._i=input=config._locale.preparse(input);}if(isMoment(input)){return new Moment(checkOverflow(input));}else{if(isArray(format)){configFromStringAndArray(config);}else{if(format){configFromStringAndFormat(config);}else{if(isDate(input)){config._d=input;}else{configFromInput(config);}}}}return config;}function configFromInput(config){var input=config._i;if(input===undefined){config._d=new Date();}else{if(isDate(input)){config._d=new Date(+input);}else{if(typeof input==="string"){configFromString(config);}else{if(isArray(input)){config._a=map(input.slice(0),function(obj){return parseInt(obj,10);});configFromArray(config);}else{if(typeof(input)==="object"){configFromObject(config);}else{if(typeof(input)==="number"){config._d=new Date(input);}else{utils_hooks__hooks.createFromInputFallback(config);}}}}}}}function createLocalOrUTC(input,format,locale,strict,isUTC){var c={};if(typeof(locale)==="boolean"){strict=locale;locale=undefined;}c._isAMomentObject=true;c._useUTC=c._isUTC=isUTC;c._l=locale;c._i=input;c._f=format;c._strict=strict;return createFromConfig(c);}function local__createLocal(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,false);}var prototypeMin=deprecate("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var other=local__createLocal.apply(null,arguments);return other<this?this:other;});var prototypeMax=deprecate("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var other=local__createLocal.apply(null,arguments);return other>this?this:other;});function pickBy(fn,moments){var res,i;if(moments.length===1&&isArray(moments[0])){moments=moments[0];}if(!moments.length){return local__createLocal();}res=moments[0];for(i=1;i<moments.length;++i){if(!moments[i].isValid()||moments[i][fn](res)){res=moments[i];}}return res;}function min(){var args=[].slice.call(arguments,0);return pickBy("isBefore",args);}function max(){var args=[].slice.call(arguments,0);return pickBy("isAfter",args);}function Duration(duration){var normalizedInput=normalizeObjectUnits(duration),years=normalizedInput.year||0,quarters=normalizedInput.quarter||0,months=normalizedInput.month||0,weeks=normalizedInput.week||0,days=normalizedInput.day||0,hours=normalizedInput.hour||0,minutes=normalizedInput.minute||0,seconds=normalizedInput.second||0,milliseconds=normalizedInput.millisecond||0;this._milliseconds=+milliseconds+seconds*1000+minutes*60000+hours*3600000;this._days=+days+weeks*7;this._months=+months+quarters*3+years*12;this._data={};this._locale=locale_locales__getLocale();this._bubble();}function isDuration(obj){return obj instanceof Duration;}function offset(token,separator){addFormatToken(token,0,0,function(){var offset=this.utcOffset();var sign="+";if(offset<0){offset=-offset;sign="-";}return sign+zeroFill(~~(offset/60),2)+separator+zeroFill(~~(offset)%60,2);});}offset("Z",":");offset("ZZ","");addRegexToken("Z",matchOffset);addRegexToken("ZZ",matchOffset);addParseToken(["Z","ZZ"],function(input,array,config){config._useUTC=true;config._tzm=offsetFromString(input);});var chunkOffset=/([\+\-]|\d\d)/gi;function offsetFromString(string){var matches=((string||"").match(matchOffset)||[]);var chunk=matches[matches.length-1]||[];var parts=(chunk+"").match(chunkOffset)||["-",0,0];var minutes=+(parts[1]*60)+toInt(parts[2]);return parts[0]==="+"?minutes:-minutes;}function cloneWithOffset(input,model){var res,diff;if(model._isUTC){res=model.clone();diff=(isMoment(input)||isDate(input)?+input:+local__createLocal(input))-(+res);res._d.setTime(+res._d+diff);utils_hooks__hooks.updateOffset(res,false);return res;}else{return local__createLocal(input).local();}}function getDateOffset(m){return -Math.round(m._d.getTimezoneOffset()/15)*15;}utils_hooks__hooks.updateOffset=function(){};function getSetOffset(input,keepLocalTime){var offset=this._offset||0,localAdjust;if(input!=null){if(typeof input==="string"){input=offsetFromString(input);}if(Math.abs(input)<16){input=input*60;}if(!this._isUTC&&keepLocalTime){localAdjust=getDateOffset(this);}this._offset=input;this._isUTC=true;if(localAdjust!=null){this.add(localAdjust,"m");}if(offset!==input){if(!keepLocalTime||this._changeInProgress){add_subtract__addSubtract(this,create__createDuration(input-offset,"m"),1,false);}else{if(!this._changeInProgress){this._changeInProgress=true;utils_hooks__hooks.updateOffset(this,true);this._changeInProgress=null;}}}return this;}else{return this._isUTC?offset:getDateOffset(this);}}function getSetZone(input,keepLocalTime){if(input!=null){if(typeof input!=="string"){input=-input;}this.utcOffset(input,keepLocalTime);return this;}else{return -this.utcOffset();}}function setOffsetToUTC(keepLocalTime){return this.utcOffset(0,keepLocalTime);}function setOffsetToLocal(keepLocalTime){if(this._isUTC){this.utcOffset(0,keepLocalTime);this._isUTC=false;if(keepLocalTime){this.subtract(getDateOffset(this),"m");}}return this;}function setOffsetToParsedOffset(){if(this._tzm){this.utcOffset(this._tzm);}else{if(typeof this._i==="string"){this.utcOffset(offsetFromString(this._i));}}return this;}function hasAlignedHourOffset(input){input=input?local__createLocal(input).utcOffset():0;return(this.utcOffset()-input)%60===0;}function isDaylightSavingTime(){return(this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset());}function isDaylightSavingTimeShifted(){if(typeof this._isDSTShifted!=="undefined"){return this._isDSTShifted;}var c={};copyConfig(c,this);c=prepareConfig(c);if(c._a){var other=c._isUTC?create_utc__createUTC(c._a):local__createLocal(c._a);this._isDSTShifted=this.isValid()&&compareArrays(c._a,other.toArray())>0;}else{this._isDSTShifted=false;}return this._isDSTShifted;}function isLocal(){return !this._isUTC;}function isUtcOffset(){return this._isUTC;}function isUtc(){return this._isUTC&&this._offset===0;}var aspNetRegex=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/;var create__isoRegex=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;function create__createDuration(input,key){var duration=input,match=null,sign,ret,diffRes;if(isDuration(input)){duration={ms:input._milliseconds,d:input._days,M:input._months};}else{if(typeof input==="number"){duration={};if(key){duration[key]=input;}else{duration.milliseconds=input;}}else{if(!!(match=aspNetRegex.exec(input))){sign=(match[1]==="-")?-1:1;duration={y:0,d:toInt(match[DATE])*sign,h:toInt(match[HOUR])*sign,m:toInt(match[MINUTE])*sign,s:toInt(match[SECOND])*sign,ms:toInt(match[MILLISECOND])*sign};}else{if(!!(match=create__isoRegex.exec(input))){sign=(match[1]==="-")?-1:1;duration={y:parseIso(match[2],sign),M:parseIso(match[3],sign),d:parseIso(match[4],sign),h:parseIso(match[5],sign),m:parseIso(match[6],sign),s:parseIso(match[7],sign),w:parseIso(match[8],sign)};}else{if(duration==null){duration={};}else{if(typeof duration==="object"&&("from" in duration||"to" in duration)){diffRes=momentsDifference(local__createLocal(duration.from),local__createLocal(duration.to));duration={};duration.ms=diffRes.milliseconds;duration.M=diffRes.months;}}}}}}ret=new Duration(duration);if(isDuration(input)&&hasOwnProp(input,"_locale")){ret._locale=input._locale;}return ret;}create__createDuration.fn=Duration.prototype;function parseIso(inp,sign){var res=inp&&parseFloat(inp.replace(",","."));return(isNaN(res)?0:res)*sign;}function positiveMomentsDifference(base,other){var res={milliseconds:0,months:0};res.months=other.month()-base.month()+(other.year()-base.year())*12;if(base.clone().add(res.months,"M").isAfter(other)){--res.months;}res.milliseconds=+other-+(base.clone().add(res.months,"M"));return res;}function momentsDifference(base,other){var res;other=cloneWithOffset(other,base);if(base.isBefore(other)){res=positiveMomentsDifference(base,other);}else{res=positiveMomentsDifference(other,base);res.milliseconds=-res.milliseconds;res.months=-res.months;}return res;}function createAdder(direction,name){return function(val,period){var dur,tmp;if(period!==null&&!isNaN(+period)){deprecateSimple(name,"moment()."+name+"(period, number) is deprecated. Please use moment()."+name+"(number, period).");tmp=val;val=period;period=tmp;}val=typeof val==="string"?+val:val;dur=create__createDuration(val,period);add_subtract__addSubtract(this,dur,direction);return this;};}function add_subtract__addSubtract(mom,duration,isAdding,updateOffset){var milliseconds=duration._milliseconds,days=duration._days,months=duration._months;updateOffset=updateOffset==null?true:updateOffset;if(milliseconds){mom._d.setTime(+mom._d+milliseconds*isAdding);}if(days){get_set__set(mom,"Date",get_set__get(mom,"Date")+days*isAdding);}if(months){setMonth(mom,get_set__get(mom,"Month")+months*isAdding);}if(updateOffset){utils_hooks__hooks.updateOffset(mom,days||months);}}var add_subtract__add=createAdder(1,"add");var add_subtract__subtract=createAdder(-1,"subtract");function moment_calendar__calendar(time,formats){var now=time||local__createLocal(),sod=cloneWithOffset(now,this).startOf("day"),diff=this.diff(sod,"days",true),format=diff<-6?"sameElse":diff<-1?"lastWeek":diff<0?"lastDay":diff<1?"sameDay":diff<2?"nextDay":diff<7?"nextWeek":"sameElse";return this.format(formats&&formats[format]||this.localeData().calendar(format,this,local__createLocal(now)));}function clone(){return new Moment(this);}function isAfter(input,units){var inputMs;units=normalizeUnits(typeof units!=="undefined"?units:"millisecond");if(units==="millisecond"){input=isMoment(input)?input:local__createLocal(input);return +this>+input;}else{inputMs=isMoment(input)?+input:+local__createLocal(input);return inputMs<+this.clone().startOf(units);}}function isBefore(input,units){var inputMs;units=normalizeUnits(typeof units!=="undefined"?units:"millisecond");if(units==="millisecond"){input=isMoment(input)?input:local__createLocal(input);return +this<+input;}else{inputMs=isMoment(input)?+input:+local__createLocal(input);return +this.clone().endOf(units)<inputMs;}}function isBetween(from,to,units){return this.isAfter(from,units)&&this.isBefore(to,units);}function isSame(input,units){var inputMs;units=normalizeUnits(units||"millisecond");if(units==="millisecond"){input=isMoment(input)?input:local__createLocal(input);return +this===+input;}else{inputMs=+local__createLocal(input);return +(this.clone().startOf(units))<=inputMs&&inputMs<=+(this.clone().endOf(units));}}function diff(input,units,asFloat){var that=cloneWithOffset(input,this),zoneDelta=(that.utcOffset()-this.utcOffset())*60000,delta,output;units=normalizeUnits(units);if(units==="year"||units==="month"||units==="quarter"){output=monthDiff(this,that);if(units==="quarter"){output=output/3;}else{if(units==="year"){output=output/12;}}}else{delta=this-that;output=units==="second"?delta/1000:units==="minute"?delta/60000:units==="hour"?delta/3600000:units==="day"?(delta-zoneDelta)/86400000:units==="week"?(delta-zoneDelta)/604800000:delta;}return asFloat?output:absFloor(output);}function monthDiff(a,b){var wholeMonthDiff=((b.year()-a.year())*12)+(b.month()-a.month()),anchor=a.clone().add(wholeMonthDiff,"months"),anchor2,adjust;if(b-anchor<0){anchor2=a.clone().add(wholeMonthDiff-1,"months");adjust=(b-anchor)/(anchor-anchor2);}else{anchor2=a.clone().add(wholeMonthDiff+1,"months");adjust=(b-anchor)/(anchor2-anchor);}return -(wholeMonthDiff+adjust);}utils_hooks__hooks.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";function toString(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ");}function moment_format__toISOString(){var m=this.clone().utc();if(0<m.year()&&m.year()<=9999){if("function"===typeof Date.prototype.toISOString){return this.toDate().toISOString();}else{return formatMoment(m,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]");}}else{return formatMoment(m,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]");}}function format(inputString){var output=formatMoment(this,inputString||utils_hooks__hooks.defaultFormat);return this.localeData().postformat(output);}function from(time,withoutSuffix){if(!this.isValid()){return this.localeData().invalidDate();}return create__createDuration({to:this,from:time}).locale(this.locale()).humanize(!withoutSuffix);}function fromNow(withoutSuffix){return this.from(local__createLocal(),withoutSuffix);}function to(time,withoutSuffix){if(!this.isValid()){return this.localeData().invalidDate();}return create__createDuration({from:this,to:time}).locale(this.locale()).humanize(!withoutSuffix);}function toNow(withoutSuffix){return this.to(local__createLocal(),withoutSuffix);}function locale(key){var newLocaleData;if(key===undefined){return this._locale._abbr;}else{newLocaleData=locale_locales__getLocale(key);if(newLocaleData!=null){this._locale=newLocaleData;}return this;}}var lang=deprecate("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(key){if(key===undefined){return this.localeData();}else{return this.locale(key);}});function localeData(){return this._locale;}function startOf(units){units=normalizeUnits(units);switch(units){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0);}if(units==="week"){this.weekday(0);}if(units==="isoWeek"){this.isoWeekday(1);}if(units==="quarter"){this.month(Math.floor(this.month()/3)*3);}return this;}function endOf(units){units=normalizeUnits(units);if(units===undefined||units==="millisecond"){return this;}return this.startOf(units).add(1,(units==="isoWeek"?"week":units)).subtract(1,"ms");}function to_type__valueOf(){return +this._d-((this._offset||0)*60000);}function unix(){return Math.floor(+this/1000);}function toDate(){return this._offset?new Date(+this):this._d;}function toArray(){var m=this;return[m.year(),m.month(),m.date(),m.hour(),m.minute(),m.second(),m.millisecond()];}function toObject(){var m=this;return{years:m.year(),months:m.month(),date:m.date(),hours:m.hours(),minutes:m.minutes(),seconds:m.seconds(),milliseconds:m.milliseconds()};}function moment_valid__isValid(){return valid__isValid(this);}function parsingFlags(){return extend({},getParsingFlags(this));}function invalidAt(){return getParsingFlags(this).overflow;}addFormatToken(0,["gg",2],0,function(){return this.weekYear()%100;});addFormatToken(0,["GG",2],0,function(){return this.isoWeekYear()%100;});function addWeekYearFormatToken(token,getter){addFormatToken(0,[token,token.length],0,getter);}addWeekYearFormatToken("gggg","weekYear");addWeekYearFormatToken("ggggg","weekYear");addWeekYearFormatToken("GGGG","isoWeekYear");addWeekYearFormatToken("GGGGG","isoWeekYear");addUnitAlias("weekYear","gg");addUnitAlias("isoWeekYear","GG");addRegexToken("G",matchSigned);addRegexToken("g",matchSigned);addRegexToken("GG",match1to2,match2);addRegexToken("gg",match1to2,match2);addRegexToken("GGGG",match1to4,match4);addRegexToken("gggg",match1to4,match4);addRegexToken("GGGGG",match1to6,match6);addRegexToken("ggggg",match1to6,match6);addWeekParseToken(["gggg","ggggg","GGGG","GGGGG"],function(input,week,config,token){week[token.substr(0,2)]=toInt(input);});addWeekParseToken(["gg","GG"],function(input,week,config,token){week[token]=utils_hooks__hooks.parseTwoDigitYear(input);});function weeksInYear(year,dow,doy){return weekOfYear(local__createLocal([year,11,31+dow-doy]),dow,doy).week;}function getSetWeekYear(input){var year=weekOfYear(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return input==null?year:this.add((input-year),"y");}function getSetISOWeekYear(input){var year=weekOfYear(this,1,4).year;return input==null?year:this.add((input-year),"y");}function getISOWeeksInYear(){return weeksInYear(this.year(),1,4);}function getWeeksInYear(){var weekInfo=this.localeData()._week;return weeksInYear(this.year(),weekInfo.dow,weekInfo.doy);}addFormatToken("Q",0,0,"quarter");addUnitAlias("quarter","Q");addRegexToken("Q",match1);addParseToken("Q",function(input,array){array[MONTH]=(toInt(input)-1)*3;});function getSetQuarter(input){return input==null?Math.ceil((this.month()+1)/3):this.month((input-1)*3+this.month()%3);}addFormatToken("D",["DD",2],"Do","date");addUnitAlias("date","D");addRegexToken("D",match1to2);addRegexToken("DD",match1to2,match2);addRegexToken("Do",function(isStrict,locale){return isStrict?locale._ordinalParse:locale._ordinalParseLenient;});addParseToken(["D","DD"],DATE);addParseToken("Do",function(input,array){array[DATE]=toInt(input.match(match1to2)[0],10);});var getSetDayOfMonth=makeGetSet("Date",true);addFormatToken("d",0,"do","day");addFormatToken("dd",0,0,function(format){return this.localeData().weekdaysMin(this,format);});addFormatToken("ddd",0,0,function(format){return this.localeData().weekdaysShort(this,format);});addFormatToken("dddd",0,0,function(format){return this.localeData().weekdays(this,format);});addFormatToken("e",0,0,"weekday");addFormatToken("E",0,0,"isoWeekday");addUnitAlias("day","d");addUnitAlias("weekday","e");addUnitAlias("isoWeekday","E");addRegexToken("d",match1to2);addRegexToken("e",match1to2);addRegexToken("E",match1to2);addRegexToken("dd",matchWord);addRegexToken("ddd",matchWord);addRegexToken("dddd",matchWord);addWeekParseToken(["dd","ddd","dddd"],function(input,week,config){var weekday=config._locale.weekdaysParse(input);if(weekday!=null){week.d=weekday;}else{getParsingFlags(config).invalidWeekday=input;}});addWeekParseToken(["d","e","E"],function(input,week,config,token){week[token]=toInt(input);});function parseWeekday(input,locale){if(typeof input!=="string"){return input;}if(!isNaN(input)){return parseInt(input,10);}input=locale.weekdaysParse(input);if(typeof input==="number"){return input;}return null;}var defaultLocaleWeekdays="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");function localeWeekdays(m){return this._weekdays[m.day()];}var defaultLocaleWeekdaysShort="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");function localeWeekdaysShort(m){return this._weekdaysShort[m.day()];}var defaultLocaleWeekdaysMin="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function localeWeekdaysMin(m){return this._weekdaysMin[m.day()];}function localeWeekdaysParse(weekdayName){var i,mom,regex;this._weekdaysParse=this._weekdaysParse||[];for(i=0;i<7;i++){if(!this._weekdaysParse[i]){mom=local__createLocal([2000,1]).day(i);regex="^"+this.weekdays(mom,"")+"|^"+this.weekdaysShort(mom,"")+"|^"+this.weekdaysMin(mom,"");this._weekdaysParse[i]=new RegExp(regex.replace(".",""),"i");}if(this._weekdaysParse[i].test(weekdayName)){return i;}}}function getSetDayOfWeek(input){var day=this._isUTC?this._d.getUTCDay():this._d.getDay();if(input!=null){input=parseWeekday(input,this.localeData());return this.add(input-day,"d");}else{return day;}}function getSetLocaleDayOfWeek(input){var weekday=(this.day()+7-this.localeData()._week.dow)%7;return input==null?weekday:this.add(input-weekday,"d");}function getSetISODayOfWeek(input){return input==null?this.day()||7:this.day(this.day()%7?input:input-7);}addFormatToken("H",["HH",2],0,"hour");addFormatToken("h",["hh",2],0,function(){return this.hours()%12||12;});function meridiem(token,lowercase){addFormatToken(token,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),lowercase);});}meridiem("a",true);meridiem("A",false);addUnitAlias("hour","h");function matchMeridiem(isStrict,locale){return locale._meridiemParse;}addRegexToken("a",matchMeridiem);addRegexToken("A",matchMeridiem);addRegexToken("H",match1to2);addRegexToken("h",match1to2);addRegexToken("HH",match1to2,match2);addRegexToken("hh",match1to2,match2);addParseToken(["H","HH"],HOUR);addParseToken(["a","A"],function(input,array,config){config._isPm=config._locale.isPM(input);config._meridiem=input;});addParseToken(["h","hh"],function(input,array,config){array[HOUR]=toInt(input);getParsingFlags(config).bigHour=true;});function localeIsPM(input){return((input+"").toLowerCase().charAt(0)==="p");}var defaultLocaleMeridiemParse=/[ap]\.?m?\.?/i;function localeMeridiem(hours,minutes,isLower){if(hours>11){return isLower?"pm":"PM";}else{return isLower?"am":"AM";}}var getSetHour=makeGetSet("Hours",true);addFormatToken("m",["mm",2],0,"minute");addUnitAlias("minute","m");addRegexToken("m",match1to2);addRegexToken("mm",match1to2,match2);addParseToken(["m","mm"],MINUTE);var getSetMinute=makeGetSet("Minutes",false);addFormatToken("s",["ss",2],0,"second");addUnitAlias("second","s");addRegexToken("s",match1to2);addRegexToken("ss",match1to2,match2);addParseToken(["s","ss"],SECOND);var getSetSecond=makeGetSet("Seconds",false);addFormatToken("S",0,0,function(){return ~~(this.millisecond()/100);});addFormatToken(0,["SS",2],0,function(){return ~~(this.millisecond()/10);});addFormatToken(0,["SSS",3],0,"millisecond");addFormatToken(0,["SSSS",4],0,function(){return this.millisecond()*10;});addFormatToken(0,["SSSSS",5],0,function(){return this.millisecond()*100;});addFormatToken(0,["SSSSSS",6],0,function(){return this.millisecond()*1000;});addFormatToken(0,["SSSSSSS",7],0,function(){return this.millisecond()*10000;});addFormatToken(0,["SSSSSSSS",8],0,function(){return this.millisecond()*100000;});addFormatToken(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1000000;});addUnitAlias("millisecond","ms");addRegexToken("S",match1to3,match1);addRegexToken("SS",match1to3,match2);addRegexToken("SSS",match1to3,match3);var token;for(token="SSSS";token.length<=9;token+="S"){addRegexToken(token,matchUnsigned);}function parseMs(input,array){array[MILLISECOND]=toInt(("0."+input)*1000);}for(token="S";token.length<=9;token+="S"){addParseToken(token,parseMs);}var getSetMillisecond=makeGetSet("Milliseconds",false);addFormatToken("z",0,0,"zoneAbbr");addFormatToken("zz",0,0,"zoneName");function getZoneAbbr(){return this._isUTC?"UTC":"";}function getZoneName(){return this._isUTC?"Coordinated Universal Time":"";}var momentPrototype__proto=Moment.prototype;momentPrototype__proto.add=add_subtract__add;momentPrototype__proto.calendar=moment_calendar__calendar;momentPrototype__proto.clone=clone;momentPrototype__proto.diff=diff;momentPrototype__proto.endOf=endOf;momentPrototype__proto.format=format;momentPrototype__proto.from=from;momentPrototype__proto.fromNow=fromNow;momentPrototype__proto.to=to;momentPrototype__proto.toNow=toNow;momentPrototype__proto.get=getSet;momentPrototype__proto.invalidAt=invalidAt;momentPrototype__proto.isAfter=isAfter;momentPrototype__proto.isBefore=isBefore;momentPrototype__proto.isBetween=isBetween;momentPrototype__proto.isSame=isSame;momentPrototype__proto.isValid=moment_valid__isValid;momentPrototype__proto.lang=lang;momentPrototype__proto.locale=locale;momentPrototype__proto.localeData=localeData;momentPrototype__proto.max=prototypeMax;momentPrototype__proto.min=prototypeMin;momentPrototype__proto.parsingFlags=parsingFlags;momentPrototype__proto.set=getSet;momentPrototype__proto.startOf=startOf;momentPrototype__proto.subtract=add_subtract__subtract;momentPrototype__proto.toArray=toArray;momentPrototype__proto.toObject=toObject;momentPrototype__proto.toDate=toDate;momentPrototype__proto.toISOString=moment_format__toISOString;momentPrototype__proto.toJSON=moment_format__toISOString;momentPrototype__proto.toString=toString;momentPrototype__proto.unix=unix;momentPrototype__proto.valueOf=to_type__valueOf;momentPrototype__proto.year=getSetYear;momentPrototype__proto.isLeapYear=getIsLeapYear;momentPrototype__proto.weekYear=getSetWeekYear;momentPrototype__proto.isoWeekYear=getSetISOWeekYear;momentPrototype__proto.quarter=momentPrototype__proto.quarters=getSetQuarter;momentPrototype__proto.month=getSetMonth;momentPrototype__proto.daysInMonth=getDaysInMonth;momentPrototype__proto.week=momentPrototype__proto.weeks=getSetWeek;momentPrototype__proto.isoWeek=momentPrototype__proto.isoWeeks=getSetISOWeek;momentPrototype__proto.weeksInYear=getWeeksInYear;momentPrototype__proto.isoWeeksInYear=getISOWeeksInYear;momentPrototype__proto.date=getSetDayOfMonth;momentPrototype__proto.day=momentPrototype__proto.days=getSetDayOfWeek;momentPrototype__proto.weekday=getSetLocaleDayOfWeek;momentPrototype__proto.isoWeekday=getSetISODayOfWeek;momentPrototype__proto.dayOfYear=getSetDayOfYear;momentPrototype__proto.hour=momentPrototype__proto.hours=getSetHour;momentPrototype__proto.minute=momentPrototype__proto.minutes=getSetMinute;momentPrototype__proto.second=momentPrototype__proto.seconds=getSetSecond;momentPrototype__proto.millisecond=momentPrototype__proto.milliseconds=getSetMillisecond;momentPrototype__proto.utcOffset=getSetOffset;momentPrototype__proto.utc=setOffsetToUTC;momentPrototype__proto.local=setOffsetToLocal;momentPrototype__proto.parseZone=setOffsetToParsedOffset;momentPrototype__proto.hasAlignedHourOffset=hasAlignedHourOffset;momentPrototype__proto.isDST=isDaylightSavingTime;momentPrototype__proto.isDSTShifted=isDaylightSavingTimeShifted;momentPrototype__proto.isLocal=isLocal;momentPrototype__proto.isUtcOffset=isUtcOffset;momentPrototype__proto.isUtc=isUtc;momentPrototype__proto.isUTC=isUtc;momentPrototype__proto.zoneAbbr=getZoneAbbr;momentPrototype__proto.zoneName=getZoneName;momentPrototype__proto.dates=deprecate("dates accessor is deprecated. Use date instead.",getSetDayOfMonth);momentPrototype__proto.months=deprecate("months accessor is deprecated. Use month instead",getSetMonth);momentPrototype__proto.years=deprecate("years accessor is deprecated. Use year instead",getSetYear);momentPrototype__proto.zone=deprecate("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",getSetZone);var momentPrototype=momentPrototype__proto;function moment__createUnix(input){return local__createLocal(input*1000);}function moment__createInZone(){return local__createLocal.apply(null,arguments).parseZone();}var defaultCalendar={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function locale_calendar__calendar(key,mom,now){var output=this._calendar[key];return typeof output==="function"?output.call(mom,now):output;}var defaultLongDateFormat={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function longDateFormat(key){var format=this._longDateFormat[key],formatUpper=this._longDateFormat[key.toUpperCase()];if(format||!formatUpper){return format;}this._longDateFormat[key]=formatUpper.replace(/MMMM|MM|DD|dddd/g,function(val){return val.slice(1);});return this._longDateFormat[key];}var defaultInvalidDate="Invalid date";function invalidDate(){return this._invalidDate;}var defaultOrdinal="%d";var defaultOrdinalParse=/\d{1,2}/;function ordinal(number){return this._ordinal.replace("%d",number);}function preParsePostFormat(string){return string;}var defaultRelativeTime={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function relative__relativeTime(number,withoutSuffix,string,isFuture){var output=this._relativeTime[string];return(typeof output==="function")?output(number,withoutSuffix,string,isFuture):output.replace(/%d/i,number);}function pastFuture(diff,output){var format=this._relativeTime[diff>0?"future":"past"];return typeof format==="function"?format(output):format.replace(/%s/i,output);}function locale_set__set(config){var prop,i;for(i in config){prop=config[i];if(typeof prop==="function"){this[i]=prop;}else{this["_"+i]=prop;}}this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+(/\d{1,2}/).source);}var prototype__proto=Locale.prototype;prototype__proto._calendar=defaultCalendar;prototype__proto.calendar=locale_calendar__calendar;prototype__proto._longDateFormat=defaultLongDateFormat;prototype__proto.longDateFormat=longDateFormat;prototype__proto._invalidDate=defaultInvalidDate;prototype__proto.invalidDate=invalidDate;prototype__proto._ordinal=defaultOrdinal;prototype__proto.ordinal=ordinal;prototype__proto._ordinalParse=defaultOrdinalParse;prototype__proto.preparse=preParsePostFormat;prototype__proto.postformat=preParsePostFormat;prototype__proto._relativeTime=defaultRelativeTime;prototype__proto.relativeTime=relative__relativeTime;prototype__proto.pastFuture=pastFuture;prototype__proto.set=locale_set__set;prototype__proto.months=localeMonths;prototype__proto._months=defaultLocaleMonths;prototype__proto.monthsShort=localeMonthsShort;prototype__proto._monthsShort=defaultLocaleMonthsShort;prototype__proto.monthsParse=localeMonthsParse;prototype__proto.week=localeWeek;prototype__proto._week=defaultLocaleWeek;prototype__proto.firstDayOfYear=localeFirstDayOfYear;prototype__proto.firstDayOfWeek=localeFirstDayOfWeek;prototype__proto.weekdays=localeWeekdays;prototype__proto._weekdays=defaultLocaleWeekdays;prototype__proto.weekdaysMin=localeWeekdaysMin;prototype__proto._weekdaysMin=defaultLocaleWeekdaysMin;prototype__proto.weekdaysShort=localeWeekdaysShort;prototype__proto._weekdaysShort=defaultLocaleWeekdaysShort;prototype__proto.weekdaysParse=localeWeekdaysParse;prototype__proto.isPM=localeIsPM;prototype__proto._meridiemParse=defaultLocaleMeridiemParse;prototype__proto.meridiem=localeMeridiem;function lists__get(format,index,field,setter){var locale=locale_locales__getLocale();var utc=create_utc__createUTC().set(setter,index);return locale[field](utc,format);}function list(format,index,field,count,setter){if(typeof format==="number"){index=format;format=undefined;}format=format||"";if(index!=null){return lists__get(format,index,field,setter);}var i;var out=[];for(i=0;i<count;i++){out[i]=lists__get(format,i,field,setter);}return out;}function lists__listMonths(format,index){return list(format,index,"months",12,"month");}function lists__listMonthsShort(format,index){return list(format,index,"monthsShort",12,"month");}function lists__listWeekdays(format,index){return list(format,index,"weekdays",7,"day");}function lists__listWeekdaysShort(format,index){return list(format,index,"weekdaysShort",7,"day");}function lists__listWeekdaysMin(format,index){return list(format,index,"weekdaysMin",7,"day");}locale_locales__getSetGlobalLocale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(number){var b=number%10,output=(toInt(number%100/10)===1)?"th":(b===1)?"st":(b===2)?"nd":(b===3)?"rd":"th";return number+output;}});utils_hooks__hooks.lang=deprecate("moment.lang is deprecated. Use moment.locale instead.",locale_locales__getSetGlobalLocale);utils_hooks__hooks.langData=deprecate("moment.langData is deprecated. Use moment.localeData instead.",locale_locales__getLocale);var mathAbs=Math.abs;function duration_abs__abs(){var data=this._data;this._milliseconds=mathAbs(this._milliseconds);this._days=mathAbs(this._days);this._months=mathAbs(this._months);data.milliseconds=mathAbs(data.milliseconds);data.seconds=mathAbs(data.seconds);data.minutes=mathAbs(data.minutes);data.hours=mathAbs(data.hours);data.months=mathAbs(data.months);data.years=mathAbs(data.years);return this;}function duration_add_subtract__addSubtract(duration,input,value,direction){var other=create__createDuration(input,value);duration._milliseconds+=direction*other._milliseconds;duration._days+=direction*other._days;duration._months+=direction*other._months;return duration._bubble();}function duration_add_subtract__add(input,value){return duration_add_subtract__addSubtract(this,input,value,1);}function duration_add_subtract__subtract(input,value){return duration_add_subtract__addSubtract(this,input,value,-1);}function absCeil(number){if(number<0){return Math.floor(number);}else{return Math.ceil(number);}}function bubble(){var milliseconds=this._milliseconds;var days=this._days;var months=this._months;var data=this._data;var seconds,minutes,hours,years,monthsFromDays;if(!((milliseconds>=0&&days>=0&&months>=0)||(milliseconds<=0&&days<=0&&months<=0))){milliseconds+=absCeil(monthsToDays(months)+days)*86400000;days=0;months=0;}data.milliseconds=milliseconds%1000;seconds=absFloor(milliseconds/1000);data.seconds=seconds%60;minutes=absFloor(seconds/60);data.minutes=minutes%60;hours=absFloor(minutes/60);data.hours=hours%24;days+=absFloor(hours/24);monthsFromDays=absFloor(daysToMonths(days));months+=monthsFromDays;days-=absCeil(monthsToDays(monthsFromDays));years=absFloor(months/12);months%=12;data.days=days;data.months=months;data.years=years;return this;}function daysToMonths(days){return days*4800/146097;}function monthsToDays(months){return months*146097/4800;}function as(units){var days;var months;var milliseconds=this._milliseconds;units=normalizeUnits(units);if(units==="month"||units==="year"){days=this._days+milliseconds/86400000;months=this._months+daysToMonths(days);return units==="month"?months:months/12;}else{days=this._days+Math.round(monthsToDays(this._months));switch(units){case"week":return days/7+milliseconds/604800000;case"day":return days+milliseconds/86400000;case"hour":return days*24+milliseconds/3600000;case"minute":return days*1440+milliseconds/60000;case"second":return days*86400+milliseconds/1000;case"millisecond":return Math.floor(days*86400000)+milliseconds;default:throw new Error("Unknown unit "+units);}}}function duration_as__valueOf(){return(this._milliseconds+this._days*86400000+(this._months%12)*2592000000+toInt(this._months/12)*31536000000);}function makeAs(alias){return function(){return this.as(alias);};}var asMilliseconds=makeAs("ms");var asSeconds=makeAs("s");var asMinutes=makeAs("m");var asHours=makeAs("h");var asDays=makeAs("d");var asWeeks=makeAs("w");var asMonths=makeAs("M");var asYears=makeAs("y");function duration_get__get(units){units=normalizeUnits(units);return this[units+"s"]();}function makeGetter(name){return function(){return this._data[name];};}var milliseconds=makeGetter("milliseconds");var seconds=makeGetter("seconds");var minutes=makeGetter("minutes");var hours=makeGetter("hours");var days=makeGetter("days");var months=makeGetter("months");var years=makeGetter("years");function weeks(){return absFloor(this.days()/7);}var round=Math.round;var thresholds={s:45,m:45,h:22,d:26,M:11};function substituteTimeAgo(string,number,withoutSuffix,isFuture,locale){return locale.relativeTime(number||1,!!withoutSuffix,string,isFuture);}function duration_humanize__relativeTime(posNegDuration,withoutSuffix,locale){var duration=create__createDuration(posNegDuration).abs();var seconds=round(duration.as("s"));var minutes=round(duration.as("m"));var hours=round(duration.as("h"));var days=round(duration.as("d"));var months=round(duration.as("M"));var years=round(duration.as("y"));var a=seconds<thresholds.s&&["s",seconds]||minutes===1&&["m"]||minutes<thresholds.m&&["mm",minutes]||hours===1&&["h"]||hours<thresholds.h&&["hh",hours]||days===1&&["d"]||days<thresholds.d&&["dd",days]||months===1&&["M"]||months<thresholds.M&&["MM",months]||years===1&&["y"]||["yy",years];a[2]=withoutSuffix;a[3]=+posNegDuration>0;a[4]=locale;return substituteTimeAgo.apply(null,a);}function duration_humanize__getSetRelativeTimeThreshold(threshold,limit){if(thresholds[threshold]===undefined){return false;}if(limit===undefined){return thresholds[threshold];}thresholds[threshold]=limit;return true;}function humanize(withSuffix){var locale=this.localeData();var output=duration_humanize__relativeTime(this,!withSuffix,locale);if(withSuffix){output=locale.pastFuture(+this,output);}return locale.postformat(output);}var iso_string__abs=Math.abs;function iso_string__toISOString(){var seconds=iso_string__abs(this._milliseconds)/1000;var days=iso_string__abs(this._days);var months=iso_string__abs(this._months);var minutes,hours,years;minutes=absFloor(seconds/60);hours=absFloor(minutes/60);seconds%=60;minutes%=60;years=absFloor(months/12);months%=12;var Y=years;var M=months;var D=days;var h=hours;var m=minutes;var s=seconds;var total=this.asSeconds();if(!total){return"P0D";}return(total<0?"-":"")+"P"+(Y?Y+"Y":"")+(M?M+"M":"")+(D?D+"D":"")+((h||m||s)?"T":"")+(h?h+"H":"")+(m?m+"M":"")+(s?s+"S":"");}var duration_prototype__proto=Duration.prototype;duration_prototype__proto.abs=duration_abs__abs;duration_prototype__proto.add=duration_add_subtract__add;duration_prototype__proto.subtract=duration_add_subtract__subtract;duration_prototype__proto.as=as;duration_prototype__proto.asMilliseconds=asMilliseconds;duration_prototype__proto.asSeconds=asSeconds;duration_prototype__proto.asMinutes=asMinutes;duration_prototype__proto.asHours=asHours;duration_prototype__proto.asDays=asDays;duration_prototype__proto.asWeeks=asWeeks;duration_prototype__proto.asMonths=asMonths;duration_prototype__proto.asYears=asYears;duration_prototype__proto.valueOf=duration_as__valueOf;duration_prototype__proto._bubble=bubble;duration_prototype__proto.get=duration_get__get;duration_prototype__proto.milliseconds=milliseconds;duration_prototype__proto.seconds=seconds;duration_prototype__proto.minutes=minutes;duration_prototype__proto.hours=hours;duration_prototype__proto.days=days;duration_prototype__proto.weeks=weeks;duration_prototype__proto.months=months;duration_prototype__proto.years=years;duration_prototype__proto.humanize=humanize;duration_prototype__proto.toISOString=iso_string__toISOString;duration_prototype__proto.toString=iso_string__toISOString;duration_prototype__proto.toJSON=iso_string__toISOString;duration_prototype__proto.locale=locale;duration_prototype__proto.localeData=localeData;duration_prototype__proto.toIsoString=deprecate("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",iso_string__toISOString);duration_prototype__proto.lang=lang;addFormatToken("X",0,0,"unix");addFormatToken("x",0,0,"valueOf");addRegexToken("x",matchSigned);addRegexToken("X",matchTimestamp);addParseToken("X",function(input,array,config){config._d=new Date(parseFloat(input,10)*1000);});addParseToken("x",function(input,array,config){config._d=new Date(toInt(input));});utils_hooks__hooks.version="2.10.6";setHookCallback(local__createLocal);utils_hooks__hooks.fn=momentPrototype;utils_hooks__hooks.min=min;utils_hooks__hooks.max=max;utils_hooks__hooks.utc=create_utc__createUTC;utils_hooks__hooks.unix=moment__createUnix;utils_hooks__hooks.months=lists__listMonths;utils_hooks__hooks.isDate=isDate;utils_hooks__hooks.locale=locale_locales__getSetGlobalLocale;utils_hooks__hooks.invalid=valid__createInvalid;utils_hooks__hooks.duration=create__createDuration;utils_hooks__hooks.isMoment=isMoment;utils_hooks__hooks.weekdays=lists__listWeekdays;utils_hooks__hooks.parseZone=moment__createInZone;utils_hooks__hooks.localeData=locale_locales__getLocale;utils_hooks__hooks.isDuration=isDuration;utils_hooks__hooks.monthsShort=lists__listMonthsShort;utils_hooks__hooks.weekdaysMin=lists__listWeekdaysMin;utils_hooks__hooks.defineLocale=defineLocale;utils_hooks__hooks.weekdaysShort=lists__listWeekdaysShort;utils_hooks__hooks.normalizeUnits=normalizeUnits;utils_hooks__hooks.relativeTimeThreshold=duration_humanize__getSetRelativeTimeThreshold;var _moment=utils_hooks__hooks;return _moment;}));(function($,window){$.fn.popup=function(settings){var selector=this.selector,popup=new $.Popup(settings);$(document).on("click.popup",selector,function(e){var content=settings&&settings.content?settings.content:$(this).attr("href");e.preventDefault();popup.open(content,undefined,this);});return this.each(function(){$(this).data("popup",popup);});};$.Popup=function(settings){var p=this,defaults={backClass:"popup_back",backOpacity:0.7,containerClass:"popup_cont",closeContent:'<div class="popup_close">&times;</div>',markup:'<div class="popup"><div class="popup_content"/></div>',contentClass:"popup_content",preloaderContent:'<p class="preloader">Loading</p>',activeClass:"popup_active",hideFlash:false,speed:200,popupPlaceholderClass:"popup_placeholder",keepInlineChanges:true,modal:false,content:null,type:"auto",width:null,height:null,typeParam:"pt",widthParam:"pw",heightParam:"ph",beforeOpen:function(type){},afterOpen:function(){},beforeClose:function(){},afterClose:function(){},error:function(){},show:function($popup,$back){var plugin=this;plugin.center();$popup.animate({opacity:1},plugin.o.speed,function(){plugin.o.afterOpen.call(plugin);});},replaced:function($popup,$back){this.center().o.afterOpen.call(this);},hide:function($popup,$back){if($popup!==undefined){$popup.animate({opacity:0},this.o.speed);}},types:{inline:function(content,callback){var $content=$(content);$content.addClass(p.o.popupPlaceholderClass);if(!p.o.keepInlineChanges){cachedContent=$content.html();}callback.call(this,$content.children());},image:function(content,callback){var plugin=this;var $image=$("<img />").one("load",function(){var img=this;setTimeout(function(){callback.call(plugin,img);},0);}).one("error",function(){p.o.error.call(p,content,"image");}).attr("src",content).each(function(){if(this.complete){$(this).trigger("load");}});},external:function(content,callback){var $frame=$("<iframe />").attr({src:content,frameborder:0,width:p.width,height:p.height});callback.call(this,$frame);},html:function(content,callback){callback.call(this,content);},jQuery:function(content,callback){callback.call(this,content.html());},"function":function(content,callback){callback.call(this,content.call(p));},ajax:function(content,callback){$.ajax({url:content,success:function(data){callback.call(this,data);},error:function(data){p.o.error.call(p,content,"ajax");}});}}},imageTypes=["png","jpg","gif"],type,cachedContent,$back,$pCont,$close,$preloader,$p;p.ele=undefined;p.o=$.extend(true,{},defaults,settings);p.open=function(content,popupType,ele){content=(content===undefined||content==="#")?p.o.content:content;if(content===null){p.o.error.call(p,content,type);return false;}if(ele!==undefined){if(p.ele&&p.o.activeClass){$(p.ele).removeClass(p.o.activeClass);}p.ele=ele;if(p.ele&&p.o.activeClass){$(p.ele).addClass(p.o.activeClass);}}if($back===undefined){$back=$('<div class="'+p.o.backClass+'"/>').appendTo($("body")).css("opacity",0).animate({opacity:p.o.backOpacity},p.o.speed);if(!p.o.modal){$back.one("click.popup",function(){p.close();});}if(p.o.hideFlash){$("object, embed").css("visibility","hidden");}if(p.o.preloaderContent){$preloader=$(p.o.preloaderContent).appendTo($("body"));}}popupType=getValue([popupType,p.o.type]);popupType=(popupType==="auto")?guessType(content):popupType;type=popupType;p.width=(p.o.width)?p.o.width:null;p.height=(p.o.height)?p.o.height:null;if($.inArray(popupType,["inline","jQuery","function"])===-1){var paramType=getParameterByName(p.o.typeParam,content),paramWidth=getParameterByName(p.o.widthParam,content),paramHeight=getParameterByName(p.o.heightParam,content);popupType=(paramType!==null)?paramType:popupType;p.width=(paramWidth!==null)?paramWidth:p.width;p.height=(paramHeight!==null)?paramHeight:p.height;}p.o.beforeOpen.call(p,popupType);if(p.o.types[popupType]){p.o.types[popupType].call(p,content,showContent);}else{p.o.types.ajax.call(p,content,showContent);}};function getValue(items){var finalValue;$.each(items,function(i,value){if(value){finalValue=value;return false;}});return finalValue;}function guessType(content){if(typeof content==="function"){return"function";}else{if(content instanceof $){return"jQuery";}else{if(content.substr(0,1)==="#"||content.substr(0,1)==="."){return"inline";}else{if($.inArray(content.substr(content.length-3),imageTypes)!==-1){return"image";}else{if(content.substr(0,4)==="http"){return"external";}else{return"ajax";}}}}}}function showContent(content){if($preloader){$preloader.fadeOut("fast",function(){$(this).remove();});}var replacing=true;if($pCont===undefined){replacing=false;$pCont=$('<div class="'+p.o.containerClass+'">');$p=$(p.o.markup).appendTo($pCont);$close=$(p.o.closeContent).one("click",function(){p.close();}).appendTo($pCont);$(window).resize(p.center);$pCont.appendTo($("body")).css("opacity",0);}var $pContent=$("."+p.o.contentClass,$pCont);if(p.width){$pContent.css("width",p.width,10);}else{$pContent.css("width","");}if(p.height){$pContent.css("height",p.height,10);}else{$pContent.css("height","");}if($p.hasClass(p.o.contentClass)){$p.html(content);}else{$p.find("."+p.o.contentClass).html(content);}if(!replacing){p.o.show.call(p,$pCont,$back);}else{p.o.replaced.call(p,$pCont,$back);}}p.close=function(){p.o.beforeClose.call(p);if(type==="inline"&&p.o.keepInlineChanges){cachedContent=$("."+p.o.contentClass).html();}if($back!==undefined){$back.animate({opacity:0},p.o.speed,function(){p.cleanUp();});}p.o.hide.call(p,$pCont,$back);return p;};p.cleanUp=function(){$back.add($pCont).remove();$pCont=$back=undefined;$(window).unbind("resize",p.center);if(p.o.hideFlash){$("object, embed").css("visibility","visible");}if(p.ele&&p.o.activeClass){$(p.ele).removeClass(p.o.activeClass);}var $popupPlaceholder=$("."+p.o.popupPlaceholderClass);if(type=="inline"&&$popupPlaceholder.length){$popupPlaceholder.html(cachedContent).removeClass(p.o.popupPlaceholderClass);}type=null;p.o.afterClose.call(p);return p;};p.center=function(){$pCont.css(p.getCenter());$back.css({height:document.documentElement.clientHeight});return p;};p.getCenter=function(){var pW=$pCont.children().outerWidth(true),pH=$pCont.children().outerHeight(true),wW=document.documentElement.clientWidth,wH=document.documentElement.clientHeight;return{top:wH*0.5-pH*0.5,left:wW*0.5-pW*0.5};};function getParameterByName(name,url){var match=new RegExp("[?&]"+name+"=([^&]*)").exec(url);return match&&decodeURIComponent(match[1].replace(/\+/g," "));}};}(jQuery,window));var bibtexify=(function($){var htmlify=function(str){str=str.replace(/\\"\{a\}/g,"&auml;").replace(/\{\\aa\}/g,"&aring;").replace(/\\aa\{\}/g,"&aring;").replace(/\\"a/g,"&auml;").replace(/\\"\{o\}/g,"&ouml;").replace(/\\'e/g,"&eacute;").replace(/\\'\{e\}/g,"&eacute;").replace(/\\'a/g,"&aacute;").replace(/\\'A/g,"&Aacute;").replace(/\\"o/g,"&ouml;").replace(/\\ss\{\}/g,"&szlig;").replace(/\{/g,"").replace(/\}/g,"").replace(/\\&/g,"&").replace(/--/g,"&ndash;");return str;};var uriencode=function(str){str=str.replace(/\\"\{a\}/g,"%C3%A4").replace(/\{\\aa\}/g,"%C3%A5").replace(/\\aa\{\}/g,"%C3%A5").replace(/\\"a/g,"%C3%A4").replace(/\\"\{o\}/g,"%C3%B6").replace(/\\'e/g,"%C3%A9").replace(/\\'\{e\}/g,"%C3%A9").replace(/\\'a/g,"%C3%A1").replace(/\\'A/g,"%C3%81").replace(/\\"o/g,"%C3%B6").replace(/\\ss\{\}/g,"%C3%9F").replace(/\{/g,"").replace(/\}/g,"").replace(/\\&/g,"%26").replace(/--/g,"%E2%80%93");return str;};var bib2html={entry2html:function(entryData,bib){var type=entryData.entryType.toLowerCase();if(array_keys(bib2html).indexOf(type)===-1){type="misc";entryData.entryType=type;}var itemStr=htmlify(bib2html[type](entryData));itemStr+=bib2html.bibtex(entryData);itemStr+=bib2html.links(entryData);if(bib.options.tweet&&entryData.url){itemStr+=bib2html.tweet(entryData,bib);}return itemStr.replace(/undefined/g,'<span class="undefined">missing</span>');},authors2html:function(authorData){var authorsStr="";for(var index=0;index<authorData.length;index++){if(index>0){authorsStr+=", ";}authorsStr+=authorData[index].last;}return htmlify(authorsStr);},links:function(entryData){var itemStr="";if(entryData.url&&entryData.url.match(/.*\.pdf/)){itemStr+=' (<a title="PDF-version of this article" href="'+entryData.url+'">pdf</a>)';}else{if(entryData.url){itemStr+=' (<a title="This article online" href="'+entryData.url+'">link</a>)';}}return itemStr;},bibtex:function(entryData){var itemStr="";itemStr+=' (<a title="This article as BibTeX" href="#" class="biblink">bib</a>)<div class="bibinfo hidden">';itemStr+="<pre>";itemStr+="@"+entryData.entryType+"{"+entryData.cite+",\n";$.each(entryData,function(key,value){if(key=="author"){itemStr+="  author = { ";for(var index=0;index<value.length;index++){if(index>0){itemStr+=" and ";}itemStr+=value[index].last;}itemStr+=" },\n";}else{if(key!="entryType"&&key!="cite"){itemStr+="  "+key+" = { "+value+" },\n";}}});itemStr+="}</pre></div>";return itemStr;},tweet:function(entryData,bib){var itemStr=' (<a title="Tweet this article" href="http://twitter.com/share?url=';itemStr+=entryData.url;itemStr+="&via="+bib.options.tweet;itemStr+="&text=";var splitName=function(wholeName){var spl=wholeName.split(" ");return spl[spl.length-1];};var auth=entryData.author;if(auth.length==1){itemStr+=uriencode(splitName(auth[0].last));}else{if(auth.length==2){itemStr+=uriencode(splitName(auth[0].last)+"%26"+splitName(auth[1].last));}else{itemStr+=uriencode(splitName(auth[0].last)+" et al");}}itemStr+=": "+encodeURIComponent('"'+entryData.title+'"');itemStr+='" target="_blank">tweet</a>)';return itemStr;},inproceedings:function(entryData){return this.authors2html(entryData.author)+" ("+entryData.year+"). "+entryData.title+". In <em>"+entryData.booktitle+", pp. "+entryData.pages+((entryData.address)?", "+entryData.address:"")+".</em>";},article:function(entryData){return this.authors2html(entryData.author)+" ("+entryData.year+"). "+entryData.title+". <em>"+entryData.journal+", "+entryData.volume+((entryData.number)?"("+entryData.number+")":"")+", pp. "+entryData.pages+". "+((entryData.address)?entryData.address+".":"")+"</em>";},misc:function(entryData){return this.authors2html(entryData.author)+" ("+entryData.year+"). "+entryData.title+". "+((entryData.howpublished)?entryData.howpublished+". ":"")+((entryData.note)?entryData.note+".":"");},mastersthesis:function(entryData){return this.authors2html(entryData.author)+" ("+entryData.year+"). "+entryData.title+". "+entryData.type+". "+entryData.organization+", "+entryData.school+".";},techreport:function(entryData){return this.authors2html(entryData.author)+" ("+entryData.year+"). "+entryData.title+". "+entryData.institution+". "+entryData.number+". "+entryData.type+".";},book:function(entryData){return this.authors2html(entryData.author)+" ("+entryData.year+").  <em>"+entryData.title+"</em>, "+entryData.publisher+", "+entryData.year+((entryData.issn)?", ISBN: "+entryData.issn+".":".");},inbook:function(entryData){return this.authors2html(entryData.author)+" ("+entryData.year+"). "+entryData.chapter+" in <em>"+entryData.title+"</em>, "+((entryData.editor)?" Edited by "+entryData.editor+", ":"")+entryData.publisher+", pp. "+entryData.pages+""+((entryData.series)?", <em>"+entryData.series+"</em>":"")+((entryData.volume)?", Vol. "+entryData.volume+"":"")+((entryData.issn)?", ISBN: "+entryData.issn+"":"")+".";},importance:{misc:0,manual:10,techreport:20,mastersthesis:30,inproceedings:40,incollection:50,proceedings:60,conference:70,article:80,phdthesis:90,inbook:100,book:110,unpublished:120},labels:{article:"Journal",book:"Book",conference:"Conference",inbook:"Book chapter",incollection:"",inproceedings:"Conference",manual:"Manual",mastersthesis:"Thesis",misc:"Misc",phdthesis:"PhD Thesis",proceedings:"Conference proceeding",techreport:"Technical report",unpublished:"Unpublished"}};bib2html.phdthesis=bib2html.mastersthesis;bib2html.conference=bib2html.inproceedings;var Bib2HTML=function(data,$pubTable,options){this.options=options;this.$pubTable=$pubTable;this.stats={};this.initialize(data);};var bibproto=Bib2HTML.prototype;bibproto.initialize=function initialize(data){var bibtex=new BibTex();bibtex.content=data;bibtex.parse();var bibentries=[];var len=bibtex.data.length;var entryTypes={};jQuery.extend(true,bib2html,this.options.bib2html);for(var index=0;index<len;index++){var item=bibtex.data[index];if(!item.year){item.year=this.options.defaultYear||"To Appear";}var html=bib2html.entry2html(item,this);if(!this.options.future){bibentries.push([item.year,bib2html.labels[item.entryType],html]);}else{if(typeof item.read_date=="undefined"||item.read_date=="TBD"){bibentries.push(["To Be Determined",item.year,bib2html.labels[item.entryType],html]);}else{var date=moment(item.read_date);var date_str=(date.isAfter(moment()))?"<strong style='color:#FF4136;'>"+date.format("LL")+"</strong>":date.format("LL");bibentries.push([date_str,item.year,bib2html.labels[item.entryType],html]);}}entryTypes[bib2html.labels[item.entryType]]=item.entryType;this.updateStats(item);}jQuery.fn.dataTableExt.oSort["type-sort-asc"]=function(x,y){var item1=bib2html.importance[entryTypes[x]];var item2=bib2html.importance[entryTypes[y]];return((item1<item2)?-1:((item1>item2)?1:0));};jQuery.fn.dataTableExt.oSort["type-sort-desc"]=function(x,y){var item1=bib2html.importance[entryTypes[x]];var item2=bib2html.importance[entryTypes[y]];return((item1<item2)?1:((item1>item2)?-1:0));};jQuery.fn.dataTableExt.oSort["date-sort-asc"]=function(x,y){var item1=new moment($(x).text(),"LL");var item2=new moment($(y).text(),"LL");if(!item1.isValid()||!item2.isValid()){return(!item1.isValid()&&!item2.isValid())?0:(!item1.isValid())?-1:1;}return((item1.isBefore(item2))?-1:(item1==item2)?0:1);};jQuery.fn.dataTableExt.oSort["date-sort-desc"]=function(x,y){var item1=new moment($(x).text(),"LL");var item2=new moment($(y).text(),"LL");if(!item1.isValid()||!item2.isValid()){return(!item1.isValid()&&!item2.isValid())?0:(!item1.isValid())?1:-1;}return((item1.isBefore(item2))?1:(item1==item2)?0:-1);};if(!this.options.future){var table=this.$pubTable.dataTable({aaData:bibentries,aaSorting:this.options.sorting,searching:this.options.searching,aoColumns:[{sTitle:"Year",orderDataSince:1},{sTitle:"Type",sType:"type-sort",asSorting:["desc","asc"]},{sTitle:"Publication",bSortable:false}],columnDefs:[{targets:0,sClass:"center"},{targets:1,sClass:"center"}],bPaginate:false});}else{var table=this.$pubTable.dataTable({aaData:bibentries,aaSorting:this.options.sorting,searching:this.options.searching,aoColumns:[{sTitle:"Read By",orderDataSince:1,sType:"date-sort",asSorting:["desc","asc"]},{sTitle:"Year",orderDataSince:2},{sTitle:"Type",sType:"type-sort",asSorting:["desc","asc"]},{sTitle:"Publication",bSortable:false}],columnDefs:[{targets:0,sClass:"center",width:"13%"},{targets:1,sClass:"center"},{targets:2,sClass:"center"}],bPaginate:true,bLengthChange:false,pageLength:50});}if(this.options.visualization){this.addBarChart();}$(".biblink").popup({content:function(){return $(this.ele).next(".bibinfo").html();}});};bibproto.updateStats=function updateStats(item){if(!this.stats[item.year]){this.stats[item.year]={count:1,types:{}};this.stats[item.year].types[item.entryType]=1;}else{this.stats[item.year].count+=1;if(this.stats[item.year].types[item.entryType]){this.stats[item.year].types[item.entryType]+=1;}else{this.stats[item.year].types[item.entryType]=1;}}};bibproto.addBarChart=function addBarChart(){var yearstats=[],max=0;$.each(this.stats,function(key,value){max=Math.max(max,value.count);yearstats.push({year:key,count:value.count,item:value,types:value.types});});yearstats.sort(function(a,b){var diff=a.year-b.year;if(!isNaN(diff)){return diff;}else{if(a.year<b.year){return -1;}else{if(a.year>b.year){return 1;}}}return 0;});var chartIdSelector="#"+this.$pubTable[0].id+"pubchart";var pubHeight=$(chartIdSelector).height()/max-2;var styleStr=chartIdSelector+" .year { width: "+(100/yearstats.length)+"%; }"+chartIdSelector+" .pub { height: "+pubHeight+"px; }";var legendTypes=[];var stats2html=function(item){var types=[];var str='<div class="year">';var sum=0;$.each(item.types,function(type,value){types.push(type);sum+=value;});types.sort(function(x,y){return bib2html.importance[y]-bib2html.importance[x];});str+='<div class="filler" style="height:'+((pubHeight+2)*(max-sum))+'px;"></div>';for(var i=0;i<types.length;i++){var type=types[i];if(legendTypes.indexOf(type)===-1){legendTypes.push(type);}for(var j=0;j<item.types[type];j++){str+='<div class="pub '+type+'"></div>';}}return str+'<div class="yearlabel">'+item.year+"</div></div>";};var statsHtml="<style>"+styleStr+"</style>";yearstats.forEach(function(item){statsHtml+=stats2html(item);});var legendHtml='<div class="legend">';for(var i=0,l=legendTypes.length;i<l;i++){var legend=legendTypes[i];legendHtml+='<span class="pub '+legend+'"></span>'+bib2html.labels[legend];}legendHtml+="</div>";$(chartIdSelector).html(statsHtml).after(legendHtml);};return function(bibsrc,bibElemId,opts){var options=$.extend({},{visualization:true,searching:false,future:false,sorting:[[0,"desc"],[1,"desc"]]},opts);var $pubTable=$("#"+bibElemId).addClass("bibtable");if(options.visualization){$pubTable.before('<div id="'+bibElemId+'pubchart" class="bibchart"></div>');}var $bibSrc=$(bibsrc);if($bibSrc.length){new Bib2HTML($bibSrc.html(),$pubTable,options);$bibSrc.hide();}else{var callbackHandler=function(data){new Bib2HTML(data,$pubTable,options);};$.get(bibsrc,callbackHandler,"text");}};})(jQuery);